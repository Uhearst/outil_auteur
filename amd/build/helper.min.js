define("format_udehauthoring/helper",["exports","./moduleHelper","./objectiveHelper","./utils","./evaluationHelper","./courseHelper","./notificationHelper"],(function(_exports,_moduleHelper,_objectiveHelper,_utils,_evaluationHelper,_courseHelper,_notificationHelper){function handleInit(){var n=window.location.pathname.lastIndexOf("/"),page=window.location.pathname.substring(n+1),anchor=window.location.href.includes("#")?window.location.href.substring(window.location.href.lastIndexOf("#")+1):"displayable-form-informations-container";page.includes("course")&&((0,_utils.appendAnchorToForm)(anchor),"displayable-form-objectives-container"===anchor?((0,_objectiveHelper.initObjectives)(),(0,_utils.appendStyleToAnchorMenuSection)("item-teachingobjectives")):"displayable-form-sections-container"===anchor?((0,_moduleHelper.initModules)(),(0,_utils.appendStyleToAnchorMenuSection)("item-coursesections")):"displayable-form-evaluations-container"===anchor?((0,_evaluationHelper.initEvaluations)(),(0,_utils.appendStyleToAnchorMenuSection)("item-learningevaluations")):((0,_courseHelper.initCourse)(),(0,_utils.appendStyleToAnchorMenuSection)("item-generalinformations"))),window.$(document).scrollTop(0),(0,_utils.formatEditorAndFileManager)()}function handleFillForms(params){var n=window.location.pathname.lastIndexOf("/"),page=window.location.pathname.substring(n+1),anchor=window.location.href.includes("#")?window.location.href.substring(window.location.href.lastIndexOf("#")+1):"displayable-form-informations-container";if(page.includes("course")){var parsedResponse=null,decodedParams=JSON.parse(params);window.$.ajax({type:"POST",url:"../handlers/ajax_course_handler.php",data:{courseId:decodedParams.courseId},success:function(response){parsedResponse=JSON.parse(response),"displayable-form-objectives-container"===anchor?(0,_objectiveHelper.fillFormObjectives)(parsedResponse.data.teachingobjectives):"displayable-form-sections-container"===anchor?(0,_moduleHelper.fillFormModules)(parsedResponse.data.sections):"displayable-form-evaluations-container"===anchor&&(0,_evaluationHelper.fillFormEvaluations)(parsedResponse.data.evaluations,parsedResponse.data.sections,parsedResponse.data.teachingobjectives),(0,_utils.formatEditorAndFileManager)()},error:function(){window.console.log("failure")}})}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.exportCourse=function(courseId){document.getElementById("publishCourse").addEventListener("click",(function(){window.$.ajax({type:"POST",url:"../handlers/ajax_export_handler.php",data:{courseId:courseId},success:function(){(0,_notificationHelper.addNotification)("Le cours a été publié avec succès",1)},error:function(){(0,_notificationHelper.addNotification)("Une erreur s'est produite lors de la publication du cours",2),window.console.log("failure")}})})),document.getElementById("publishFlushCourse").addEventListener("click",(function(){window.$.ajax({type:"POST",url:"../handlers/ajax_export_handler.php",data:{courseId:courseId,flush:"flush"},success:function(){(0,_notificationHelper.addNotification)("Le cours a été publié avec succès",1)},error:function(){(0,_notificationHelper.addNotification)("Une erreur s'est produite lors de la remise à 0 et publication du cours",2),window.console.log("failure")}})}))},_exports.fillForm=function(array){handleFillForms(array),window.addEventListener("hashchange",(function(){handleFillForms(array)}))},_exports.init=function(){handleInit(),window.addEventListener("hashchange",(function(){handleInit()}))},_exports.publishCoursePlan=function(Ids){document.getElementById("publishCoursePlan").addEventListener("click",(function(){window.open("../handlers/pdf_syllabus_handler.php?courseId="+Ids[1])}))}}));

//# sourceMappingURL=helper.min.js.map