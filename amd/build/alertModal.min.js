define("format_udehauthoring/alertModal",["exports","core/str"],(function(_exports,_str){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleModal=async function(){await async function(){let modalContainer=document.createElement("div"),modalDialog=document.createElement("div"),modalContent=document.createElement("div"),modalHeader=document.createElement("div"),modalTitle=document.createElement("h5"),modalBody=document.createElement("div"),modalFooter=document.createElement("div"),buttonClose=document.createElement("button"),buttonCloseHeader=document.createElement("button"),buttonSave=document.createElement("button");modalContainer.setAttribute("class","modal fade alert-modal"),modalContainer.setAttribute("id","alertModal"),modalContainer.setAttribute("tabindex","-1"),modalContainer.setAttribute("role","dialog"),modalContainer.setAttribute("aria-labelledby","alertModalLabel"),modalContainer.setAttribute("aria-hidden","true"),modalDialog.setAttribute("class","modal-dialog"),modalDialog.setAttribute("role","document"),modalContent.setAttribute("class","modal-content alert-modal-content"),modalHeader.setAttribute("class","modal-header"),modalTitle.setAttribute("class","modal-title"),modalTitle.setAttribute("id","alertModalLabel"),modalTitle.innerHTML=await(0,_str.get_string)("alertmodaltitle","format_udehauthoring"),buttonCloseHeader.setAttribute("type","button"),buttonCloseHeader.setAttribute("class","close"),buttonCloseHeader.setAttribute("data-dismiss","modal"),buttonCloseHeader.setAttribute("aria-label","Close"),buttonCloseHeader.innerHTML='<span aria-hidden="true">&times;</span>',modalBody.setAttribute("class","modal-body"),modalFooter.setAttribute("class","modal-footer"),buttonClose.setAttribute("type","button"),buttonClose.setAttribute("class","btn btn-secondary"),buttonClose.setAttribute("data-dismiss","modal"),buttonClose.innerHTML=await(0,_str.get_string)("cancel"),buttonSave.setAttribute("type","button"),buttonSave.setAttribute("class","btn btn-primary"),buttonSave.setAttribute("id","btn_delete_tool"),buttonSave.innerHTML=await(0,_str.get_string)("delete"),modalFooter.appendChild(buttonClose),modalFooter.appendChild(buttonSave),modalHeader.appendChild(modalTitle),modalHeader.appendChild(buttonCloseHeader),modalContent.appendChild(modalHeader),modalContent.appendChild(modalBody),modalContent.appendChild(modalFooter),modalDialog.appendChild(modalContent),modalContainer.appendChild(modalDialog);let form=document.getElementById("udeh-form");form&&form.appendChild(modalContainer)}(),document.querySelectorAll('[name*="[delete_tool]"]').forEach((button=>{button.addEventListener("click",(async e=>{e.stopImmediatePropagation(),(location.href.includes("subquestion")||location.href.includes("globalevaluation"))&&(currentIndex=button.name.slice(button.name.indexOf("[")+1,button.name.indexOf("]"))),currentName=window.location.pathname.includes("subquestion")?document.querySelector('[id = "exploration_tool_name_'+currentIndex+'"]').innerHTML:null===currentIndex?document.querySelector('[id = "evaluation_tool_name"]').innerHTML:document.querySelector('[id = "evaluation_tool_name_'+currentIndex+'"]').innerHTML,document.querySelector("#alertModal").querySelector(".modal-body").innerHTML=await(0,_str.get_string)("alertmodalbody","format_udehauthoring",currentName),window.$("#alertModal").modal("toggle")}))})),document.getElementById("btn_delete_tool").addEventListener("click",(()=>{let cmid=null,id=null,type=null;window.location.pathname.includes("subquestion")?(type=1,cmid=document.querySelector('[name = "exploration_tool_cmid['+currentIndex+']"]'),id=document.querySelector('[name = "exploration_id['+currentIndex+']"]')):(type=2,null===currentIndex?(cmid=document.querySelector('[name = "evaluation_tool_cmid"]'),id=document.querySelector('[name = "id"]')):(cmid=document.querySelector('[name = "evaluation_tool_cmid['+currentIndex+']"]'),id=document.querySelector('[name = "evaluation_id['+currentIndex+']"]'))),window.$.ajax({type:"POST",url:"../handlers/ajax_tool_handler.php",data:{cmid:cmid.value,id:id.value,type:type},success:function(){window.$("#alertModal").modal("toggle"),null===currentIndex?(document.getElementById("fgroup_id_url_group").style="display:none;",document.querySelector('[name*="generate_tool"]').disabled=!1,document.getElementById("id_evaluation_tool").disabled=!1):(document.getElementById("fgroup_id_url_group_"+currentIndex).style="display:none;",document.getElementById("id_tool_group_"+currentIndex+"_generate_tool").disabled=!1,window.location.pathname.includes("subquestion")?document.getElementById("id_tool_group_"+currentIndex+"_exploration_tool").disabled=!1:document.getElementById("id_tool_group_"+currentIndex+"_evaluation_tool").disabled=!1),currentIndex=null,window.location.reload()},error:function(){window.console.log("failure")}})}))};let currentIndex=null,currentName=null}));

//# sourceMappingURL=alertModal.min.js.map