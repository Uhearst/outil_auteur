define("format_udehauthoring/globalEvaluationHelper",["exports","./utils","./validator/evaluationValidator","./toolHelper","core/str","./accordionHandler"],(function(_exports,_utils,_evaluationValidator,_toolHelper,_str,_accordionHandler){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initGlobalEvaluations=async function(gloablevaluationplans){const decodedParams=JSON.parse(gloablevaluationplans);document.getElementById("id_add_global_evaluation").hidden=!0;let accordions=document.querySelectorAll('[class*="single-accordion-container"]');for(let i=0;i<accordions.length;i++){const accordion=accordions[i];let headerLink=accordion.firstElementChild.firstElementChild;headerLink.href="#collapseGlobalEvaluation"+i,headerLink.setAttribute("aria-controls","collapseGlobalEvaluation"+i),accordion.children[1].setAttribute("id","collapseGlobalEvaluation"+i),i>0&&(accordion.children[1].setAttribute("class","collapse"),headerLink.setAttribute("aria-expanded","false"),headerLink.setAttribute("class","collapsed"));let globalEvalTranslation=await(0,_str.get_string)("globalevaluation","format_udehauthoring");if(decodedParams[i].title){let title=decodedParams[i].title,headerContent=globalEvalTranslation+" "+(i+1)+" - "+(0,_utils.removeTags)(title);headerLink.innerHTML=headerContent.length>70?headerContent.substring(0,70)+"...":headerContent}else headerLink.innerHTML=globalEvalTranslation+" "+(i+1);let currentEmbedSelector=accordion.querySelector('[class*="custom-switch"]');currentEmbedSelector.children[0].id="embed_selector_"+i,currentEmbedSelector.children[1].setAttribute("for","embed_selector_"+i);let innerAccordion=accordion.querySelector('[id*="evaluation_preview_container_"]');innerAccordion.setAttribute("id",innerAccordion.getAttribute("id")+i),innerAccordion.firstElementChild.setAttribute("id",innerAccordion.firstElementChild.getAttribute("id")+i),innerAccordion.firstElementChild.firstElementChild.setAttribute("href",innerAccordion.firstElementChild.firstElementChild.getAttribute("href")+i),innerAccordion.firstElementChild.firstElementChild.setAttribute("aria-controls",innerAccordion.firstElementChild.firstElementChild.getAttribute("aria-controls")+i),innerAccordion.children[1].setAttribute("id",innerAccordion.children[1].getAttribute("id")+i);for(let j=0;j<3;j++){let valToUse;switch(innerAccordion.children[1].firstElementChild.children[j].setAttribute("id",innerAccordion.children[1].firstElementChild.children[j].getAttribute("id")+i),innerAccordion.children[1].firstElementChild.children[j].firstElementChild.setAttribute("id",innerAccordion.children[1].firstElementChild.children[j].firstElementChild.getAttribute("id")+i),2!==j&&innerAccordion.children[1].firstElementChild.children[j].children[1].setAttribute("id",innerAccordion.children[1].firstElementChild.children[j].children[1].getAttribute("id")+i),j){case 0:valToUse=decodedParams[i].description;break;case 1:valToUse=decodedParams[i].weight;break;case 2:valToUse=decodedParams[i].associatedobjtext}switch(j){case 0:innerAccordion.children[1].firstElementChild.children[j].children[1].innerHTML=valToUse;break;case 1:innerAccordion.children[1].firstElementChild.children[j].children[1].innerHTML=(0,_utils.removeTags)(valToUse);break;case 2:for(let counter=0;counter<valToUse.length;counter++){let objContainer=document.createElement("div");objContainer.setAttribute("style","display: flex;"),objContainer.setAttribute("id","evaluation_obj_content_"+i+"_"+counter),objContainer.innerHTML=valToUse[counter],innerAccordion.children[1].firstElementChild.children[j].appendChild(objContainer)}}}}(0,_utils.formatEditorAndFileManager)(),function(decodedParams){if(decodedParams.length>0){for(let i=0;i<decodedParams.length;i++)(0,_utils.handleEmbed)("fitem_id_evaluation_introduction_embed_"+i,"fitem_id_evaluation_introduction_"+i,i);(0,_evaluationValidator.validateEvaluationDataForm)(decodedParams.length)}}(decodedParams),(0,_toolHelper.initRedactTools)(2,decodedParams.map((value=>value.toolname))),(0,_accordionHandler.handleAccordions)(),(0,_accordionHandler.initAccordionsAfterFillingForm)()}}));

//# sourceMappingURL=globalEvaluationHelper.min.js.map