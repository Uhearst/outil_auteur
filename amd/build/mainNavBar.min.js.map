{"version":3,"file":"mainNavBar.min.js","sources":["../src/mainNavBar.js"],"sourcesContent":["import {addNotification} from \"./notificationHelper\";\nimport {get_string as getString} from 'core/str';\nimport {saveWarningModal} from \"./helper\";\n\n/**\n */\nexport function initNavBar() {\n    window.addEventListener('load', function() {\n        window.$('body').css('zoom', localStorage.getItem('zoomLevel'));\n    });\n    zoom();\n    preview();\n    configure();\n}\n\n/**\n *\n */\nfunction configure() {\n    let button = document.querySelector('#config-button');\n    if (button) {\n        button.addEventListener('click', function(e) {\n            e.preventDefault();\n            window.$('#config-dialog').show();\n            window.$('#save-warning-container').show();\n\n            window.$('#config-dialog').find('.btn-secondary').on('click', function() {\n                window.$('#config-dialog').hide();\n                window.$('#save-warning-container').hide();\n            });\n\n            window.$('#config-dialog').find('.btn-primary').on('click', function() {\n                window.$('#progress-circle').show();\n                window.$.ajax({\n                    method: \"POST\",\n                    url: \"../handlers/ajax_config_handler.php\",\n                    data: {\n                        courseId: window.$('#courseId').val(),\n                        module: window.$('#etiModule').val(),\n                        question: window.$('#etiQuestion').val(),\n                        questionExplore: window.$('#etiExplore').val(),\n                        questionHide: window.$('#etiHide').val(),\n                        questionSub: window.$('#etiSub').val()\n                    }\n                }).done(async function() {\n                    window.$('#config-dialog').hide();\n                    window.$('#save-warning-container').hide();\n                    window.$('#progress-circle').hide();\n                    addNotification(await getString('notificationsavelabel', 'format_udehauthoring'), 1);\n                }).fail(async function() {\n                    window.$('#config-dialog').hide();\n                    window.$('#save-warning-container').hide();\n                    window.$('#progress-circle').hide();\n                    addNotification(await getString('notificationerrorsave', 'format_udehauthoring'), 2);\n\n                });\n            });\n        });\n    }\n}\n\n/**\n *\n */\nfunction zoom() {\n    let zoomButtons = document.querySelectorAll('.zoom-level');\n    zoomButtons.forEach(zoomButton => {\n        zoomButton.addEventListener('click', function(event) {\n            localStorage.setItem('zoomLevel', (event.target.value / 100));\n            window.$('body').css('zoom', (event.target.value / 100));\n        });\n    });\n}\n\n/**\n *\n */\nfunction preview() {\n    let previewButton = document.querySelector('#preview-button');\n    if (previewButton) {\n        previewButton.addEventListener('click', async function() {\n            if (window.location.href.includes('section.php')) {\n                let sectionTitle = document.querySelector('#udeh-form').querySelector('input[name=\"section_title\"]');\n                if (sectionTitle.value === '' || sectionTitle.value === undefined || sectionTitle.value === null) {\n                    addNotification(await getString('notificationerrormissingsectionsnamepreview', 'format_udehauthoring'), 2);\n                    return;\n                }\n            }\n            if (\"url\" in previewButton.dataset) {\n                saveWarningModal(previewButton.dataset.url);\n            }\n            if (\"urls\" in previewButton.dataset) {\n                let anchor = location.hash.substr(1);\n                let urls = JSON.parse(previewButton.dataset.urls);\n                if (anchor in urls) {\n                    saveWarningModal(urls[anchor]);\n                }\n            }\n        });\n    }\n}"],"names":["window","addEventListener","$","css","localStorage","getItem","document","querySelectorAll","forEach","zoomButton","event","setItem","target","value","previewButton","querySelector","async","location","href","includes","sectionTitle","undefined","dataset","url","anchor","hash","substr","urls","JSON","parse","preview","button","e","preventDefault","show","find","on","hide","ajax","method","data","courseId","val","module","question","questionExplore","questionHide","questionSub","done","fail","configure"],"mappings":"8OAOIA,OAAOC,iBAAiB,QAAQ,WAC5BD,OAAOE,EAAE,QAAQC,IAAI,OAAQC,aAAaC,QAAQ,iBAyDpCC,SAASC,iBAAiB,eAChCC,SAAQC,aAChBA,WAAWR,iBAAiB,SAAS,SAASS,OAC1CN,aAAaO,QAAQ,YAAcD,MAAME,OAAOC,MAAQ,KACxDb,OAAOE,EAAE,QAAQC,IAAI,OAASO,MAAME,OAAOC,MAAQ,0BASvDC,cAAgBR,SAASS,cAAc,mBACvCD,eACAA,cAAcb,iBAAiB,SAASe,oBAChChB,OAAOiB,SAASC,KAAKC,SAAS,eAAgB,KAC1CC,aAAed,SAASS,cAAc,cAAcA,cAAc,kCAC3C,KAAvBK,aAAaP,YAAuCQ,IAAvBD,aAAaP,OAA8C,OAAvBO,aAAaP,+DACxD,mBAAU,8CAA+C,wBAAyB,MAI5G,QAASC,cAAcQ,sCACNR,cAAcQ,QAAQC,KAEvC,SAAUT,cAAcQ,QAAS,KAC7BE,OAASP,SAASQ,KAAKC,OAAO,GAC9BC,KAAOC,KAAKC,MAAMf,cAAcQ,QAAQK,MACxCH,UAAUG,mCACOA,KAAKH,aApFtCM,kBAQIC,OAASzB,SAASS,cAAc,kBAChCgB,QACAA,OAAO9B,iBAAiB,SAAS,SAAS+B,GACtCA,EAAEC,iBACFjC,OAAOE,EAAE,kBAAkBgC,OAC3BlC,OAAOE,EAAE,2BAA2BgC,OAEpClC,OAAOE,EAAE,kBAAkBiC,KAAK,kBAAkBC,GAAG,SAAS,WAC1DpC,OAAOE,EAAE,kBAAkBmC,OAC3BrC,OAAOE,EAAE,2BAA2BmC,UAGxCrC,OAAOE,EAAE,kBAAkBiC,KAAK,gBAAgBC,GAAG,SAAS,WACxDpC,OAAOE,EAAE,oBAAoBgC,OAC7BlC,OAAOE,EAAEoC,KAAK,CACVC,OAAQ,OACRhB,IAAK,sCACLiB,KAAM,CACFC,SAAUzC,OAAOE,EAAE,aAAawC,MAChCC,OAAQ3C,OAAOE,EAAE,cAAcwC,MAC/BE,SAAU5C,OAAOE,EAAE,gBAAgBwC,MACnCG,gBAAiB7C,OAAOE,EAAE,eAAewC,MACzCI,aAAc9C,OAAOE,EAAE,YAAYwC,MACnCK,YAAa/C,OAAOE,EAAE,WAAWwC,SAEtCM,MAAKhC,iBACJhB,OAAOE,EAAE,kBAAkBmC,OAC3BrC,OAAOE,EAAE,2BAA2BmC,OACpCrC,OAAOE,EAAE,oBAAoBmC,qDACP,mBAAU,wBAAyB,wBAAyB,MACnFY,MAAKjC,iBACJhB,OAAOE,EAAE,kBAAkBmC,OAC3BrC,OAAOE,EAAE,2BAA2BmC,OACpCrC,OAAOE,EAAE,oBAAoBmC,qDACP,mBAAU,wBAAyB,wBAAyB,YAzClGa"}