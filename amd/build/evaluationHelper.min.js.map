{"version":3,"file":"evaluationHelper.min.js","sources":["../src/evaluationHelper.js"],"sourcesContent":["import {\n    handleEmbed,\n    handleNewAccordionElement,\n    initTinyMce,\n    prepareAccordions,\n    prepareActionButton,\n    // removeTags,\n    removeTinyMce\n} from \"./utils\";\nimport {dictionnary} from \"./language/format_udehauthoring_fr\";\nimport {validateEvaluationDataForm, validateEvaluationForm} from \"./validator/evaluationValidator\";\nimport {initRedactTools} from \"./toolHelper\";\n\nlet counterEvaluations = 0;\nlet modules = [];\nlet learningObjectives = [];\n\nclass Module {\n    constructor(title, id) {\n        this.title = title;\n        this.id = id;\n    }\n}\n\n/**\n * @param {boolean} fromBtnClick\n */\nfunction addEvaluation(fromBtnClick) {\n    let x = buildEvaluation();\n    let container = document.getElementById('displayable-form-evaluations-container');\n    container.insertBefore(x, document.getElementById('evaluation-add-container'));\n    updateAddEvaluationButton();\n    disableEvaluationDeleteButton();\n    initTinyMce('id_evaluation_title_' + counterEvaluations, 'superscript subscript | undo redo');\n    initTinyMce('id_evaluation_description_' + counterEvaluations,\n        ['formatselect bold italic | numlist bullist indent outdent | link unlink | emoticons image ',\n            // eslint-disable-next-line max-len\n            'underline strikethrough superscript subscript | alignleft aligncenter alignright | charmap table removeformat | undo redo ']);\n    getTooltips(counterEvaluations);\n    if (fromBtnClick) {\n        handleNewAccordionElement(x);\n    }\n}\n\n/**\n * @param {string} index\n */\nfunction removeEvaluation(index) {\n    let evaluation = document.getElementById('row_course_evaluation_container_' + index);\n    removeTinyMce(\"id_evaluation_title_\" + index);\n    removeTinyMce(\"id_evaluation_description_\" + index);\n\n    evaluation.remove();\n    updateExistingEvaluations(index);\n    updateAddEvaluationButton();\n    disableEvaluationDeleteButton();\n    updateRemoveEvaluationButton();\n    counterEvaluations = counterEvaluations - 1;\n}\n\n/**\n *\n */\nfunction buildEvaluation() {\n    counterEvaluations = counterEvaluations + 1;\n    let rowEvaluationContainer = document.createElement(\"div\");\n    let colEvaluationContainer = document.createElement(\"div\");\n    let colButtonContainer = document.createElement(\"div\");\n\n    rowEvaluationContainer.setAttribute('class', 'row row-container mb-3');\n    rowEvaluationContainer.setAttribute('id', 'row_course_evaluation_container_' + counterEvaluations);\n    colEvaluationContainer.setAttribute('class', 'col-11 accordion-container card');\n    colButtonContainer.setAttribute('class', 'col-1 remove_evaluation_action_button');\n\n    let header = buildEvaluationHeader();\n    let content = buildEvaluationContent();\n    colEvaluationContainer.appendChild(header);\n    colEvaluationContainer.appendChild(content);\n\n    let button = buildEvaluationButton();\n    colButtonContainer.appendChild(button);\n\n    rowEvaluationContainer.appendChild(colEvaluationContainer);\n    rowEvaluationContainer.appendChild(colButtonContainer);\n\n    return rowEvaluationContainer;\n}\n\n/**\n *\n */\nfunction buildEvaluationHeader() {\n    let headerContainer = document.createElement(\"div\");\n    let linkForCollapseDiv = document.createElement('a');\n\n    headerContainer.setAttribute('class', 'accordion-header card-header');\n    headerContainer.setAttribute('id', 'course_evaluation_header_' + (counterEvaluations));\n\n    linkForCollapseDiv.setAttribute('data-toggle', 'collapse');\n    linkForCollapseDiv.setAttribute('href', '#collapse_evaluation_' + (counterEvaluations));\n    linkForCollapseDiv.setAttribute('role', 'button');\n    linkForCollapseDiv.setAttribute('aria-expanded', 'false');\n    linkForCollapseDiv.setAttribute('aria-controls', 'collapse_evaluation_' + (counterEvaluations));\n    linkForCollapseDiv.setAttribute('class', 'collapsed');\n    linkForCollapseDiv.innerHTML = 'Evaluation ' + (counterEvaluations + 1);\n\n    headerContainer.appendChild(linkForCollapseDiv);\n\n    return headerContainer;\n}\n\n/**\n *\n */\nfunction buildEvaluationContent() {\n    let contentContainer = document.createElement(\"div\");\n    let collapseDiv = document.createElement(\"div\");\n\n    collapseDiv.setAttribute('class', 'collapse');\n    collapseDiv.setAttribute('id', 'collapse_evaluation_' + (counterEvaluations));\n    collapseDiv.setAttribute('data-parent', '#displayable-form-evaluations-container');\n\n    contentContainer.setAttribute('class', 'card-body accordion-content');\n    contentContainer.setAttribute('id', 'course_evaluation_content_' + (counterEvaluations));\n\n    let title = buildEditorContainer('evaluation_title', dictionnary.evaluationTitle);\n    let description = buildEditorContainer('evaluation_description', dictionnary.evaluationDescription);\n    let weight = buildInputContainer('evaluation_weight', dictionnary.evaluationWeight);\n    let learningObjectivesList = buildCheckboxContainer('evaluation_learning_objectives',\n        dictionnary.associatedLearningObjective);\n    let module = buildSelectContainer();\n\n    contentContainer.appendChild(title);\n    contentContainer.appendChild(description);\n    contentContainer.appendChild(weight);\n    contentContainer.appendChild(learningObjectivesList);\n    contentContainer.appendChild(module);\n    collapseDiv.appendChild(contentContainer);\n\n    return collapseDiv;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildEditorContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement(\"div\");\n    let label = document.createElement(\"label\");\n    let editorContainer = document.createElement(\"div\");\n\n\n    fieldContainer.setAttribute('class', 'form-group row  fitem   tiny-editor');\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterEvaluations);\n\n    labelContainer.setAttribute('class', 'col-md-3 col-form-label d-flex pb-0 pr-md-0');\n\n    label.setAttribute('class', 'd-inline word-break');\n    label.setAttribute('for', 'id_' + id + '_' + counterEvaluations);\n    label.innerHTML = labelText;\n\n    editorContainer.setAttribute('class', 'col-md-9 align-items-start felement');\n    editorContainer.setAttribute('data-fieldtype', 'editor');\n\n    let editor = buildTinyMCE(id, counterEvaluations);\n\n    editorContainer.appendChild(editor);\n    labelContainer.appendChild(label);\n\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(editorContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildInputContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement(\"div\");\n    let label = document.createElement(\"label\");\n    let inputContainer = document.createElement(\"div\");\n    let input = document.createElement(\"input\");\n\n\n    fieldContainer.setAttribute('class', 'form-group row  fitem   ');\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterEvaluations);\n\n    labelContainer.setAttribute('class', 'col-md-3 col-form-label d-flex pb-0 pr-md-0');\n\n    label.setAttribute('class', 'd-inline word-break');\n    label.setAttribute('for', 'id_' + id + '_' + counterEvaluations);\n    label.innerHTML = labelText;\n\n    inputContainer.setAttribute('class', 'col-md-9 form-inline align-items-start felement');\n    inputContainer.setAttribute('data-fieldtype', 'text');\n\n    input.setAttribute('type', 'text');\n    input.setAttribute('class', 'form-control');\n    input.setAttribute('name', id + '_' + counterEvaluations);\n    input.setAttribute('id', 'id_' + id + '_' + counterEvaluations);\n\n    inputContainer.appendChild(input);\n    labelContainer.appendChild(label);\n\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(inputContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildCheckboxContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let titleContainer = document.createElement(\"div\");\n    let labelField = document.createElement(\"label\");\n\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterEvaluations);\n\n    titleContainer.setAttribute('id', 'evaluation_learning_objectives_title_' + counterEvaluations);\n    titleContainer.setAttribute('class', 'd-flex');\n\n    labelField.setAttribute('for', 'evaluation_learning_objectives_title_' + counterEvaluations);\n    labelField.setAttribute('class', 'd-inline word-break ml-3 eval-obj-title');\n    labelField.innerHTML = labelText;\n\n    titleContainer.appendChild(labelField);\n    fieldContainer.appendChild(titleContainer);\n\n    if (learningObjectives !== null && learningObjectives !== []) {\n        learningObjectives.forEach(function(parent, index) {\n            let element = null;\n            if(Array.isArray(parent)) {\n                element = parent;\n            } else {\n                element = parent.learningobjectives;\n            }\n            element.forEach(function(obj, subIndex) {\n                let labelContainer = document.createElement(\"div\");\n                let subContainer = document.createElement(\"div\");\n                let checkBoxContainer = document.createElement(\"div\");\n                let checkBoxSubContainer = document.createElement(\"div\");\n                let checkbox = document.createElement(\"input\");\n                let hiddenCheckbox = document.createElement(\"input\");\n                let labelCheckbox = document.createElement(\"label\");\n\n                subContainer.setAttribute('class', 'form-group row  fitem  ');\n\n                labelContainer.setAttribute('class', 'col-md-3');\n                checkBoxContainer.setAttribute('class', 'col-md-9 checkbox');\n\n                checkBoxSubContainer.setAttribute('class', 'form-check d-flex');\n\n                hiddenCheckbox.setAttribute('type', 'hidden');\n                hiddenCheckbox.setAttribute('name', id + '_' + counterEvaluations + '[' + obj.id + ']');\n                hiddenCheckbox.setAttribute('value', '0');\n\n                checkbox.setAttribute('type', 'checkbox');\n                checkbox.setAttribute('class', 'form-check-input ');\n                checkbox.setAttribute('name', id + '_' + counterEvaluations + '[' + obj.id + ']');\n                checkbox.setAttribute('id', 'id_' + id + '_' + counterEvaluations + '_' + obj.id);\n                checkbox.setAttribute('value', '1');\n\n                labelCheckbox.setAttribute('for', 'id_' + id + '_' + counterEvaluations);\n                labelCheckbox.setAttribute('style', 'display: flex;');\n                labelCheckbox.innerHTML = '<span style=\"margin-right: 0.5rem;\">' + (index + 1)\n                    + '.' + (subIndex + 1) + ' - ' + '</span>' + obj.learningobjective;\n\n                checkBoxSubContainer.appendChild(hiddenCheckbox);\n                checkBoxSubContainer.appendChild(checkbox);\n                checkBoxSubContainer.appendChild(labelCheckbox);\n                checkBoxContainer.appendChild(checkBoxSubContainer);\n\n                subContainer.appendChild(labelContainer);\n                subContainer.appendChild(checkBoxContainer);\n\n                fieldContainer.appendChild(subContainer);\n            });\n        });\n    }\n\n    return fieldContainer;\n}\n\n/**\n *\n */\nfunction formatInitialObjList() {\n    let labels = document.querySelectorAll('[for^=\"id_evaluation_learning_objectives_0\"]');\n    for (let i = 0; i < labels.length; i++) {\n        labels[i].setAttribute('style', 'display:flex;');\n    }\n}\n\n/**\n *\n */\nfunction buildSelectContainer() {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement('div');\n    let selectContainer = document.createElement('div');\n    let label = document.createElement('label');\n    let select = document.createElement('select');\n\n    fieldContainer.setAttribute('id', \"fitem_id_evaluation_module_\" + counterEvaluations);\n    fieldContainer.setAttribute('class', \"form-group row  fitem   \");\n\n    labelContainer.setAttribute('class', \"col-md-3 col-form-label d-flex pb-0 pr-md-0\");\n\n    label.setAttribute('class', 'd-inline word-break ');\n    label.setAttribute('for', 'id_evaluation_module_' + counterEvaluations);\n    label.innerHTML = dictionnary.associatedModule;\n\n    selectContainer.setAttribute('class', 'col-md-9 form-inline align-items-start felement');\n    selectContainer.setAttribute('data-fieldtype', 'select');\n\n    select.setAttribute('class', 'custom-select');\n    select.setAttribute('name', 'evaluation_module_' + counterEvaluations);\n    select.setAttribute('id', 'id_evaluation_module_' + counterEvaluations);\n\n    modules.forEach(module => {\n        select.appendChild(buildOption(module));\n    });\n\n    labelContainer.appendChild(label);\n    selectContainer.appendChild(select);\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(selectContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {object} module\n */\nfunction buildOption(module) {\n    let option = document.createElement('option');\n    option.setAttribute('value', module.id);\n    option.innerHTML = module.title;\n    return option;\n}\n\n/**\n * @param {string} target\n * @param {string} evaluationIndex\n */\nfunction buildTinyMCE(target, evaluationIndex) {\n    let inputContainerDiv = document.createElement(\"textarea\");\n    inputContainerDiv.setAttribute('class', 'custom-editor');\n    inputContainerDiv.setAttribute('id', 'id_' + target + '_' + evaluationIndex);\n    inputContainerDiv.setAttribute('name', target + '_' + evaluationIndex);\n    return inputContainerDiv;\n}\n\n/**\n *\n */\nfunction buildEvaluationButton() {\n    let rowEvaluationContainer = document.createElement(\"div\");\n    let buttonContainer = document.createElement(\"div\");\n    let buttonElement = document.createElement(\"button\");\n    let icon = document.createElement(\"i\");\n\n    rowEvaluationContainer.setAttribute('id', 'fitem_id_remove_evaluation_' + counterEvaluations);\n\n    buttonContainer.setAttribute('data-fieldtype', 'button');\n\n    buttonElement.setAttribute('class', 'btn ml-0');\n    buttonElement.setAttribute('name', 'remove_evaluation_' + counterEvaluations);\n    buttonElement.setAttribute('id', 'id_remove_evaluation_' + counterEvaluations);\n    buttonElement.setAttribute('type', 'button');\n\n    icon.setAttribute('class', 'remove-button-js fa fa-minus-circle fa-2x');\n\n    buttonElement.appendChild(icon);\n    buttonContainer.appendChild(buttonElement);\n    rowEvaluationContainer.appendChild(buttonContainer);\n\n    return rowEvaluationContainer;\n}\n\n/**\n *\n */\nfunction disableEvaluationDeleteButton() {\n    let evaluations = document.querySelectorAll('[id^=\"row_course_evaluation_container_\"]');\n    if (evaluations.length === 1) {\n        let button = document.getElementById('id_remove_evaluation_0');\n        button.hidden = true;\n    } else {\n        let buttons = document.querySelectorAll('[id^=\"id_remove_evaluation\"]');\n        buttons.forEach(button => {\n            button.hidden = false;\n        });\n    }\n}\n\n/**\n *\n */\nfunction updateRemoveEvaluationButton() {\n    let buttons = document.querySelectorAll('[id^=\"fitem_id_remove_evaluation_\"]');\n    buttons.forEach(function(button, index) {\n        button.setAttribute('id', 'fitem_id_remove_evaluation_' + index);\n        let buttonElm = button.querySelector('[type=\"button\"]');\n        buttonElm.setAttribute('name', 'remove_evaluation_' + index);\n        buttonElm.setAttribute('id', 'id_remove_evaluation_' + index);\n    });\n}\n\n/**\n *\n */\nfunction updateAddEvaluationButton() {\n    let x = document.querySelectorAll('[id^=\"row_course_evaluation_container_\"]');\n    let addEvaluationButtonContainer = document.getElementById('evaluation-add-container');\n    let addEvaluationButtonText = addEvaluationButtonContainer.querySelector('.add-text');\n    addEvaluationButtonText.innerHTML = dictionnary.evaluation + (x.length + 1);\n}\n\n/**\n * @param {string} index\n */\nfunction updateExistingEvaluations(index) {\n    let evaluations = document.querySelectorAll('[id^=\"row_course_evaluation_container_\"]');\n    evaluations.forEach(evaluation => {\n        if (parseInt(evaluation.id.substring(evaluation.id.lastIndexOf('_') + 1)) > parseInt(index)) {\n            let currentIndex = parseInt(evaluation.id.substring(evaluation.id.lastIndexOf('_') + 1));\n            evaluation.setAttribute('id', 'row_course_evaluation_container_' + (currentIndex - 1));\n            let header = evaluation.querySelector('.accordion-header');\n            header.setAttribute('id', 'course_evaluation_header_' + (currentIndex - 1));\n            header.firstElementChild.setAttribute('href', '#collapse_evaluation_' + (currentIndex - 1));\n            header.firstElementChild.setAttribute('aria-controls', 'collapse_evaluation_' + (currentIndex - 1));\n            header.firstElementChild.innerHTML = 'Evaluation ' + (currentIndex);\n\n\n            let collapsible = evaluation.querySelector('.collapse');\n            collapsible.setAttribute('id', 'collapse_evaluation_' + (currentIndex - 1));\n            collapsible.firstElementChild.setAttribute('id', 'course_evaluation_content_' + (currentIndex - 1));\n            collapsible.firstElementChild.children[0].setAttribute('name', 'evaluation_' + (currentIndex - 1) + '_id_value');\n            updateExistingWeight(evaluation, currentIndex);\n            updateExistingEvaluationObjectives(evaluation, currentIndex);\n            updateExistingModules(evaluation, currentIndex);\n            updateEditorAndLabel(evaluation, currentIndex, 'title', 'superscript subscript | undo redo');\n            updateEditorAndLabel(evaluation, currentIndex, 'description',\n                ['formatselect bold italic | numlist bullist indent outdent | link unlink | emoticons image ',\n                    // eslint-disable-next-line max-len\n                    'underline strikethrough superscript subscript | alignleft aligncenter alignright | charmap table removeformat | undo redo ']);\n\n        }\n    });\n}\n\n/**\n * @param {object} evaluation\n * @param {string} currentIndex\n */\nfunction updateExistingModules(evaluation, currentIndex) {\n    let moduleContainer = evaluation.querySelector('[id^=\"fitem_id_evaluation_module_\"]');\n    moduleContainer.setAttribute('id', 'fitem_id_evaluation_module_' + (currentIndex - 1));\n    let labelTitle = moduleContainer.querySelector('[for^=\"id_evaluation_module_\"]');\n    labelTitle.setAttribute('for', 'id_evaluation_module_' + (currentIndex - 1));\n    let select = moduleContainer.querySelector('.custom-select');\n    select.name = \"evaluation_module_\" + (currentIndex - 1);\n    select.id = \"id_evaluation_module_\" + (currentIndex - 1);\n}\n\n/**\n * @param {object} evaluation\n * @param {string} currentIndex\n */\nfunction updateExistingEvaluationObjectives(evaluation, currentIndex) {\n    let objContainer = evaluation.querySelector('[id^=\"fitem_id_evaluation_learning_objectives_\"]');\n    objContainer.setAttribute('id', 'fitem_id_evaluation_learning_objectives_' + (currentIndex - 1));\n    objContainer.children[0].setAttribute('id', 'evaluation_learning_objectives_title_' + (currentIndex - 1));\n    objContainer.children[0].children[0].setAttribute('for', 'evaluation_learning_objectives_title_' + (currentIndex - 1));\n    let checkboxes = objContainer.querySelectorAll('[class^=\"form-group row  fitem  \"]');\n    checkboxes.forEach(checkbox => {\n        let innerContainer = checkbox.querySelector('[class^=\"form-check d-flex\"]');\n        let currentObjId = innerContainer.children[0].name\n            .substring(innerContainer.children[0].name.indexOf('[') + 1, innerContainer.children[0].name.indexOf(']'));\n        innerContainer.children[0].name = 'evaluation_learning_objectives_' + (currentIndex - 1) + '[' + currentObjId + ']';\n        innerContainer.children[1].name = 'evaluation_learning_objectives_' + (currentIndex - 1) + '[' + currentObjId + ']';\n        innerContainer.children[1].id = 'id_evaluation_learning_objectives_' + (currentIndex - 1) + '_' + currentObjId;\n        innerContainer.children[2].setAttribute('for', 'id_evaluation_learning_objectives_' + (currentIndex - 1));\n    });\n}\n\n/**\n * @param {object} evaluation\n * @param {string} currentIndex\n */\nfunction updateExistingWeight(evaluation, currentIndex) {\n    let weightContainer = evaluation.querySelector('[id^=\"fitem_id_evaluation_weight_\"]');\n    weightContainer.setAttribute('id', 'fitem_id_evaluation_weight_' + (currentIndex - 1));\n    let labelTitle = weightContainer.querySelector('[for^=\"id_evaluation_weight_\"]');\n    labelTitle.setAttribute('for', 'id_evaluation_weight_' + (currentIndex - 1));\n    let input = evaluation.querySelector('[id^=\"id_evaluation_weight_\"]');\n    input.setAttribute('id', 'id_evaluation_weight_' + (currentIndex - 1));\n    input.setAttribute('name', 'evaluation_weight_' + (currentIndex - 1));\n}\n\n/**\n * @param {object} evaluation\n * @param {string} currentIndex\n * @param {string} element\n * @param {string} toolbarOptions\n */\nfunction updateEditorAndLabel(evaluation, currentIndex, element, toolbarOptions) {\n    let titleContainer = evaluation.querySelector('[id^=\"fitem_id_evaluation_' + element + '_\"]');\n    titleContainer.setAttribute('id', 'fitem_id_evaluation_' + element + '_' + (currentIndex - 1));\n    let labelTitle = titleContainer.querySelector('[for^=\"id_evaluation_' + element + '_\"]');\n    labelTitle.setAttribute('for', 'id_evaluation_' + element + '_' + (currentIndex - 1));\n    removeTinyMce('id_evaluation_' + element + '_' + (currentIndex));\n    let editorTitle = titleContainer.querySelector('[id^=\"id_evaluation_' + element + '_\"]');\n    editorTitle.setAttribute('id', 'id_evaluation_' + element + '_' + (currentIndex - 1));\n    editorTitle.setAttribute('name', 'evaluation_' + element + '_' + (currentIndex - 1));\n    initTinyMce('id_evaluation_' + element + '_' + (currentIndex - 1), toolbarOptions);\n}\n\n/**\n * @param {object} evaluation\n * @param {int} index\n */\nfunction fillFormCommonPart(evaluation, index) {\n    let weight = document.getElementById('id_evaluation_weight_' + index);\n    weight.value = evaluation.weight;\n\n    evaluation.learningobjectiveids.forEach(element=> {\n\n        let learningObjectiveElement = document\n            .getElementById('id_evaluation_learning_objectives_' + index + '_' + element.audehlearningobjectiveid);\n        if(learningObjectiveElement) {\n            learningObjectiveElement.checked = true;\n        }\n\n     });\n\n    let module = document.getElementById('id_evaluation_module_' + index);\n    module.value = evaluation.audehsectionid;\n}\n\n/**\n * @param {int} index\n */\nfunction getTooltips(index) {\n    const titleContainer = document.getElementById('fitem_id_evaluation_title_0');\n    const descriptionContainer = document.getElementById('fitem_id_evaluation_description_0');\n    const weightContainer = document.getElementById('fitem_id_evaluation_weight_0');\n    const evaluationObjContainer = document.getElementById('fitem_id_evaluation_learning_objectives_0');\n    const evaluationModuleContainer = document.getElementById('fitem_id_evaluation_module_0');\n\n    const titleToolTip = titleContainer.firstElementChild.children[1];\n    const descriptionToolTip = descriptionContainer.firstElementChild.children[1];\n    const weightToolTip = weightContainer.firstElementChild.children[1];\n    const evaluationObjToolTip = evaluationObjContainer.firstElementChild.children[1];\n    const evaluationModuleToolTip = evaluationModuleContainer.firstElementChild.children[1];\n\n    let titleToFillContainer = document.getElementById('fitem_id_evaluation_title_' + index);\n    titleToFillContainer.firstElementChild.appendChild(titleToolTip.cloneNode(true));\n\n    let descriptionToFillContainer = document.getElementById('fitem_id_evaluation_description_' + index);\n    descriptionToFillContainer.firstElementChild.appendChild(descriptionToolTip.cloneNode(true));\n\n    let weightToFillContainer = document.getElementById('fitem_id_evaluation_weight_' + index);\n    weightToFillContainer.firstElementChild.appendChild(weightToolTip.cloneNode(true));\n\n    let evaluationObjToFillContainer = document.getElementById('fitem_id_evaluation_learning_objectives_' + index);\n    evaluationObjToFillContainer.firstElementChild.appendChild(evaluationObjToolTip.cloneNode(true));\n\n    let evaluationModuleToFillContainer = document.getElementById('fitem_id_evaluation_module_' + index);\n    evaluationModuleToFillContainer.firstElementChild.appendChild(evaluationModuleToolTip.cloneNode(true));\n}\n\n/**\n *\n */\nfunction placeLearningObjectivesTooltip() {\n    let initialContainer = document.getElementById('fitem_id_evaluation_learning_objectives_0');\n    let rows = initialContainer.querySelectorAll('.form-group');\n    let tooltipContainer = rows[rows.length - 1].children[1].firstElementChild.getElementsByTagName('div');\n    if (tooltipContainer[0]) {\n        let headerContainer = document.getElementById('evaluation_learning_objectives_title_0');\n        headerContainer.appendChild(tooltipContainer[0]);\n    }\n}\n\n/**\n * @param {int} id\n * @param {int} counter\n */\nfunction buildIdHiddenInput(id, counter) {\n    let input = document.createElement(\"input\");\n    input.setAttribute('name', 'evaluation_' + (counter) + '_id_value');\n    input.setAttribute('value', id);\n    input.hidden = true;\n\n    let element = document.getElementById('fitem_id_evaluation_title_' + (counter));\n    element.parentNode.insertBefore(input, element);\n}\n\n/**\n * @param {string} id\n * @param {int} type\n * @param {object} toAppend\n */\nfunction waitWithInterval(id, type, toAppend) {\n    let element = null;\n    let timereditable = setInterval(function() {\n        element = document.getElementById(id);\n        if (element !== null) {\n            if (type === 0) {\n                element.innerHTML = toAppend;\n            } else {\n                element.value = toAppend;\n            }\n            clearInterval(timereditable);\n        }\n    }, 100);\n}\n\n/**\n *\n */\nexport function initEvaluations() {\n    validateEvaluationForm();\n    formatInitialObjList();\n\n    const formContainer = document.getElementById('form_container');\n    formContainer.addEventListener('click', event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('evaluation') && element.hidden === false) {\n                if (element.id.includes('remove')) {\n                    let id = element.id.substring(element.id.lastIndexOf('_') + 1);\n                    removeEvaluation(id);\n                    event.stopImmediatePropagation();\n                }\n            } else {\n                return;\n            }\n        }\n    });\n    let addButton = document.querySelector('#id_add_evaluation');\n    addButton.addEventListener('click', event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            event.stopImmediatePropagation();\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('evaluation') && element.hidden === false) {\n                addEvaluation(true);\n            } else {\n                return;\n            }\n        }\n    });\n    let addingButtonsContainer = document.\n    querySelectorAll(\"[class='col-md-9 form-inline align-items-start felement']\");\n    if (addingButtonsContainer) {\n        addingButtonsContainer.forEach(function(addingButtonContainer) {\n            if (addingButtonContainer.dataset.fieldtype === 'button') {\n                addingButtonContainer.removeAttribute('class');\n                let childNodes = addingButtonContainer.childNodes;\n                childNodes.forEach(child => {\n                    if (child.type && child.type === 'button') {\n                        child.classList.remove('btn-secondary');\n                    }\n                });\n            }\n\n        });\n    }\n    let addingButtons = document.querySelectorAll(\"[class*='add_action_button']\");\n    if (addingButtons) {\n        addingButtons.forEach(function(addingButton) {\n            let childNodes = addingButton.childNodes;\n            childNodes.forEach(child => {\n                child.removeAttribute('class');\n            });\n        });\n    }\n    disableEvaluationDeleteButton();\n    prepareAccordions('row_course_evaluation_container_');\n    placeLearningObjectivesTooltip();\n    formatInitialObjList();\n}\n\n/**\n * @param {array} evaluations\n * @param {array} moduleslist\n * @param {array} objList\n */\nexport function fillFormEvaluations(evaluations, moduleslist, objList) {\n    modules = moduleslist;\n    modules.push(new Module('Aucun', 0));\n    handleObjList(objList);\n    evaluations.forEach(function(evaluation, i) {\n        if (i === 0) {\n            waitWithInterval('id_evaluation_title_0editable', 0, evaluation.title);\n            waitWithInterval('id_evaluation_title_0', 1, evaluation.title);\n\n            waitWithInterval('id_evaluation_description_0editable', 0, evaluation.description);\n            waitWithInterval('id_evaluation_description_0', 1, evaluation.description);\n\n        } else {\n            if (document.getElementById('id_evaluation_title_' + i) === null) {\n                addEvaluation(false);\n            }\n            let title = document.getElementById('id_evaluation_title_' + i);\n            title.value = evaluation.title;\n\n            let description = document.getElementById('id_evaluation_description_' + i);\n            description.value = evaluation.description;\n\n        }\n        fillFormCommonPart(evaluation, i);\n        buildIdHiddenInput(evaluation.id, i);\n    });\n    prepareActionButton([\n        {type: 0, id: 'evaluation_0'},\n        {type: 1, id: 'evaluation'}]);\n    disableEvaluationDeleteButton();\n    prepareAccordions('row_course_evaluation_container_');\n}\n\n/**\n * @param {array} objList\n */\nfunction handleObjList(objList) {\n    learningObjectives = [];\n    objList.forEach(function(teachingObj) {\n        learningObjectives.push(teachingObj.learningobjectives);\n    });\n}\n\n/**\n * @param {string} evalName\n */\nexport function initPhpEvaluationValidation(evalName) {\n    validateEvaluationDataForm();\n    handleEmbed('fitem_id_evaluation_introduction_embed', 'fitem_id_evaluation_introduction');\n    initRedactTools(2, [evalName]);\n}"],"names":["evaluations","moduleslist","objList","modules","push","Module","learningObjectives","forEach","teachingObj","learningobjectives","handleObjList","evaluation","i","waitWithInterval","title","description","document","getElementById","addEvaluation","value","index","weight","learningobjectiveids","element","learningObjectiveElement","audehlearningobjectiveid","checked","audehsectionid","fillFormCommonPart","id","counter","input","createElement","setAttribute","hidden","parentNode","insertBefore","buildIdHiddenInput","type","disableEvaluationDeleteButton","formatInitialObjList","addEventListener","event","target","nodeName","includes","substring","lastIndexOf","remove","querySelectorAll","parseInt","currentIndex","header","querySelector","firstElementChild","innerHTML","collapsible","children","weightContainer","updateExistingWeight","objContainer","checkbox","innerContainer","currentObjId","name","indexOf","updateExistingEvaluationObjectives","moduleContainer","select","updateExistingModules","updateEditorAndLabel","updateExistingEvaluations","updateAddEvaluationButton","button","buttonElm","counterEvaluations","stopImmediatePropagation","addingButtonsContainer","addingButtonContainer","dataset","fieldtype","removeAttribute","childNodes","child","classList","addingButtons","addingButton","rows","tooltipContainer","length","getElementsByTagName","appendChild","placeLearningObjectivesTooltip","evalName","fromBtnClick","titleContainer","descriptionContainer","evaluationObjContainer","evaluationModuleContainer","titleToolTip","descriptionToolTip","weightToolTip","evaluationObjToolTip","evaluationModuleToolTip","x","rowEvaluationContainer","colEvaluationContainer","colButtonContainer","headerContainer","linkForCollapseDiv","content","contentContainer","collapseDiv","buildEditorContainer","dictionnary","evaluationTitle","evaluationDescription","labelText","evaluationWeight","fieldContainer","labelContainer","label","inputContainer","learningObjectivesList","labelField","parent","Array","isArray","obj","subIndex","subContainer","checkBoxContainer","checkBoxSubContainer","hiddenCheckbox","labelCheckbox","learningobjective","buildCheckboxContainer","associatedLearningObjective","module","selectContainer","associatedModule","option","buildOption","buildSelectContainer","buildEvaluationContent","buttonContainer","buttonElement","icon","buildEvaluationButton","buildEvaluation","cloneNode","editorContainer","evaluationIndex","inputContainerDiv","editor","labels","toolbarOptions","editorTitle","toAppend","timereditable","setInterval","clearInterval"],"mappings":"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"}