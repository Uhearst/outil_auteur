{"version":3,"file":"helper.min.js","sources":["../src/helper.js"],"sourcesContent":["import {initModules} from \"./moduleHelper\";\nimport {initObjectives} from \"./objectiveHelper\";\nimport {fillFormObjectives} from \"./objectiveHelper\";\nimport {fillFormModules} from \"./moduleHelper\";\nimport {\n    appendAnchorToForm,\n    appendStyleToAnchorMenuSection,\n    formatEditorAndFileManager\n} from \"./utils\";\nimport {fillFormEvaluations, initEvaluations} from \"./evaluationHelper\";\nimport {initCourse} from \"./courseHelper\";\nimport {addNotification} from \"./notificationHelper\";\n\n/**\n *\n */\nfunction handleInit() {\n    let n = window.location.pathname.lastIndexOf('/');\n    let page = window.location.pathname.substring(n + 1);\n    let anchor = window.location.href.includes(\"#\") ?\n        window.location.href.substring(window.location.href.lastIndexOf('#') + 1) : 'displayable-form-informations-container';\n    if (page.includes('course')) {\n        appendAnchorToForm(anchor);\n        if (anchor === 'displayable-form-objectives-container') {\n            initObjectives();\n            appendStyleToAnchorMenuSection('item-teachingobjectives');\n        } else if (anchor === 'displayable-form-sections-container') {\n            initModules();\n            appendStyleToAnchorMenuSection('item-coursesections');\n        } else if (anchor === 'displayable-form-evaluations-container') {\n            initEvaluations();\n            appendStyleToAnchorMenuSection('item-learningevaluations');\n        } else {\n            initCourse();\n            appendStyleToAnchorMenuSection('item-generalinformations');\n        }\n    }\n    window.$(document).scrollTop(0);\n    formatEditorAndFileManager();\n}\n\n/**\n * @param {array} params\n */\nfunction handleFillForms(params) {\n    let n = window.location.pathname.lastIndexOf('/');\n    let page = window.location.pathname.substring(n + 1);\n    let anchor = window.location.href.includes(\"#\") ?\n        window.location.href.substring(window.location.href.lastIndexOf('#') + 1) : 'displayable-form-informations-container';\n    if (page.includes('course')) {\n        let parsedResponse = null;\n        const decodedParams = JSON.parse(params);\n        window.$.ajax(\n            {\n                type: \"POST\",\n                url: \"../handlers/ajax_course_handler.php\",\n                data: {\n                    courseId: decodedParams.courseId\n                },\n                success: function(response) {\n                    parsedResponse = JSON.parse(response);\n                    if (anchor === 'displayable-form-objectives-container') {\n                        fillFormObjectives(parsedResponse.data.teachingobjectives);\n                    } else if (anchor === 'displayable-form-sections-container') {\n                        fillFormModules(parsedResponse.data.sections);\n                    } else if (anchor === 'displayable-form-evaluations-container') {\n                        fillFormEvaluations(parsedResponse.data.evaluations,\n                            parsedResponse.data.sections,\n                            parsedResponse.data.teachingobjectives);\n                    }\n                    formatEditorAndFileManager();\n                },\n                error: function() {\n                    window.console.log('failure');\n                }\n            });\n\n    }\n}\n\n/**\n *\n */\nexport function init() {\n    handleInit();\n    window.addEventListener('hashchange', function() {\n        handleInit();\n    });\n}\n\n/**\n * @param {array} array\n */\nexport function fillForm(array) {\n    handleFillForms(array);\n    window.addEventListener('hashchange', function() {\n        handleFillForms(array);\n    });\n}\n\n/**\n * @param {int} courseId\n */\nexport function exportCourse(courseId) {\n    let publishButton = document.getElementById('publishCourse');\n    publishButton.addEventListener('click', function() {\n        window.$.ajax(\n            {\n                type: \"POST\",\n                url: \"../handlers/ajax_export_handler.php\",\n                data: {\n                    courseId: courseId,\n                },\n                success: function() {\n                    addNotification('Le cours a été publié avec succès', 1);\n                },\n                error: function() {\n                    addNotification('Une erreur s\\'est produite lors de la publication du cours', 2);\n                    window.console.log('failure');\n                }\n            });\n    });\n\n    let publishFlushButton = document.getElementById('publishFlushCourse');\n    publishFlushButton.addEventListener('click', function() {\n        window.$.ajax(\n            {\n                type: \"POST\",\n                url: \"../handlers/ajax_export_handler.php\",\n                data: {\n                    courseId: courseId,\n                    flush: \"flush\",\n                },\n                success: function() {\n                    addNotification('Le cours a été publié avec succès', 1);\n                },\n                error: function() {\n                    addNotification('Une erreur s\\'est produite lors de la remise à 0 et publication du cours', 2);\n                    window.console.log('failure');\n                }\n            });\n    });\n}\n\n/**\n * @param {array} Ids\n */\nexport function publishCoursePlan(Ids) {\n    let publishButton = document.getElementById('publishCoursePlan');\n    publishButton.addEventListener('click', function() {\n        window.open(\"../handlers/pdf_syllabus_handler.php?courseId=\" + Ids[1]);\n    });\n}"],"names":["handleInit","n","window","location","pathname","lastIndexOf","page","substring","anchor","href","includes","$","document","scrollTop","handleFillForms","params","parsedResponse","decodedParams","JSON","parse","ajax","type","url","data","courseId","success","response","teachingobjectives","sections","evaluations","error","console","log","getElementById","addEventListener","flush","array","Ids","open"],"mappings":"oRAgBSA,iBACDC,EAAIC,OAAOC,SAASC,SAASC,YAAY,KACzCC,KAAOJ,OAAOC,SAASC,SAASG,UAAUN,EAAI,GAC9CO,OAASN,OAAOC,SAASM,KAAKC,SAAS,KACvCR,OAAOC,SAASM,KAAKF,UAAUL,OAAOC,SAASM,KAAKJ,YAAY,KAAO,GAAK,0CAC5EC,KAAKI,SAAS,0CACKF,QACJ,0CAAXA,wFAE+B,4BACb,wCAAXA,kFAEwB,wBACb,2CAAXA,0FAEwB,uGAGA,8BAGvCN,OAAOS,EAAEC,UAAUC,UAAU,oDAOxBC,gBAAgBC,YACjBd,EAAIC,OAAOC,SAASC,SAASC,YAAY,KACzCC,KAAOJ,OAAOC,SAASC,SAASG,UAAUN,EAAI,GAC9CO,OAASN,OAAOC,SAASM,KAAKC,SAAS,KACvCR,OAAOC,SAASM,KAAKF,UAAUL,OAAOC,SAASM,KAAKJ,YAAY,KAAO,GAAK,6CAC5EC,KAAKI,SAAS,UAAW,KACrBM,eAAiB,KACfC,cAAgBC,KAAKC,MAAMJ,QACjCb,OAAOS,EAAES,KACL,CACIC,KAAM,OACNC,IAAK,sCACLC,KAAM,CACFC,SAAUP,cAAcO,UAE5BC,QAAS,SAASC,UACdV,eAAiBE,KAAKC,MAAMO,UACb,0CAAXlB,+CACmBQ,eAAeO,KAAKI,oBACrB,wCAAXnB,yCACSQ,eAAeO,KAAKK,UAClB,2CAAXpB,kDACaQ,eAAeO,KAAKM,YACpCb,eAAeO,KAAKK,SACpBZ,eAAeO,KAAKI,6DAIhCG,MAAO,WACH5B,OAAO6B,QAAQC,IAAI,sGA8BVR,UACLZ,SAASqB,eAAe,iBAC9BC,iBAAiB,SAAS,WACpChC,OAAOS,EAAES,KACL,CACIC,KAAM,OACNC,IAAK,sCACLC,KAAM,CACFC,SAAUA,UAEdC,QAAS,mDACW,oCAAqC,IAEzDK,MAAO,mDACa,4DAA8D,GAC9E5B,OAAO6B,QAAQC,IAAI,iBAKVpB,SAASqB,eAAe,sBAC9BC,iBAAiB,SAAS,WACzChC,OAAOS,EAAES,KACL,CACIC,KAAM,OACNC,IAAK,sCACLC,KAAM,CACFC,SAAUA,SACVW,MAAO,SAEXV,QAAS,mDACW,oCAAqC,IAEzDK,MAAO,mDACa,0EAA4E,GAC5F5B,OAAO6B,QAAQC,IAAI,6CA7CdI,OACrBtB,gBAAgBsB,OAChBlC,OAAOgC,iBAAiB,cAAc,WAClCpB,gBAAgBsB,oCAZpBpC,aACAE,OAAOgC,iBAAiB,cAAc,WAClClC,qDA6D0BqC,KACVzB,SAASqB,eAAe,qBAC9BC,iBAAiB,SAAS,WACpChC,OAAOoC,KAAK,iDAAmDD,IAAI"}