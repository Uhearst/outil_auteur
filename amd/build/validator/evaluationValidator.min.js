define("format_udehauthoring/validator/evaluationValidator",["exports","./validatorUtils","../notificationHelper","core/str"],(function(_exports,_validatorUtils,_notificationHelper,_str){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.validateEvaluationDataForm=function(){let length=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.getElementById("udeh-form").addEventListener("submit",(function(e){if(e.preventDefault(),null!==length){let isGood=!0;for(let i=0;i<length;i++)(0,_validatorUtils.validateIsEmbed)(i);if(!isGood)return}else(0,_validatorUtils.validateIsEmbed)();window.$("#udeh-form").submit()}))},_exports.validateEvaluationForm=function(){document.getElementById("udeh-form").addEventListener("submit",(async function(e){if(window.location.href.includes("displayable-form-evaluations-container")){e.preventDefault();let isValidObjectives=await async function(){let isValid=!0,evaluations=document.querySelectorAll('[id^="row_course_evaluation_container_"]'),notCheckedEvaluationsId=[];if(evaluations.forEach((function(evaluation,index){let hasChecked=!1;document.getElementById("fitem_id_evaluation_learning_objectives_"+index).querySelectorAll('[id^="id_evaluation_learning_objectives_"]').forEach((checkbox=>{checkbox.checked&&(hasChecked=!0)})),hasChecked||notCheckedEvaluationsId.push(index)})),notCheckedEvaluationsId.length>0){for(const notCheckedEvaluationId of notCheckedEvaluationsId){if(null===document.getElementById("error_msg_obj_"+notCheckedEvaluationId)){let span=document.createElement("span");span.style.color="red",span.id="error_msg_obj_"+notCheckedEvaluationId,span.style.margin="0 0 0 1rem",span.innerHTML=await(0,_str.get_string)("evaluationsaveerrorobjmsg","format_udehauthoring"),document.getElementById("course_evaluation_content_"+notCheckedEvaluationId).insertBefore(span,document.getElementById("fitem_id_evaluation_learning_objectives_"+notCheckedEvaluationId))}}isValid=!1}if(isValid){document.querySelectorAll('[id^="error_msg_obj_"]').forEach((errorMsg=>{errorMsg.remove()}))}else(0,_notificationHelper.addNotification)(await(0,_str.get_string)("notificationerroroneobjective","format_udehauthoring"),2);return isValid}(),isValidModules=await async function(){let isValid=!0,selectedValues=[];document.querySelectorAll('[id^="fitem_id_evaluation_module_"]').forEach((function(moduleContainer){let select=moduleContainer.querySelector(".form-check-input");select.checked&&selectedValues.push(parseInt(select.name.substring(select.name.indexOf("[")+1,select.name.indexOf("]"))))}));for(const selectedValue of selectedValues){const index=selectedValues.indexOf(selectedValue);if(selectedValues.filter((val=>val===selectedValue)).length>1&&0!==selectedValue){if(null===document.getElementById("error_msg_module_"+index)){let span=document.createElement("span");span.style.color="red",span.id="error_msg_module_"+index,span.style.margin="0 0 0.5rem 1rem",span.innerHTML=await(0,_str.get_string)("notificationerroruniquemodule","format_udehauthoring"),document.getElementById("course_evaluation_content_"+index).insertBefore(span,document.getElementById("fitem_id_evaluation_module_"+index))}isValid=!1}}if(isValid){document.querySelectorAll('[id^="error_msg_module_"]').forEach((errorMsg=>{errorMsg.remove()}))}else(0,_notificationHelper.addNotification)(await(0,_str.get_string)("notificationerroruniquemodule","format_udehauthoring"),2);return isValid}();isValidObjectives&&isValidModules&&window.$("#udeh-form").submit()}}))}}));

//# sourceMappingURL=evaluationValidator.min.js.map