{"version":3,"sources":["../src/evaluationValidator.js"],"names":["document","getElementById","addEventListener","e","preventDefault","validObj","validateObjectives","validModules","validateModules","window","$","submit","isValid","evaluationContainer","evaluations","querySelectorAll","notCheckedEvaluationsId","forEach","evaluation","index","hasChecked","learningObjContainer","checkboxes","checkbox","checked","push","length","notCheckedEvaluationId","errorMsg","span","createElement","style","color","id","margin","innerHTML","insertBefore","selectedValues","moduleContainers","moduleContainer","select","querySelector","value","selectedValue","results","filter","val"],"mappings":"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","sourcesContent":["/**\n *\n */\nexport function validateEvaluationForm() {\n    document.getElementById('udeh-form').addEventListener(\"submit\", function(e) {\n        e.preventDefault();\n\n        let validObj = validateObjectives();\n        let validModules = validateModules();\n        if (!validObj || !validModules) {\n            return;\n        }\n\n        window.$('#udeh-form').submit();\n    });\n}\n\n/**\n *\n */\nfunction validateObjectives() {\n    let isValid = true;\n    let evaluationContainer = document.getElementById('displayable-form-evaluations-container');\n    let evaluations = evaluationContainer.querySelectorAll('[id^=\"row_course_evaluation_container_\"]');\n\n    let notCheckedEvaluationsId = [];\n    evaluations.forEach(function(evaluation, index) {\n        let hasChecked = false;\n        let learningObjContainer = document.getElementById('fitem_id_evaluation_learning_objectives_' + index);\n        let checkboxes = learningObjContainer.querySelectorAll('[id^=\"id_evaluation_learning_objectives_\"]');\n        checkboxes.forEach(checkbox => {\n            if (checkbox.checked) {\n                hasChecked = true;\n            }\n        });\n        if (!hasChecked) {\n            notCheckedEvaluationsId.push(index);\n        }\n    });\n\n    if (notCheckedEvaluationsId.length > 0) {\n        notCheckedEvaluationsId.forEach(notCheckedEvaluationId => {\n            let errorMsg = document.getElementById('error_msg_obj_' + notCheckedEvaluationId);\n            if (errorMsg === null) {\n                let span = document.createElement('span');\n                span.style.color = 'red';\n                span.id = 'error_msg_obj_' + notCheckedEvaluationId;\n                span.style.margin = '0 0 0 1rem';\n                span.innerHTML = '* Un objectif d\\'apprentissage est requis';\n                document.getElementById('course_evaluation_content_' + notCheckedEvaluationId).insertBefore(\n                    span, document.getElementById('fitem_id_evaluation_learning_objectives_' + notCheckedEvaluationId));\n            }\n        });\n        isValid = false;\n    }\n    return isValid;\n}\n\n/**\n *\n */\nfunction validateModules() {\n    let isValid = true;\n    let selectedValues = [];\n    let moduleContainers = document.querySelectorAll('[id^=\"fitem_id_evaluation_module_\"]');\n\n    moduleContainers.forEach(function(moduleContainer) {\n        let select = moduleContainer.querySelector('.custom-select');\n        selectedValues.push((select.value));\n    });\n\n    selectedValues.forEach(function(selectedValue, index) {\n        let results = selectedValues.filter(val => val === selectedValue);\n        if (results.length > 1 && selectedValue !== \"0\") {\n            let errorMsg = document.getElementById('error_msg_module_' + index);\n            if (errorMsg === null) {\n                let span = document.createElement('span');\n                span.style.color = 'red';\n                span.id = 'error_msg_module_' + index;\n                span.style.margin = '0 0 0.5rem 1rem';\n                span.innerHTML = '* Le module doit être unique à chaque évaluation';\n                document.getElementById('course_evaluation_content_' + index).insertBefore(\n                    span, document.getElementById('fitem_id_evaluation_module_' + index));\n            }\n            isValid = false;\n        }\n    });\n    return isValid;\n}"],"file":"evaluationValidator.min.js"}