define("format_udehauthoring/mainNavBar",["exports","./notificationHelper","core/str","./helper"],(function(_exports,_notificationHelper,_str,_helper){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initNavBar=function(){window.addEventListener("load",(function(){window.$("body").css("zoom",localStorage.getItem("zoomLevel"))})),document.querySelectorAll(".zoom-level").forEach((zoomButton=>{zoomButton.addEventListener("click",(function(event){localStorage.setItem("zoomLevel",event.target.value/100),window.$("body").css("zoom",event.target.value/100)}))})),function(){let previewButton=document.querySelector("#preview-button");previewButton&&previewButton.addEventListener("click",(async function(){if(window.location.href.includes("section.php")){let sectionTitle=document.querySelector("#udeh-form").querySelector('input[name="section_title"]');if(""===sectionTitle.value||void 0===sectionTitle.value||null===sectionTitle.value)return void(0,_notificationHelper.addNotification)(await(0,_str.get_string)("notificationerrormissingsectionsnamepreview","format_udehauthoring"),2)}if("url"in previewButton.dataset&&(0,_helper.saveWarningModal)(previewButton.dataset.url),"urls"in previewButton.dataset){let anchor=location.hash.substr(1),urls=JSON.parse(previewButton.dataset.urls);anchor in urls&&(0,_helper.saveWarningModal)(urls[anchor])}}))}(),function(){let button=document.querySelector("#config-button");button&&button.addEventListener("click",(function(e){e.preventDefault(),window.$("#config-dialog").show(),window.$("#save-warning-container").show(),window.$("#config-dialog").find(".btn-secondary").on("click",(function(){window.$("#config-dialog").hide(),window.$("#save-warning-container").hide()})),window.$("#config-dialog").find(".btn-primary").on("click",(function(){window.$("#progress-circle").show(),window.$.ajax({method:"POST",url:"../handlers/ajax_config_handler.php",data:{courseId:window.$("#courseId").val(),module:window.$("#etiModule").val(),question:window.$("#etiQuestion").val(),questionExplore:window.$("#etiExplore").val(),questionHide:window.$("#etiHide").val(),questionSub:window.$("#etiSub").val()}}).done((async function(){window.$("#config-dialog").hide(),window.$("#save-warning-container").hide(),window.$("#progress-circle").hide(),(0,_notificationHelper.addNotification)(await(0,_str.get_string)("notificationsavelabel","format_udehauthoring"),1)})).fail((async function(){window.$("#config-dialog").hide(),window.$("#save-warning-container").hide(),window.$("#progress-circle").hide(),(0,_notificationHelper.addNotification)(await(0,_str.get_string)("notificationerrorsave","format_udehauthoring"),2)}))}))}))}()}}));

//# sourceMappingURL=mainNavBar.min.js.map