{"version":3,"file":"objectiveHelper.min.js","sources":["../src/objectiveHelper.js"],"sourcesContent":["import {\n    buildHiddenInput,\n    prepareActionButton,\n    setEditorAfterCloning,\n    initEditor,\n    removeTinyEditor,\n    updateEditorAndLabel,\n    setDeleteButton,\n} from \"./utils\";\nimport {get_string as getString} from 'core/str';\nimport {handleAccordions, handleNewAccordion, initAccordionsAfterFillingForm} from \"./accordionHandler\";\n\nlet counterTeachingObjectives = 0;\nlet cloneTooltipTeachingObjectives = null;\nlet cloneTooltipLearningObjectives = null;\nlet cloneTooltipLearningObjectivesCompetency = null;\n\n/**\n * @param {int} containerIndex\n * @param {boolean} fromBtnClick\n */\nasync function addLearningObjectives(containerIndex, fromBtnClick) {\n    let learningObjectivesContainer = document.querySelector('#course_learning_objectives_container_' + containerIndex);\n    let learningIndex = learningObjectivesContainer ? learningObjectivesContainer.children.length : 0;\n    let learningObjective = document.querySelector('#course_learning_objectives_container_0').firstElementChild.cloneNode(true);\n\n    learningObjective.querySelector('#course_learning_objectives_subcontainer_0_0')\n        .setAttribute('id', 'course_learning_objectives_subcontainer_' + containerIndex + '_' + learningIndex);\n\n    // Header\n    learningObjective.querySelector('#course_learning_objectives_header_0_0')\n        .setAttribute('id', 'course_learning_objectives_header_' + containerIndex + '_' + learningIndex);\n    learningObjective.querySelector('[href=\"#collapse_learning_0_0\"]').innerText =\n        await getString('learningobjective', 'format_udehauthoring') + ' '\n        + (parseInt(containerIndex) + 1) + '.' + (learningIndex + 1);\n    learningObjective.querySelector('[href=\"#collapse_learning_0_0\"]')\n        .setAttribute('aria-controls', 'collapse_learning_' + containerIndex + '_' + learningIndex);\n    learningObjective.querySelector('[href=\"#collapse_learning_0_0\"]')\n        .setAttribute('href', '#collapse_learning_' + containerIndex + '_' + learningIndex);\n\n    learningObjective.querySelector('#collapse_learning_0_0')\n        .setAttribute('data-parent', '#course_learning_objectives_container_' + containerIndex);\n    learningObjective.querySelector('#collapse_learning_0_0')\n        .setAttribute('id', 'collapse_learning_' + containerIndex + '_' + learningIndex);\n\n    learningObjective.querySelector('#course_learning_objectives_0_0')\n        .setAttribute('id', 'course_learning_objectives_' + containerIndex + '_' + learningIndex);\n\n    if (learningObjective.querySelector('[name=\"course_learning_objectives_0_0_id_value\"]')) {\n        learningObjective.querySelector('[name=\"course_learning_objectives_0_0_id_value\"]').setAttribute('value', '');\n        learningObjective.querySelector('[name=\"course_learning_objectives_0_0_id_value\"]')\n            .setAttribute('name', 'course_learning_objectives_' + containerIndex + '_' + learningIndex + '_id_value');\n    }\n\n    // Content\n    setEditorAfterCloning(\n        learningObjective,\n        'learning_objectives_def_0',\n        'course',\n        learningIndex,\n        'learning_objectives_def_' + containerIndex,\n        fromBtnClick\n    );\n\n    // Delete button\n    setDeleteButton(learningObjective, 'remove_learning_objectives', counterTeachingObjectives, '_' + learningIndex);\n\n\n    // Competency\n    let competencyContainer = learningObjective.querySelector('#fitem_id_course_learning_objectives_competency_type_0_0');\n    competencyContainer.setAttribute(\n        'id',\n        'fitem_id_course_learning_objectives_competency_type_' + containerIndex + '_' + learningIndex\n    );\n    competencyContainer.querySelector('#id_course_learning_objectives_competency_type_0_0')\n        .setAttribute('name', 'course_learning_objectives_competency_type_' + containerIndex + '_' + learningIndex);\n    competencyContainer.querySelector('#id_course_learning_objectives_competency_type_0_0')\n        .setAttribute('id', 'id_course_learning_objectives_competency_type_' + containerIndex + '_' + learningIndex);\n    competencyContainer.querySelector('#id_error_course_learning_objectives_competency_type_0_0')\n        .setAttribute('id', 'id_error_course_learning_objectives_competency_type_' + containerIndex + '_' + learningIndex);\n\n    learningObjectivesContainer\n        .insertBefore(learningObjective, learningObjectivesContainer.querySelector('.add_learning_container'));\n\n    await updateAddLearningButton(containerIndex);\n    disableLearningDeleteButton();\n\n    if (fromBtnClick) {\n        handleNewAccordion('#course_learning_objectives_header_' + containerIndex + '_', learningIndex);\n        await handleEditor(containerIndex, learningIndex);\n    }\n}\n\n/**\n * @param {boolean} fromBtnClick\n */\nasync function addTeachingObjectives(fromBtnClick) {\n    counterTeachingObjectives = counterTeachingObjectives + 1;\n\n    let teachingObjectiveParent = document.querySelector('#course_teaching_objectives_container_0').parentElement;\n    let teachingObjective = teachingObjectiveParent.cloneNode(true);\n\n    teachingObjective.querySelector('#course_teaching_objectives_container_0')\n        .setAttribute('id', 'course_teaching_objectives_container_' + counterTeachingObjectives);\n\n    // Header\n    teachingObjective.querySelector('#course_teaching_objectives_header_0')\n        .setAttribute('id', 'course_teaching_objectives_header_' + counterTeachingObjectives);\n    teachingObjective.querySelector('[href=\"#collapse_teaching_0\"]').innerText =\n        await getString('teachingobjective', 'format_udehauthoring') + ' ' + (counterTeachingObjectives + 1);\n    teachingObjective.querySelector('[href=\"#collapse_teaching_0\"]')\n        .setAttribute('aria-controls', 'collapse_teaching_' + counterTeachingObjectives);\n    teachingObjective.querySelector('[href=\"#collapse_teaching_0\"]')\n        .setAttribute('href', '#collapse_teaching_' + counterTeachingObjectives);\n\n    teachingObjective.querySelector('#collapse_teaching_0')\n        .setAttribute('id', 'collapse_teaching_' + counterTeachingObjectives);\n\n    teachingObjective.querySelector('#course_teaching_objectives_0')\n        .setAttribute('id', 'course_teaching_objectives_' + counterTeachingObjectives);\n\n    if (teachingObjective.querySelector('[name=\"course_teaching_objectives_0_id_value\"]')) {\n        teachingObjective.querySelector('[name=\"course_teaching_objectives_0_id_value\"]').setAttribute('value', '');\n        teachingObjective.querySelector('[name=\"course_teaching_objectives_0_id_value\"]')\n            .setAttribute('name', 'course_teaching_objectives_' + counterTeachingObjectives + '_id_value');\n    }\n\n\n    // Content\n    setEditorAfterCloning(teachingObjective,\n        'teaching_objectives',\n        'course',\n        counterTeachingObjectives,\n        null,\n        fromBtnClick\n    );\n\n    // Learning obj\n    let learningContainer = teachingObjective.querySelector('#course_learning_objectives_container_0');\n    if (learningContainer) {\n        while (learningContainer.firstChild) {\n            learningContainer.removeChild(learningContainer.firstChild);\n        }\n        learningContainer.setAttribute('id', 'course_learning_objectives_container_' + counterTeachingObjectives);\n    }\n\n    // Delete button\n    setDeleteButton(teachingObjective, 'remove_teaching_objectives', counterTeachingObjectives);\n\n    let container = document.getElementById('displayable-form-objectives-container');\n    container.insertBefore(teachingObjective, document.getElementById('teaching-add-container'));\n\n    await addLearningObjectives(counterTeachingObjectives, fromBtnClick);\n\n    await updateAddTeachingButton();\n    disableTeachingDeleteButton();\n\n    if (fromBtnClick) {\n        handleNewAccordion('#course_teaching_objectives_header_', counterTeachingObjectives);\n        await handleEditor(counterTeachingObjectives);\n    }\n}\n\nconst handleEditor = async(counter, secondCounter = null) => {\n    window.$.ajax(\n        {\n            type: \"POST\",\n            url: \"../handlers/ajax_editor_handler.php\",\n            data: {\n                id: document.querySelector(\"#udeh-form\").querySelector('[name = \"course_id\"]').value,\n                elementId: secondCounter !== null\n                    ? 'id_course_learning_objectives_def_' + counter + '_' + secondCounter\n                    : 'id_course_teaching_objectives_' + counter,\n                text: ''\n            },\n            success: function(response) {\n                let draftIdElm = '';\n                if (secondCounter !== null) {\n                    draftIdElm = document.querySelector('#course_learning_objectives_subcontainer_' + counter + '_' + secondCounter)\n                        .querySelector('[name = \"course_learning_objectives_def_' + counter + '_' + secondCounter + '[itemid]\"]');\n                } else {\n                    draftIdElm = document.querySelector('#course_teaching_objectives_container_' + counter)\n                        .querySelector('[name = \"course_teaching_objectives_' + counter + '[itemid]\"]');\n                }\n                initEditor(\n                    response,\n                    draftIdElm\n                );\n            },\n            error: async function(e) {\n                window.console.log(e);\n            }\n        });\n};\n\n/**\n * @param {string} index\n */\nasync function removeTeachingObjective(index) {\n    let teachingObjective = document.getElementById('course_teaching_objectives_container_' + index);\n    await removeTinyEditor('id_course_teaching_objectives_' + index);\n    let learningObjectives = teachingObjective.querySelectorAll('div.row-container-child');\n\n    for (let i = 0; i < learningObjectives.length; i++) {\n        await removeTinyEditor(\"id_course_learning_objectives_def_\" + index + '_' + i);\n    }\n\n    teachingObjective.parentElement.remove();\n    await updateExistingTeachingObjectives(index);\n    await updateAddTeachingButton();\n    updateRemoveTeachingButton();\n    disableTeachingDeleteButton();\n    counterTeachingObjectives = counterTeachingObjectives - 1;\n}\n\n/**\n * @param {string} teachingIndex\n * @param {string} learningIndex\n */\nasync function removeLearningObjective(teachingIndex, learningIndex) {\n    let learningObjective =\n        document.getElementById('course_learning_objectives_subcontainer_' + teachingIndex + '_' + learningIndex);\n    await removeTinyEditor(\"id_course_learning_objectives_def_\" + teachingIndex + '_' + learningIndex);\n    learningObjective.parentElement.remove();\n    await updateExistingLearningObjectiveForIndex(teachingIndex, learningIndex);\n    await updateAddLearningButton(parseInt(teachingIndex));\n    disableLearningDeleteButton();\n}\n\n/**\n * @param {string} index\n */\nasync function updateExistingTeachingObjectives(index) {\n    let teachingObjectives = document.querySelectorAll('[id^=\"course_teaching_objectives_container_\"]');\n    for (const teachingObjective of teachingObjectives) {\n        if (parseInt(teachingObjective.id.substring(teachingObjective.id.lastIndexOf('_') + 1)) > parseInt(index)) {\n            let currentIndex = parseInt(teachingObjective.id.substring(teachingObjective.id.lastIndexOf('_') + 1));\n            await removeTinyEditor('id_course_teaching_objectives_' + currentIndex);\n            teachingObjective.setAttribute('id', 'course_teaching_objectives_container_' + (currentIndex - 1));\n            let headerContainer = teachingObjective.querySelector('[id^=\"course_teaching_objectives_header_\"]');\n            headerContainer.setAttribute('id', \"course_teaching_objectives_header_\" + (currentIndex - 1));\n            headerContainer.firstElementChild.setAttribute('href', '#collapse_teaching_' + (currentIndex - 1));\n            headerContainer.firstElementChild.setAttribute('aria-controls', 'collapse_teaching_' + (currentIndex - 1));\n            headerContainer.firstElementChild.innerHTML =\n                await getString('teachingobjective', 'format_udehauthoring') + ' ' + (currentIndex);\n\n            let contentContainer = teachingObjective.querySelector('[id^=\"collapse_teaching_\"]');\n            contentContainer.setAttribute('id', 'collapse_teaching_' + (currentIndex - 1));\n            contentContainer.firstElementChild.setAttribute('id', 'course_teaching_objectives_' + (currentIndex - 1));\n\n            if (contentContainer.querySelector('[name$=\"_id_value\"]')) {\n                contentContainer.querySelector('[name$=\"_id_value\"]')\n                    .setAttribute('name', 'course_teaching_objectives_' + (currentIndex - 1) + '_id_value');\n            }\n\n            await updateEditorAndLabel(contentContainer, currentIndex, 'teaching_objectives', 'course');\n            await handleEditor((currentIndex - 1));\n            await updateExistingLearningObjectiveFromTeachingUpdate(currentIndex);\n        }\n    }\n}\n\n/**\n * @param {int} teachingIndex\n */\nasync function updateExistingLearningObjectiveFromTeachingUpdate(teachingIndex) {\n    let learningObjectiveListContainer = document.getElementById('course_learning_objectives_container_' + teachingIndex);\n    learningObjectiveListContainer.setAttribute('id', 'course_learning_objectives_container_' + (teachingIndex - 1));\n    let list = learningObjectiveListContainer.querySelectorAll('[id^=\"course_learning_objectives_subcontainer_\"]');\n    for (const learningObjectiveContainer of list) {\n        let currentLearningIndex = parseInt(learningObjectiveContainer.id\n            .substring(learningObjectiveContainer.id.lastIndexOf('_') + 1));\n        await updateLearningObjective(learningObjectiveContainer, teachingIndex - 1, currentLearningIndex);\n        let buttonContainer =\n            document.getElementById('fitem_id_remove_learning_objectives_' + teachingIndex + '_' + currentLearningIndex);\n        updateRemoveLearningButton(buttonContainer, teachingIndex - 1, currentLearningIndex);\n    }\n    await updateAddLearningButton(teachingIndex - 1);\n}\n\n\n/**\n * @param {string} teachingIndex\n * @param {string} learningIndex\n */\nasync function updateExistingLearningObjectiveForIndex(teachingIndex, learningIndex) {\n    let learningObjectiveListContainer = document.getElementById('course_learning_objectives_container_' + teachingIndex);\n    let list = learningObjectiveListContainer.querySelectorAll('[id^=\"course_learning_objectives_subcontainer_\"]');\n    for (const learningObjectiveContainer of list) {\n        if (parseInt(learningObjectiveContainer.id\n            .substring(learningObjectiveContainer.id.lastIndexOf('_') + 1)) > parseInt(learningIndex)) {\n            let currentIndex = parseInt(\n                learningObjectiveContainer.id.substring(learningObjectiveContainer.id.lastIndexOf('_') + 1));\n            await updateLearningObjective(learningObjectiveContainer, teachingIndex, currentIndex - 1);\n            let buttonContainer =\n                document.getElementById('fitem_id_remove_learning_objectives_' + teachingIndex + '_' + currentIndex);\n            updateRemoveLearningButton(buttonContainer, teachingIndex, currentIndex - 1);\n        }\n\n    }\n}\n\n/**\n * @param {object} element\n * @param {string} teachingIndex\n * @param {string} learningIndex\n */\nasync function updateLearningObjective(element, teachingIndex, learningIndex) {\n    await removeTinyEditor(\"id_course_learning_objectives_def_\" + teachingIndex + '_' + learningIndex);\n    element.setAttribute('id', 'course_learning_objectives_subcontainer_' + teachingIndex + '_' + learningIndex);\n    let headerContainer = element.querySelector('[id^=\"course_learning_objectives_header_\"]');\n    headerContainer.setAttribute('id', \"course_learning_objectives_header_\" + teachingIndex + '_' + learningIndex);\n    headerContainer.firstElementChild.setAttribute('href', '#collapse_learning_' + teachingIndex + '_' + learningIndex);\n    headerContainer.firstElementChild.setAttribute('aria-controls', 'collapse_learning_' + teachingIndex + '_' + learningIndex);\n    headerContainer.firstElementChild.innerHTML =\n        await getString('learningobjective', 'format_udehauthoring')\n        + ' '\n        + (parseInt(teachingIndex) + 1)\n        + '.' + (parseInt(learningIndex) + 1);\n\n    let contentContainer = element.querySelector('[id^=\"collapse_learning_\"]');\n    contentContainer.setAttribute('id', 'collapse_learning_' + teachingIndex + '_' + learningIndex);\n    contentContainer.setAttribute('data-parent', '#course_learning_objectives_container_' + teachingIndex);\n\n    contentContainer.querySelector('[id^=\"fitem_id_course_learning_objectives_\"]')\n        .setAttribute('id', 'fitem_id_course_learning_objectives_' + teachingIndex + '_' + learningIndex);\n\n    contentContainer.querySelector('[id^=\"course_learning_objectives_\"]')\n        .setAttribute('id', 'course_learning_objectives_' + teachingIndex + '_' + learningIndex);\n\n    if (contentContainer.querySelector('[name$=\"_id_value\"]')) {\n        contentContainer.querySelector('[name$=\"_id_value\"]')\n            .setAttribute('name', 'course_learning_objectives_' + teachingIndex + '_' + learningIndex + '_id_value');\n    }\n\n    contentContainer.querySelector('[name^=\"course_learning_objectives_def_\"]')\n        .setAttribute('name', 'course_learning_objectives_def_' + teachingIndex + '_' + learningIndex + '[text]');\n    contentContainer.querySelector('[id^=\"id_course_learning_objectives_def_\"]')\n        .setAttribute('id', 'id_course_learning_objectives_def_' + teachingIndex + '_' + learningIndex);\n\n    contentContainer.querySelector('[name$=\"[format]\"]')\n        .setAttribute('name', 'course_learning_objectives_def_' + teachingIndex + '_' + learningIndex + '[format]');\n    contentContainer.querySelector('[id$=\"format\"]')\n        .setAttribute('id', 'id_course_learning_objectives_def_' + teachingIndex + '_' + learningIndex + 'format');\n\n    contentContainer.querySelector('[name$=\"[itemid]\"]')\n        .setAttribute('name', 'course_learning_objectives_def_' + teachingIndex + '_' + learningIndex + '[itemid]');\n\n    contentContainer.querySelector('[id^=\"id_error_course_learning_objectives_def_\"]')\n        .setAttribute('id', 'id_error_course_learning_objectives_def_' + teachingIndex + '_' + learningIndex);\n\n    await handleEditor(teachingIndex, learningIndex);\n\n    contentContainer\n        .querySelector('[id^=\"fitem_id_course_learning_objectives_competency_type_\"]')\n        .setAttribute('id', 'fitem_id_course_learning_objectives_competency_type_' + teachingIndex + '_' + learningIndex);\n\n    contentContainer.querySelector('[id^=\"id_course_learning_objectives_competency_type_\"]')\n        .setAttribute('id', 'id_course_learning_objectives_competency_type_' + teachingIndex + '_' + learningIndex);\n    contentContainer.querySelector('[for^=\"id_course_learning_objectives_competency_type_\"]')\n        .setAttribute('for', 'id_course_learning_objectives_competency_type_' + teachingIndex + '_' + learningIndex);\n\n    contentContainer.querySelector('[name^=\"course_learning_objectives_competency_type_\"]')\n        .setAttribute('name', 'course_learning_objectives_competency_type_' + teachingIndex + '_' + learningIndex);\n    contentContainer.querySelector('[id^=\"id_error_course_learning_objectives_competency_type_\"]')\n        .setAttribute('id', 'id_error_course_learning_objectives_competency_type_' + teachingIndex + '_' + learningIndex);\n}\n\n/**\n * @param {object} element\n * @param {string} teachingIndex\n * @param {string} learningIndex\n */\nfunction updateRemoveLearningButton(element, teachingIndex, learningIndex) {\n    element.setAttribute('id', 'fitem_id_remove_learning_objectives_' + teachingIndex + '_' + learningIndex);\n    let buttonElm = element.querySelector('[type=\"button\"]');\n    buttonElm.setAttribute('name', 'remove_learning_objectives_' + teachingIndex + '_' + learningIndex);\n    buttonElm.setAttribute('id', 'id_remove_learning_objectives_' + teachingIndex + '_' + learningIndex);\n}\n\n/**\n *\n */\nfunction updateRemoveTeachingButton() {\n    let buttons = document.querySelectorAll('[id^=\"fitem_id_remove_teaching_objectives\"]');\n    buttons.forEach(function (button, index) {\n        button.setAttribute('id', 'fitem_id_remove_teaching_objectives_' + index);\n        let buttonElm = button.querySelector('[type=\"button\"]');\n        buttonElm.setAttribute('name', 'remove_teaching_objectives_' + index);\n        buttonElm.setAttribute('id', 'id_remove_teaching_objectives_' + index);\n    });\n}\n\n/**\n */\nasync function updateAddTeachingButton() {\n    let formContainer = document.getElementById('displayable-form-objectives-container');\n    let x = formContainer.querySelectorAll('.row-container');\n    let addTeachingButtonContainer = document.getElementById('teaching-add-container');\n    let addTeachingButtonText = addTeachingButtonContainer.querySelector('.add-text');\n    addTeachingButtonText.innerHTML = await getString('teachingobjective', 'format_udehauthoring') + ' ' + (x.length + 1);\n}\n\n/**\n * @param {int} index\n */\nasync function updateAddLearningButton(index) {\n    let teachingContainer = document.getElementById('course_teaching_objectives_container_' + index);\n    let learningContainer = document.getElementById('course_learning_objectives_container_' + index);\n    let x = learningContainer.querySelectorAll('.row-container-child');\n    let addLearningButtonText = teachingContainer.querySelector('.add-text');\n    addLearningButtonText.innerHTML =\n        await getString('learningobjective', 'format_udehauthoring') + ' ' + (parseInt(index) + 1) + '.' + (x.length + 1);\n    let buttonContainer = teachingContainer.querySelector('[id^=\"fitem_id_add_learning_objectives_\"]');\n    buttonContainer.setAttribute('id', 'fitem_id_add_learning_objectives_' + index);\n    let buttonElement = buttonContainer.querySelector('[id^=\"id_add_learning_objectives\"]');\n    buttonElement.setAttribute('id', 'id_add_learning_objectives_' + index);\n    buttonElement.setAttribute('name', 'add_learning_objectives_' + index);\n}\n\n/**\n */\nfunction disableTeachingDeleteButton() {\n    let container = document.getElementById('displayable-form-objectives-container');\n    let x = container.querySelectorAll('.row-container');\n    if (x.length === 1) {\n        let buttonContainer = document.querySelector('.remove_teaching_action_button');\n        let button = buttonContainer.querySelector('button');\n        button.hidden = true;\n    } else {\n        let buttonContainers = document.querySelectorAll('.remove_teaching_action_button');\n        buttonContainers.forEach(buttonContainer => {\n            let button = buttonContainer.querySelector('button');\n            button.hidden = false;\n        });\n    }\n}\n\n/**\n */\nfunction disableLearningDeleteButton() {\n\n    let teachingContainers = document.querySelectorAll('.row-container');\n    teachingContainers.forEach(teachingContainer => {\n        let learningContainers = teachingContainer.querySelectorAll('.row-container-child');\n        if (learningContainers.length === 1) {\n            let buttonContainer = learningContainers[0].querySelector('.remove_learning_action_button');\n            let button = buttonContainer.querySelector('button');\n            button.hidden = true;\n        } else {\n            learningContainers.forEach(learningContainer => {\n                let buttonContainer = learningContainer.querySelector('.remove_learning_action_button');\n                let button = buttonContainer.querySelector('button');\n                button.hidden = false;\n            });\n        }\n    });\n}\n\n/**\n * @param {int} index\n */\nfunction getTeachingTooltip(index) {\n    if (index === 0) {\n        let teachingObjective = document.getElementById('fitem_id_course_teaching_objectives_0');\n        let tooltip = teachingObjective.firstElementChild.firstElementChild.firstElementChild;\n        if (tooltip) {\n            cloneTooltipTeachingObjectives = tooltip.cloneNode(true);\n            let teachingObjectiveHeader = document.getElementById('course_teaching_objectives_header_0');\n            teachingObjectiveHeader.appendChild(tooltip);\n        }\n    } else {\n        let teachingObjectiveHeader = document.getElementById('course_teaching_objectives_header_' + index);\n        if (cloneTooltipTeachingObjectives) {\n            let currentClone = cloneTooltipTeachingObjectives.cloneNode(true);\n            teachingObjectiveHeader.appendChild(currentClone);\n        }\n    }\n    getLearningTooltip(index, 0);\n}\n\n/**\n * @param {int} parentIndex\n * @param {int} index\n */\nfunction getLearningTooltip(parentIndex, index) {\n    if (parentIndex === 0 && index === 0) {\n        let learningObjective = document.getElementById('fitem_id_course_learning_objectives_def_0_0');\n        let teachingObjectiveCompetency = document.getElementById('fitem_id_course_learning_objectives_competency_type_0_0');\n        let learningTooltip = learningObjective.firstElementChild.firstElementChild.firstElementChild;\n        let tocHandle = teachingObjectiveCompetency.firstElementChild;\n        let learningTooltipCompetency = null;\n        if (typeof tocHandle.children[1] === 'undefined') {\n            learningTooltipCompetency = tocHandle.firstElementChild.children[1].firstElementChild;\n        } else {\n            learningTooltipCompetency = tocHandle.children[1].firstElementChild;\n        }\n        if (learningTooltip) {\n            cloneTooltipLearningObjectives = learningTooltip.cloneNode(true);\n            let learningObjectiveHeader = document.getElementById('course_learning_objectives_header_0_0');\n            learningObjectiveHeader.appendChild(learningTooltip);\n        }\n        if (learningTooltipCompetency) {\n            cloneTooltipLearningObjectivesCompetency = learningTooltipCompetency.cloneNode(true);\n        }\n\n    } else {\n        if (cloneTooltipLearningObjectives) {\n            let learningObjectiveHeader = document.getElementById('course_learning_objectives_header_' + parentIndex + '_' + index);\n            let currentClone = cloneTooltipLearningObjectives.cloneNode(true);\n            learningObjectiveHeader.appendChild(currentClone);\n        }\n\n        if (cloneTooltipLearningObjectivesCompetency) {\n            let learningObjectiveCompetencyContainer = document\n                .getElementById('fitem_id_course_learning_objectives_competency_type_' + parentIndex + '_' + index);\n            let competencyTooltipContainer = learningObjectiveCompetencyContainer.firstElementChild.children[1];\n            let currentComptencyClone = cloneTooltipLearningObjectivesCompetency.cloneNode(true);\n            competencyTooltipContainer.appendChild(currentComptencyClone);\n        }\n    }\n}\n\nexport const initObjectives = () => {\n    const formContainer = document.getElementById('form_container');\n    formContainer.addEventListener('click', async event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('learning') && element.hidden === false) {\n                let n = element.id.lastIndexOf('_');\n                let index = element.id.substring(n + 1);\n                if (element.id.includes('remove')) {\n                    let teachingId = element.id.charAt(element.id.length - 3);\n                    await removeLearningObjective(teachingId, index);\n                    document.getElementById('udeh-form').dataset.changed = 'true';\n                    event.stopImmediatePropagation();\n                } else {\n                    event.stopImmediatePropagation();\n                    await addLearningObjectives(index, true);\n                    document.getElementById('udeh-form').dataset.changed = 'true';\n                }\n            } else if (element && element.id.includes('teaching') && element.hidden === false) {\n                if (element.id.includes('remove')) {\n                    let id = element.id.charAt(element.id.length - 1);\n                    await removeTeachingObjective(id);\n                    document.getElementById('udeh-form').dataset.changed = 'true';\n                    event.stopImmediatePropagation();\n                }\n            } else {\n                return;\n            }\n        }\n    });\n    let addButton = document.querySelector('#id_add_teaching_objective');\n    addButton.addEventListener('click', async event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            event.stopImmediatePropagation();\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('teaching') && element.hidden === false) {\n                await addTeachingObjectives(true);\n                document.getElementById('udeh-form').dataset.changed = 'true';\n            } else {\n                return;\n            }\n        }\n    });\n    prepareActionButton([\n        { type: 0, id: 'teaching_objectives_0' },\n        { type: 0, id: 'learning_objectives_0_0' },\n        { type: 1, id: 'teaching_objective' },\n        { type: 1, id: 'learning_objectives_0' }]);\n    disableTeachingDeleteButton();\n    disableLearningDeleteButton();\n/*    prepareAccordions('course_teaching_objectives_container_', 1);\n    prepareAccordions('course_learning_objectives_subcontainer_', 2);*/\n};\n\nexport const fillFormObjectives = async(teachingObjectives) => {\n    getTeachingTooltip(0);\n\n    for (const teachingObjective of teachingObjectives) {\n        const i = teachingObjectives.indexOf(teachingObjective);\n        if (i === 0) {\n            buildHiddenInput(teachingObjective.id, i, 'fitem_id_course_teaching_objectives_0', 'course_teaching_objectives_');\n            document.querySelector('[name = \"course_teaching_objectives_0_id_value\"]')\n                .setAttribute('value', teachingObjective.id);\n            await fillTeachingLearningObjective(i, teachingObjective);\n        } else {\n            if (document.getElementById('id_course_teaching_objectives_' + i) === null) {\n                await addTeachingObjectives(false);\n            }\n            document.querySelector('#id_course_teaching_objectives_' + i).value = teachingObjective.teachingobjective;\n            document.querySelector('[name = \"course_teaching_objectives_' + i + '_id_value\"]')\n                .setAttribute('value', teachingObjective.id);\n            await handleEditor(i);\n            await fillTeachingLearningObjective(i, teachingObjective);\n        }\n    }\n    disableTeachingDeleteButton();\n    disableLearningDeleteButton();\n/*    prepareAccordions('course_teaching_objectives_container_', 1);\n    prepareAccordions('course_learning_objectives_subcontainer_', 2);*/\n    initAccordionsAfterFillingForm();\n    handleAccordions();\n};\n\nconst fillTeachingLearningObjective = async(teachingIndex, teachingObjective) => {\n    if (teachingObjective.learningobjectives.length === 0) {\n        await handleEditor(teachingIndex, 0);\n    } else {\n        for (const [j, learningobjective] of teachingObjective.learningobjectives.entries()) {\n            if (j === 0 && teachingIndex === 0) {\n                buildHiddenInput(\n                    learningobjective.id,\n                    teachingIndex + '_' + j,\n                    'fitem_id_course_learning_objectives_def_0_0', 'course_learning_objectives_'\n                );\n                document.querySelector('#id_course_learning_objectives_competency_type_0_0').value =\n                    learningobjective.learningobjectivecompetency;\n                document.querySelector('[name = \"course_learning_objectives_0_0_id_value\"]')\n                    .setAttribute('value', learningobjective.id);\n            } else if (teachingIndex > 0 && j === 0) {\n                setEditorsAndIdValue(teachingIndex, j, learningobjective);\n                await handleEditor(teachingIndex, 0);\n            } else {\n                if (document.getElementById('id_course_learning_objectives_def_' + teachingIndex + '_' + j) === null) {\n                    await addLearningObjectives(teachingIndex, false);\n                }\n                setEditorsAndIdValue(teachingIndex, j, learningobjective);\n                await handleEditor(teachingIndex, j);\n            }\n\n            document.getElementById('id_course_learning_objectives_competency_type_' + teachingIndex + '_' + j).selectedIndex =\n                learningobjective.learningobjectivecompetency;\n        }\n    }\n\n};\n\nconst setEditorsAndIdValue = (i, j, learningobjective) => {\n    document.querySelector('#id_course_learning_objectives_def_' + i + '_' + j).value =\n        learningobjective.learningobjective;\n    document.querySelector('#id_course_learning_objectives_competency_type_' + i + '_' + j).value =\n        learningobjective.learningobjectivecompetency;\n    document.querySelector('[name = \"course_learning_objectives_' + i + '_' + j + '_id_value\"]')\n        .setAttribute('value', learningobjective.id);\n};\n"],"names":["counterTeachingObjectives","cloneTooltipTeachingObjectives","cloneTooltipLearningObjectives","cloneTooltipLearningObjectivesCompetency","addLearningObjectives","containerIndex","fromBtnClick","learningObjectivesContainer","document","querySelector","learningIndex","children","length","learningObjective","firstElementChild","cloneNode","setAttribute","innerText","parseInt","competencyContainer","insertBefore","updateAddLearningButton","disableLearningDeleteButton","handleEditor","addTeachingObjectives","teachingObjective","parentElement","learningContainer","firstChild","removeChild","getElementById","updateAddTeachingButton","disableTeachingDeleteButton","async","counter","secondCounter","window","$","ajax","type","url","data","id","value","elementId","text","success","response","draftIdElm","error","e","console","log","removeTeachingObjective","index","learningObjectives","querySelectorAll","i","remove","teachingObjectives","substring","lastIndexOf","currentIndex","headerContainer","innerHTML","contentContainer","updateExistingLearningObjectiveFromTeachingUpdate","updateExistingTeachingObjectives","forEach","button","buttonElm","removeLearningObjective","teachingIndex","list","learningObjectiveContainer","updateLearningObjective","updateRemoveLearningButton","updateExistingLearningObjectiveForIndex","learningObjectiveListContainer","currentLearningIndex","element","x","teachingContainer","buttonContainer","buttonElement","hidden","learningContainers","getTeachingTooltip","tooltip","appendChild","teachingObjectiveHeader","currentClone","parentIndex","teachingObjectiveCompetency","learningTooltip","tocHandle","learningTooltipCompetency","learningObjectiveHeader","competencyTooltipContainer","currentComptencyClone","getLearningTooltip","addEventListener","event","target","nodeName","parentNode","includes","n","teachingId","charAt","dataset","changed","stopImmediatePropagation","indexOf","fillTeachingLearningObjective","teachingobjective","learningobjectives","j","learningobjective","entries","learningobjectivecompetency","setEditorsAndIdValue","selectedIndex"],"mappings":"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"}