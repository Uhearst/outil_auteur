{"version":3,"sources":["../src/helper.js"],"names":["handleInit","window","addEventListener","array","handleFillForms","courseId","publishButton","document","getElementById","$","ajax","type","url","data","success","location","reload","error","console","log","publishFlushButton","flush","Ids","open","n","pathname","lastIndexOf","page","substring","anchor","href","includes","params","parsedResponse","decodedParams","JSON","parse","response","teachingobjectives","sections","evaluations"],"mappings":"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","sourcesContent":["import {initModules} from \"./moduleHelper\";\nimport {initObjectives} from \"./objectiveHelper\";\nimport {fillFormObjectives} from \"./objectiveHelper\";\nimport {fillFormModules} from \"./moduleHelper\";\nimport {\n    appendAnchorToForm,\n    appendStyleToAnchorMenuSection,\n    formatEditorAndFileManager\n} from \"./utils\";\nimport {fillFormEvaluations, initEvaluations} from \"./evaluationHelper\";\nimport {initCourse} from \"./courseHelper\";\n\n/**\n *\n */\nfunction handleInit() {\n    formatEditorAndFileManager();\n    let n = window.location.pathname.lastIndexOf('/');\n    let page = window.location.pathname.substring(n + 1);\n    let anchor = window.location.href.includes(\"#\") ?\n        window.location.href.substring(window.location.href.lastIndexOf('#') + 1) : 'displayable-form-informations-container';\n    if (page.includes('course')) {\n        appendAnchorToForm(anchor);\n        if (anchor === 'displayable-form-objectives-container') {\n            initObjectives();\n            appendStyleToAnchorMenuSection('item-teachingobjectives');\n        } else if (anchor === 'displayable-form-sections-container') {\n            initModules();\n            appendStyleToAnchorMenuSection('item-coursesections');\n        } else if (anchor === 'displayable-form-evaluations-container') {\n            initEvaluations();\n            appendStyleToAnchorMenuSection('item-learningevaluations');\n        } else {\n            initCourse();\n            appendStyleToAnchorMenuSection('item-generalinformations');\n        }\n    }\n}\n\n/**\n * @param {array} params\n */\nfunction handleFillForms(params) {\n    let n = window.location.pathname.lastIndexOf('/');\n    let page = window.location.pathname.substring(n + 1);\n    let anchor = window.location.href.includes(\"#\") ?\n        window.location.href.substring(window.location.href.lastIndexOf('#') + 1) : 'displayable-form-informations-container';\n    if (page.includes('course')) {\n        let parsedResponse = null;\n        const decodedParams = JSON.parse(params);\n        window.$.ajax(\n            {\n                type: \"POST\",\n                url: \"../handlers/ajax_course_handler.php\",\n                data: {\n                    courseId: decodedParams.courseId\n                },\n                success: function(response) {\n                    parsedResponse = JSON.parse(response);\n                    if (anchor === 'displayable-form-objectives-container') {\n                        fillFormObjectives(parsedResponse.data.teachingobjectives);\n                    } else if (anchor === 'displayable-form-sections-container') {\n                        fillFormModules(parsedResponse.data.sections);\n                    } else if (anchor === 'displayable-form-evaluations-container') {\n                        fillFormEvaluations(parsedResponse.data.evaluations,\n                            parsedResponse.data.sections);\n                    }\n                    formatEditorAndFileManager();\n                },\n                error: function() {\n                    window.console.log('failure');\n                }\n            });\n\n    }\n}\n\n/**\n *\n */\nexport function init() {\n    handleInit();\n    // getAndSetScrollPosition();\n    window.addEventListener('hashchange', function() {\n        handleInit();\n    });\n}\n\n/**\n * @param {array} array\n */\nexport function fillForm(array) {\n    handleFillForms(array);\n    window.addEventListener('hashchange', function() {\n        handleFillForms(array);\n    });\n}\n\n/**\n * @param {int} courseId\n */\nexport function exportCourse(courseId) {\n    let publishButton = document.getElementById('publishCourse');\n    publishButton.addEventListener('click', function() {\n        window.$.ajax(\n            {\n                type: \"POST\",\n                url: \"../handlers/ajax_export_handler.php\",\n                data: {\n                    courseId: courseId,\n                },\n                success: function() {\n                    // TODO add Modal instead of reload\n                    location.reload();\n                },\n                error: function() {\n                    window.console.log('failure');\n                }\n            });\n    });\n\n    let publishFlushButton = document.getElementById('publishFlushCourse');\n    publishFlushButton.addEventListener('click', function() {\n        window.$.ajax(\n            {\n                type: \"POST\",\n                url: \"../handlers/ajax_export_handler.php\",\n                data: {\n                    courseId: courseId,\n                    flush: \"flush\",\n                },\n                success: function() {\n                    // TODO add Modal instead of reload\n                    location.reload();\n                },\n                error: function() {\n                    window.console.log('failure');\n                }\n            });\n    });\n}\n\n/**\n * @param {array} Ids\n */\nexport function publishCoursePlan(Ids) {\n    let publishButton = document.getElementById('publishCoursePlan');\n    publishButton.addEventListener('click', function() {\n        window.open(\"../handlers/pdf_syllabus_handler.php?courseId=\" + Ids[1]);\n    });\n}"],"file":"helper.min.js"}