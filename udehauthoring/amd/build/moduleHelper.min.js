define ("format_udehauthoring/moduleHelper",["exports","./utils","./language/format_udehauthoring_fr"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.initModules=function(){var a=document.getElementById("form_container"),c=document.querySelector("#id_add_module");a.addEventListener("click",function(a){var b="BUTTON"===a.target.nodeName||"I"===a.target.nodeName&&a.target.parentNode&&"BUTTON"===a.target.parentNode.nodeName;if(!b){}else{var c=null;if("I"===a.target.nodeName){c=a.target.parentNode}else{c=a.target}if(c&&c.id.includes("module")&&!1===c.hidden){if(c.id.includes("remove")){var d=c.id.substring(c.id.lastIndexOf("_")+1);e(d);a.stopImmediatePropagation()}}else{}}});c.addEventListener("click",function(a){var b="BUTTON"===a.target.nodeName||"I"===a.target.nodeName&&a.target.parentNode&&"BUTTON"===a.target.parentNode.nodeName;if(!b){}else{a.stopImmediatePropagation();var c=null;if("I"===a.target.nodeName){c=a.target.parentNode}else{c=a.target}if(c&&c.id.includes("module")&&!1===c.hidden){d(!0)}else{}}});var f=document.querySelectorAll("[class='col-md-9 form-inline align-items-start felement']");if(f){f.forEach(function(a){if("button"===a.dataset.fieldtype){a.removeAttribute("class");var b=a.childNodes;b.forEach(function(a){if(a.type&&"button"===a.type){a.classList.remove("btn-secondary")}})}})}var g=document.querySelectorAll("[class*='add_action_button']");if(g){g.forEach(function(a){var b=a.childNodes;b.forEach(function(a){a.removeAttribute("class")})})}l();(0,b.prepareAccordions)("row_course_module_container_")};a.fillFormModules=function(a){a.forEach(function(a,b){if(0===b){s("id_section_title_0editable",0,a.title);s("id_section_title_0",1,a.title);s("id_section_question_0editable",0,a.question);s("id_section_question_0",1,a.question);s("id_section_description_0editable",0,a.description);s("id_section_description_0",1,a.description)}else{if(null===document.getElementById("id_section_title_"+b)){d(!1)}var c=document.getElementById("id_section_title_"+b);c.innerHTML=a.title;var e=document.getElementById("id_section_question_"+b);e.innerHTML=a.question;var f=document.getElementById("id_section_description_"+b);f.innerHTML=a.description}r(a.id,b)});(0,b.prepareActionButton)([{type:0,id:"module_0"},{type:1,id:"module"}]);l();(0,b.prepareAccordions)("row_course_module_container_")};var t=0;function d(a){var c=f(),d=document.getElementById("displayable-form-sections-container");d.insertBefore(c,document.getElementById("section-add-container"));m();l();(0,b.initTinyMce)("id_section_title_"+t,"superscript subscript | undo redo");(0,b.initTinyMce)("id_section_question_"+t,"superscript subscript | undo redo");(0,b.initTinyMce)("id_section_description_"+t,"bold italic | numlist bullist | underline strikethrough superscript subscript | undo redo");q(t);if(a){(0,b.handleNewAccordionElement)(c)}}function e(a){var c=document.getElementById("row_course_module_container_"+a);(0,b.removeTinyMce)("id_section_title_"+a);(0,b.removeTinyMce)("id_section_question_"+a);(0,b.removeTinyMce)("id_section_description_"+a);c.remove();o(a);m();l();n();t=t-1}function f(){t=t+1;var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div");a.setAttribute("class","row row-container mb-3");a.setAttribute("id","row_course_module_container_"+t);b.setAttribute("class","col-11 accordion-container card");c.setAttribute("class","col-1 remove_module_action_button");var d=g(),e=h();b.appendChild(d);b.appendChild(e);var f=k();c.appendChild(f);a.appendChild(b);a.appendChild(c);return a}function g(){var a=document.createElement("div"),b=document.createElement("a");a.setAttribute("class","card-header accordion-header");a.setAttribute("id","course_module_header_"+t);b.setAttribute("data-toggle","collapse");b.setAttribute("href","#collapse_module_"+t);b.setAttribute("role","button");b.setAttribute("aria-expanded","false");b.setAttribute("aria-controls","collapse_module_"+t);b.setAttribute("class","collapsed");b.innerHTML=c.dictionnary.module+(t+1);a.appendChild(b);return a}function h(){var a=document.createElement("div"),b=document.createElement("div");b.setAttribute("class","collapse");b.setAttribute("id","collapse_module_"+t);b.setAttribute("data-parent","#displayable-form-sections-container");a.setAttribute("class","card-body accordion-content");a.setAttribute("id","course_module_content_"+t);var d=i("section_title","Titre du module"),e=i("section_question",c.dictionnary.moduleQuestion),f=i("section_description",c.dictionnary.moduleDescription);a.appendChild(d);a.appendChild(e);a.appendChild(f);b.appendChild(a);return b}function i(a,b){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("label"),f=document.createElement("div");c.setAttribute("class","form-group row  fitem   tiny-editor");c.setAttribute("id","fitem_id_"+a+"_"+t);d.setAttribute("class","col-md-3 col-form-label d-flex pb-0 pr-md-0");e.setAttribute("class","d-inline word-break");e.setAttribute("for","id_"+a+"_"+t);e.innerHTML=b;f.setAttribute("class","col-md-9 align-items-start felement");f.setAttribute("data-fieldtype","editor");var g=j(a,t);f.appendChild(g);d.appendChild(e);c.appendChild(d);c.appendChild(f);return c}function j(a,b){var c=document.createElement("textarea");c.setAttribute("class","custom-editor");c.setAttribute("id","id_"+a+"_"+b);c.setAttribute("name",a+"_"+b);return c}function k(){var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("button"),d=document.createElement("i");a.setAttribute("id","fitem_id_remove_module_"+t);b.setAttribute("data-fieldtype","button");c.setAttribute("class","btn ml-0");c.setAttribute("name","remove_module_"+t);c.setAttribute("id","id_remove_module_"+t);c.setAttribute("type","button");d.setAttribute("class","remove-button-js fa fa-minus-circle fa-2x");c.appendChild(d);b.appendChild(c);a.appendChild(b);return a}function l(){var a=document.querySelectorAll("[id^=\"row_course_module_container_\"]");if(1===a.length){var b=document.getElementById("id_remove_module_0");b.hidden=!0}else{var c=document.querySelectorAll("[id^=\"id_remove_module\"]");c.forEach(function(a){a.hidden=!1})}}function m(){var a=document.querySelectorAll("[id^=\"row_course_module_container_\"]"),b=document.getElementById("section-add-container"),d=b.querySelector(".add-text");d.innerHTML=c.dictionnary.module+(a.length+1)}function n(){var a=document.querySelectorAll("[id^=\"fitem_id_remove_module_\"]");a.forEach(function(a,b){a.setAttribute("id","fitem_id_remove_module_"+b);var c=a.querySelector("[type=\"button\"]");c.setAttribute("name","remove_module_"+b);c.setAttribute("id","id_remove_module_"+b)})}function o(a){var b=document.querySelectorAll("[id^=\"row_course_module_container_\"]");b.forEach(function(b){if(b.id.substring(b.id.lastIndexOf("_")+1)>a){var d=b.id.charAt(b.id.length-1);b.setAttribute("id","row_course_module_container_"+(d-1));var e=b.querySelector(".accordion-header");e.setAttribute("id","course_module_header_"+(d-1));e.firstElementChild.setAttribute("href","#collapse_module_"+(d-1));e.firstElementChild.setAttribute("aria-controls","collapse_module_"+(d-1));e.firstElementChild.innerHTML=c.dictionnary.module+d;var f=b.querySelector(".collapse");f.setAttribute("id","collapse_module_"+(d-1));f.firstElementChild.setAttribute("id","course_module_content_"+(d-1));p(b,d,"title","superscript subscript | undo redo");p(b,d,"question","superscript subscript | undo redo");p(b,d,"description","bold italic | numlist bullist | underline strikethrough superscript subscript | undo redo")}})}function p(a,c,d,e){var f=a.querySelector("[id^=\"fitem_id_section_"+d+"_\"]");f.setAttribute("id","fitem_id_section_"+d+"_"+(c-1));var g=f.querySelector("[for^=\"id_section_"+d+"_\"]");g.setAttribute("for","id_section_"+d+"_"+(c-1));(0,b.removeTinyMce)("id_section_"+d+"_"+c);var h=f.querySelector("[id^=\"id_section_"+d+"_\"]");h.setAttribute("id","id_section_"+d+"_"+(c-1));h.setAttribute("name","section_"+d+"_"+(c-1));(0,b.initTinyMce)("id_section_"+d+"_"+(c-1),e)}function q(a){var b=document.getElementById("fitem_id_section_title_0"),c=document.getElementById("fitem_id_section_question_0"),d=document.getElementById("fitem_id_section_description_0"),e=b.firstElementChild.children[1],f=c.firstElementChild.children[1],g=d.firstElementChild.children[1],h=document.getElementById("fitem_id_section_title_"+a);h.firstElementChild.appendChild(e.cloneNode(!0));var i=document.getElementById("fitem_id_section_question_"+a);i.firstElementChild.appendChild(f.cloneNode(!0));var j=document.getElementById("fitem_id_section_description_"+a);j.firstElementChild.appendChild(g.cloneNode(!0))}function r(a,b){var c=document.createElement("input");c.setAttribute("name","section_"+b+"_id_value");c.setAttribute("value",a);c.hidden=!0;var d=document.getElementById("fitem_id_section_title_"+b);d.parentNode.insertBefore(c,d)}function s(a,b,c){var d=null,e=setInterval(function(){d=document.getElementById(a);if(null!==d){if(0===b){d.innerHTML=c}else{d.value=c}clearInterval(e)}},100)}});
//# sourceMappingURL=moduleHelper.min.js.map
