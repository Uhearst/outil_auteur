define ("format_udehauthoring/utils",["exports","./language/format_udehauthoring_fr"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.initTinyMce=function(a,b){window.tinymce.init({selector:"textarea#"+a,menubar:!1,plugins:"lists",toolbar:b,branding:!1})};a.removeTinyMce=function(a){window.tinymce.remove("#"+a)};a.removeTags=function(a){if(null===a||""===a){return!1}else{a=a.toString()}return a.replace(/(<([^>]+)>)/ig,"")};a.prepareActionButton=function(a){var b=document.querySelectorAll("[class='col-md-9 form-inline align-items-start felement']");if(b){b.forEach(function(a){if("button"===a.dataset.fieldtype){a.removeAttribute("class");var b=a.childNodes;b.forEach(function(a){if(a.type&&"button"===a.type){a.classList.remove("btn-secondary")}})}})}var c=document.querySelectorAll("[class*='add_action_button']");if(c){c.forEach(function(a){var b=a.childNodes;b.forEach(function(a){a.removeAttribute("class")})})}a.forEach(function(a){if(0===a.type){var b=document.getElementById("fitem_id_remove_"+a.id);if(b){b.firstElementChild.style.setProperty("display","none","important")}}else{var c=document.getElementById("fitem_id_add_"+a.id);if(c){c.firstElementChild.style.setProperty("display","none","important")}}})};a.prepareAccordions=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,c=null;if(1===b){c=document.querySelectorAll("[class=\"row row-container mb-3\"]")}else if(2===b){c=document.querySelectorAll("[class=\"row row-container-child mb-3\"]")}else{c=document.querySelectorAll("[id^="+a+"]")}c.forEach(function(a){window.$(document).ready(function(){window.$("#"+a.firstElementChild.children[1].id).on("shown.bs.collapse",function(a){a.stopPropagation();var b=window.$(this).closest(".card");window.$("html,body").animate({scrollTop:b.offset().top-100},250)})})})};a.handleNewAccordionElement=c;a.formatEditorAndFileManager=function(){var a=document.getElementById("udeh-form"),b=a.querySelectorAll("[class^=\"form-group row  fitem   \"]");b.forEach(function(a){if("editor"===a.children[1].dataset.fieldtype||"filemanager"===a.children[1].dataset.fieldtype){a.classList.add("inline-element");a.children[1].classList.add("inline-inner-element")}})};a.appendAnchorToForm=function(a){var b=document.getElementById("anchor");if(null===b){var c=document.createElement("input");c.setAttribute("type","hidden");c.setAttribute("name","anchor");c.setAttribute("id","anchor");c.setAttribute("value",a);document.getElementById("form_container").appendChild(c)}else{b.setAttribute("value",a)}};a.getAndSetScrollPosition=function(){var a=localStorage.getItem("added-type");if(null!==a&&"null"!==a&&a!==void 0){if("loading"!==document.readyState){d(a)}else{document.addEventListener("DOMContentLoaded",function(){d(a)})}}window.addEventListener("beforeunload",function(){if(document.activeElement&&document.activeElement.classList&&document.activeElement.classList.contains("add-button")){localStorage.setItem("added-type",document.activeElement.name.substring(document.activeElement.name.indexOf("_1")))}else{localStorage.setItem("added-type",null)}})};a.appendStyleToAnchorMenuSection=function(a){for(var b=document.getElementById("collapse-course-container"),c=0;c<b.children.length;c++){if(!b.children[c].getAttribute("class").includes("disabled-menu-element")){b.children[c].setAttribute("class","mb-3");f(b.children[c],"actif","passif")}}var d=document.getElementById(a);d.classList.add("active-menu-element");f(d,"passif","actif",!0)};a.appendSizeToFileManager=function(){var a=document.querySelectorAll("[id*=\"vignette\"]");if(a){a.forEach(function(a){if(a.classList.contains("form-group")){var c="";if(a.getAttribute("id").includes("resource")){c="125 x 180"}else{c="364 x 215"}var d=a.querySelector(".fp-restrictions");d.firstElementChild.innerHTML=d.firstElementChild.innerHTML+", "+b.dictionnary.recommendedFormat+c}})}};var g=0;function c(a){g=g+1;window.$(document).ready(function(){var b=a.firstElementChild.children[1].getAttribute("id");try{window.$("#"+b).collapse("toggle");window.$("#"+b).on("shown.bs.collapse",function(){var a=window.$(this).closest(".card");window.$("html,body").animate({scrollTop:a.offset().top-100},250)})}catch(b){if(20<g){window.console.error("New accordeons can't be handled, contact a dev.");window.console.error("Error detail: "+b)}else{window.console.log("got error handling new accordeon, will retry");var d=setInterval(function(){c(a);clearInterval(d)},100)}}})}function d(a){var b=null,c=null,d=null;if(a.includes("subquestion")){b=document.getElementById("section-subquestions-container")}else{d=a.includes("resource")?"resources":"explorations";b=document.getElementById("subquestion-"+d+"-container")}c=b.querySelectorAll("[class*=\"row-container\"]");e(c[c.length-1])}function e(a){var b=null,d=setInterval(function(){b=a.firstElementChild.children[1].getAttribute("id");if(b.includes("_")){c(a);clearInterval(d)}},100)}function f(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!1,e=a.firstElementChild.firstElementChild.getAttribute("src");if(e&&e.includes(b)){var f=e.replace(b,c);a.firstElementChild.firstElementChild.setAttribute("src",f);a.setAttribute("onmouseout","this.firstElementChild.firstElementChild.setAttribute(\"src\", \""+f+"\")")}if(d){a.firstElementChild.setAttribute("class","active")}else{a.firstElementChild.removeAttribute("class")}}});
//# sourceMappingURL=utils.min.js.map
