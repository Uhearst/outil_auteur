{"version":3,"sources":["../src/phpHelper.js"],"names":["titles","decodedParams","JSON","parse","addButton","document","getElementById","hidden","accordions","querySelectorAll","forEach","accordion","i","headerLink","firstElementChild","href","setAttribute","children","title","headerContent","innerHTML","length","substring","params","setElementNameByType","type","handleInit","courseId","sectionId","subQuestionId","updateAddButtonStyle","updateRemoveButtonStyle","counterElement","element","elementName","subElementsName","dictionnary","module","trame","activity","resource","window","$","ajax","url","data","success","response","parsedResponse","parseInt","id","updatePreviewHeader","updateCurrentAccordions","error","console","log","subQuestion","index","addButtons","getAttribute","colContainers","icon","createElement","updatedButton","changeTag","appendChild","removeButtons","removeButton","parentElement","classList","add","tag","newElem","clone","cloneNode","firstChild","attributes","attr","name","value","headerPreview","querySelector","subElementName","sectionIndex","valueForAccordion","valueForDiv","accordionContainer","updateAccordionText","subquestions","resources","explorations","addContainer","counter","array","hasTitle"],"mappings":"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","sourcesContent":["import {formatEditorAndFileManager, removeTags} from \"./utils\";\nimport {dictionnary} from \"./language/format_udehauthoring_fr\";\n\nlet counterElement = 0;\nlet element = null;\nlet elementName = null;\nlet subElementsName = null;\n\n/**\n * @param {array} titles\n */\nexport function initGlobalEvaluations(titles) {\n   const decodedParams = JSON.parse(titles);\n   let addButton = document.getElementById('id_add_global_evaluation');\n   addButton.hidden = true;\n   let accordions = document.querySelectorAll('[class*=\"single-accordion-container\"]');\n   accordions.forEach(function(accordion, i) {\n      let headerLink = accordion.firstElementChild.firstElementChild;\n      headerLink.href = '#collapseGlobalEvaluation' + (i);\n      headerLink.setAttribute('aria-controls', 'collapseGlobalEvaluation' + (i));\n      accordion.children[1].setAttribute('id', 'collapseGlobalEvaluation' + (i));\n      if (i > 0) {\n         accordion.children[1].setAttribute('class', 'collapse');\n         headerLink.setAttribute('aria-expanded', 'false');\n         headerLink.setAttribute('class', 'collapsed');\n      }\n      if (decodedParams[i]) {\n         let title = decodedParams[i];\n         let headerContent = 'Evaluation Globale' + ' ' + (i + 1) + ' - ' + removeTags(title);\n         headerLink.innerHTML = headerContent.length > 70 ? headerContent.substring(0, 70) + '...' : headerContent;\n      } else {\n         headerLink.innerHTML = 'Evaluation Globale' + ' ' + (i + 1);\n      }\n   });\n   formatEditorAndFileManager();\n}\n\n/**\n * @param {array} params\n */\nexport function init(params) {\n   const decodedParams = JSON.parse(params);\n   setElementNameByType(decodedParams.type);\n   handleInit(decodedParams.courseId, decodedParams.sectionId, decodedParams.subQuestionId, decodedParams.type);\n   updateAddButtonStyle();\n   updateRemoveButtonStyle();\n   formatEditorAndFileManager();\n}\n\n/**\n * @param {int} type\n */\nfunction setElementNameByType(type) {\n   if (type === 0) {\n      elementName = dictionnary.module;\n      subElementsName = [dictionnary.trame];\n   } else {\n      elementName = dictionnary.trame;\n      subElementsName = [dictionnary.activity, dictionnary.resource];\n   }\n}\n\n/**\n * @param {int} courseId\n * @param {int} sectionId\n * @param {int} subQuestionId\n * @param {int} type\n */\nfunction handleInit(courseId, sectionId, subQuestionId, type) {\n   if(type === 0) {\n      window.$.ajax(\n          {\n             type: \"POST\",\n             url: \"../handlers/ajax_module_handler.php\",\n             data: {\n                courseId: courseId\n             },\n             success: function(response) {\n                let parsedResponse = JSON.parse(response);\n                parsedResponse.data.forEach(function(module, i) {\n                   if (parseInt(module.id) === sectionId) {\n                      element = module;\n                      counterElement = i;\n                   }\n                });\n                updatePreviewHeader();\n                subElementsName.forEach(subElementsName => {\n                   updateCurrentAccordions(subElementsName);\n                });\n             },\n             error: function() {\n                window.console.log('failure');\n             }\n          });\n   } else {\n/*      let dataToSend = JSON.stringify({\n         sectionId: sectionId,\n         courseId: courseId\n      });*/\n      window.$.ajax(\n          {\n             type: \"POST\",\n             url: \"../handlers/ajax_subquestion_handler.php\",\n             data: {\n                sectionId: sectionId,\n                courseId: courseId\n             },\n             success: function(response) {\n                let parsedResponse = JSON.parse(response);\n                parsedResponse.data.forEach(function(subQuestion, i) {\n                   if (parseInt(subQuestion.id) === subQuestionId) {\n                      element = subQuestion;\n                      counterElement = i;\n                   }\n                });\n                updatePreviewHeader();\n                subElementsName.forEach(subElementsName => {\n                   updateCurrentAccordions(subElementsName, parsedResponse.index);\n                });\n             },\n             error: function() {\n                window.console.log('failure');\n             }\n          });\n   }\n}\n\n/**\n *\n */\nfunction updateAddButtonStyle() {\n   let addButtons = document.querySelectorAll('[name^=\"add\"]');\n   addButtons.forEach(function(addButton, i) {\n      if (addButton.getAttribute('type') === 'submit') {\n         let colContainers = document.querySelectorAll('.add_action_button');\n         let icon = document.createElement('i');\n\n         let updatedButton = changeTag(addButton, 'button');\n         updatedButton.setAttribute('class', 'btn add-button');\n\n         icon.setAttribute('class', 'fa fa-plus-circle fa-2x');\n         updatedButton.appendChild(icon);\n         colContainers[i].appendChild(updatedButton);\n         addButton.hidden = true;\n      }\n   });\n}\n\n/**\n *\n */\n// eslint-disable-next-line no-unused-vars\nfunction updateRemoveButtonStyle() {\n   let removeButtons = document.querySelectorAll('[name^=\"remove_\"]');\n   removeButtons.forEach(removeButton=> {\n      if(removeButton.getAttribute('type') === 'submit') {\n         let icon = document.createElement('i');\n\n         let updatedButton = changeTag(removeButton, 'button');\n         updatedButton.setAttribute('class', 'btn remove-button');\n\n         icon.setAttribute('class', 'fa fa-minus-circle fa-2x');\n         updatedButton.appendChild(icon);\n         removeButton.parentElement.appendChild(updatedButton);\n         removeButton.parentElement.classList.add('remove_action_button');\n         removeButton.hidden = true;\n      }\n   });\n}\n\n\n/**\n * @param {object} element\n * @param {string} tag\n */\nfunction changeTag(element, tag) {\n   const newElem = document.createElement(tag);\n   const clone = element.cloneNode(true);\n\n   while (clone.firstChild) {\n      newElem.appendChild(clone.firstChild);\n   }\n\n   for (const attr of clone.attributes) {\n      newElem.setAttribute(attr.name, attr.value);\n   }\n   return newElem;\n}\n\n/**\n *\n */\nfunction updatePreviewHeader() {\n   let headerPreview = document.querySelector('[id*=\"preview_header\"]');\n   headerPreview.firstElementChild.innerHTML = elementName + (counterElement + 1) + ' - ' + removeTags(element.title);\n}\n\n/**\n * @param {string} subElementName\n * @param {String} sectionIndex\n */\nfunction updateCurrentAccordions(subElementName, sectionIndex = null) {\n   let accordions = null;\n   let valueForAccordion = null;\n   let valueForDiv = null;\n   if(subElementName === dictionnary.trame) {\n      accordions = document.querySelectorAll('[class*=\"row_section_subquestion_container\"]');\n      valueForAccordion = 'SectionSubQuestion_';\n      valueForDiv = 'subquestion';\n   } else if (subElementName === dictionnary.resource) {\n      accordions = document.querySelectorAll('[class*=\"row_subquestion_resource_container\"]');\n      valueForAccordion = 'SubQuestionResource_';\n      valueForDiv = 'resource';\n   } else if (subElementName === dictionnary.activity) {\n      accordions = document.querySelectorAll('[class*=\"row_subquestion_exploration_container\"]');\n      valueForAccordion = 'SubQuestionExploration_';\n      valueForDiv = 'exploration';\n   }\n   accordions.forEach(function(accordion, i) {\n      let accordionContainer = accordion.querySelector('[class*=\"accordion-container\"]');\n      let headerLink = accordionContainer.firstElementChild.firstElementChild;\n      headerLink.href = '#collapse' + valueForAccordion + (i);\n      headerLink.setAttribute('aria-controls', 'collapse' + valueForAccordion + (i));\n      accordionContainer.children[1].setAttribute('id', 'collapse' + valueForAccordion + (i));\n      if (i > 0) {\n         accordionContainer.children[1].setAttribute('class', 'collapse');\n         headerLink.setAttribute('aria-expanded', 'false');\n         headerLink.setAttribute('class', 'collapsed');\n      }\n      if (subElementName === dictionnary.trame) {\n         updateAccordionText(headerLink, subElementName, i, element.subquestions);\n      } else if (subElementName === dictionnary.resource) {\n         updateAccordionText(headerLink, subElementName, i, element.resources);\n      } else if (subElementName === dictionnary.activity) {\n         updateAccordionText(headerLink, subElementName, i, element.explorations, false);\n      }\n   });\n   let addContainer = document.getElementById('add_' + valueForDiv + '_container');\n   if (subElementName === dictionnary.trame) {\n      addContainer.firstElementChild.firstElementChild.innerHTML =\n          subElementName + ' ' + (counterElement + 1) + '.' + (accordions.length + 1);\n   } else {\n      addContainer.firstElementChild.firstElementChild.innerHTML =\n          subElementName + ' ' + (sectionIndex + 1) + '.' + (counterElement + 1) + '.' + (accordions.length + 1);\n   }\n\n}\n\n/**\n * @param {object} headerLink\n * @param {string} subElementName\n * @param {int} counter\n * @param {array} array\n * @param {boolean} hasTitle\n */\nfunction updateAccordionText(headerLink, subElementName, counter, array, hasTitle = true) {\n   if(array && array[counter]) {\n      let title = array[counter].title;\n      let headerContent = '';\n      if (hasTitle) {\n         headerContent = subElementName + (counterElement + 1) + '.' + (counter + 1) + ' - ' + removeTags(title);\n      } else {\n         headerContent = subElementName + (counterElement + 1) + '.' + (counter + 1);\n      }\n      headerLink.innerHTML = headerContent.length > 70 ? headerContent.substring(0, 70) + '...' : headerContent;\n   } else {\n      headerLink.innerHTML = subElementName + (counterElement + 1) + '.' + (counter + 1);\n   }\n}\n\n"],"file":"phpHelper.min.js"}