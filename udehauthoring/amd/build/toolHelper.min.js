define ("format_udehauthoring/toolHelper",["exports","./notificationHelper"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.initEditTools=function(a){var b=document.querySelector("[action^=\"modedit.php\"]");b.action="udeh_modedit.php";var c=document.createElement("input");c.name="subquestionid";c.type="hidden";c.value=a[0];var d=document.createElement("input");d.name="explorationid";d.type="hidden";d.value=a[1];b.firstElementChild.appendChild(c);b.firstElementChild.appendChild(d);var e=document.getElementById("fgroup_id_buttonar");if(null===e){window.console.error("Back button to redact couldn't be appended. Contact a programmer.")}else{var f=e.children[1].children[0].children[1],g=f.children[1].cloneNode(!0);g.children[0].children[0].name="submitbutton3";g.children[0].children[0].id="id_submitbutton3";g.children[0].children[0].value="Save and return to redact";g.children[1].id="id_error_submitbutton3";f.insertBefore(g,f.children[2])}};a.initRedactTools=function(){d();c()};function c(){var a=document.querySelectorAll("[id*=\"_generate_tool\"][type=\"button\"]");a.forEach(function(a,c){a.addEventListener("click",function(){var d=document.getElementById("id_tool_group_"+c+"_exploration_tool"),e=d.options[d.selectedIndex].text.toLowerCase(),f=a.getAttribute("courseid"),g=null,h=document.querySelector("[name=\"exploration_id["+c+"]\"]");if(null===h||"0"===h.value){(0,b.addIssueNotification)("Vous devez enregistr\xE9 l'exploration avant d'y associer un outil");return}else{g=h.value}var i=null;if(-1===window.location.href.indexOf("=")){i=0}else{i=window.location.href.substring(window.location.href.indexOf("=")+1)}var j=window.location.href.substring(0,window.location.href.indexOf("redact"));j=j+"udeh_modedit.php?add="+e+"&type=&course="+f+"&section=0&return=0&sr=&subquestionid="+i+"&explorationid="+g;window.location.assign(j)})})}function d(){var a=document.querySelectorAll("[name^=\"exploration_tool_cmid[\"]");a.forEach(function(a){var b=a.name.slice(a.name.indexOf("[")+1,a.name.lastIndexOf("]")),c=document.getElementById("fitem_id_exploration_tool_url_display_"+b),d=null;if(-1===window.location.href.indexOf("=")){d=0}else{d=window.location.href.substring(window.location.href.indexOf("=")+1)}var e=null,f=document.querySelector("[name=\"exploration_id["+b+"]\"]");if(null===f||"0"===f.value||null===a.value||""===a.value){c.style="display:none;";return}else{var i=document.getElementById("id_tool_group_"+b+"_generate_tool");i.disabled=!0;e=f.value}var g=document.createElement("a"),h=window.location.href.substring(0,window.location.href.indexOf("redact"));h=h+"udeh_modedit.php?update="+a.value+"&return=0&sr0=&subquestionid="+d+"&explorationid="+e;g.setAttribute("href",h);g.appendChild(c.children[1]);c.appendChild(g)})}});
//# sourceMappingURL=toolHelper.min.js.map
