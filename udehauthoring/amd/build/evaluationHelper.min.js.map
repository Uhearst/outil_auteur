{"version":3,"sources":["../src/evaluationHelper.js"],"names":["queryString","window","location","search","urlParams","URLSearchParams","$","ajax","type","url","data","courseId","get","success","response","parsedResponse","JSON","parse","learningObjectives","error","console","log","modules","push","Module","formContainer","document","getElementById","addEventListener","event","isButton","target","nodeName","parentNode","element","id","includes","hidden","substring","lastIndexOf","removeEvaluation","stopImmediatePropagation","addButton","querySelector","addEvaluation","addingButtonsContainer","querySelectorAll","forEach","addingButtonContainer","dataset","fieldtype","removeAttribute","childNodes","child","classList","remove","addingButtons","addingButton","disableEvaluationDeleteButton","placeLearningObjectivesTooltip","counterEvaluations","title","fromBtnClick","x","buildEvaluation","container","insertBefore","updateAddEvaluationButton","getTooltips","index","evaluation","updateExistingEvaluations","updateRemoveEvaluationButton","rowEvaluationContainer","createElement","colEvaluationContainer","colButtonContainer","setAttribute","header","buildEvaluationHeader","content","buildEvaluationContent","appendChild","button","buildEvaluationButton","headerContainer","linkForCollapseDiv","innerHTML","contentContainer","collapseDiv","buildEditorContainer","dictionnary","evaluationTitle","description","evaluationDescription","weight","buildInputContainer","evaluationWeight","learningObjectivesList","buildCheckboxContainer","associatedLearningObjective","module","buildSelectContainer","labelText","fieldContainer","labelContainer","label","editorContainer","editor","buildTinyMCE","inputContainer","input","titleContainer","labelField","waitForEvaluations","parent","Array","isArray","learningobjectives","obj","subIndex","subContainer","checkBoxContainer","checkBoxSubContainer","checkbox","hiddenCheckbox","labelCheckbox","learningobjective","selectContainer","select","associatedModule","buildOption","option","evaluationIndex","inputContainerDiv","buttonContainer","buttonElement","icon","evaluations","length","buttons","buttonElm","addEvaluationButtonContainer","addEvaluationButtonText","currentIndex","charAt","firstElementChild","collapsible","updateEditorAndLabel","toolbarOptions","labelTitle","editorTitle","fillFormCommonPart","value","learningobjectiveids","learningObjectiveElement","audehlearningobjectiveid","checked","audehsectionid","descriptionContainer","weightContainer","evaluationObjContainer","evaluationModuleContainer","titleToolTip","children","descriptionToolTip","weightToolTip","evaluationObjToolTip","evaluationModuleToolTip","titleToFillContainer","cloneNode","descriptionToFillContainer","weightToFillContainer","evaluationObjToFillContainer","evaluationModuleToFillContainer","initialContainer","rows","tooltipContainer","getElementsByTagName","buildIdHiddenInput","counter","waitWithInterval","toAppend","timereditable","setInterval","clearInterval","timer","fillFormEvaluations","moduleslist","i"],"mappings":"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","sourcesContent":["import {handleNewAccordionElement, initTinyMce, prepareAccordions, prepareActionButton, removeTags, removeTinyMce} from \"./utils\";\nimport {dictionnary} from \"./language/format_udehauthoring_fr\";\nimport {validateEvaluationForm} from \"./validator/evaluationValidator\";\n\nlet counterEvaluations = 0;\nlet modules = [];\nlet learningObjectives = [];\n\nclass Module {\n    constructor(title, id) {\n        this.title = title;\n        this.id = id;\n    }\n}\n\n/**\n * @param {boolean} fromBtnClick\n */\nfunction addEvaluation(fromBtnClick) {\n    let x = buildEvaluation();\n    let container = document.getElementById('displayable-form-evaluations-container');\n    container.insertBefore(x, document.getElementById('evaluation-add-container'));\n    updateAddEvaluationButton();\n    disableEvaluationDeleteButton();\n    initTinyMce('id_evaluation_title_' + counterEvaluations, 'superscript subscript | undo redo');\n    initTinyMce('id_evaluation_description_' + counterEvaluations,\n        'bold italic | numlist bullist | underline strikethrough superscript subscript | undo redo');\n    getTooltips(counterEvaluations);\n    if (fromBtnClick) {\n        handleNewAccordionElement(x);\n    }\n}\n\n/**\n * @param {string} index\n */\nfunction removeEvaluation(index) {\n    let evaluation = document.getElementById('row_course_evaluation_container_' + index);\n    removeTinyMce(\"id_evaluation_title_\" + index);\n    removeTinyMce(\"id_evaluation_description_\" + index);\n\n    evaluation.remove();\n    updateExistingEvaluations(index);\n    updateAddEvaluationButton();\n    disableEvaluationDeleteButton();\n    updateRemoveEvaluationButton();\n    counterEvaluations = counterEvaluations - 1;\n}\n\n/**\n *\n */\nfunction buildEvaluation() {\n    counterEvaluations = counterEvaluations + 1;\n    let rowEvaluationContainer = document.createElement(\"div\");\n    let colEvaluationContainer = document.createElement(\"div\");\n    let colButtonContainer = document.createElement(\"div\");\n\n    rowEvaluationContainer.setAttribute('class', 'row row-container mb-3');\n    rowEvaluationContainer.setAttribute('id', 'row_course_evaluation_container_' + counterEvaluations);\n    colEvaluationContainer.setAttribute('class', 'col-11 accordion-container card');\n    colButtonContainer.setAttribute('class', 'col-1 remove_evaluation_action_button');\n\n    let header = buildEvaluationHeader();\n    let content = buildEvaluationContent();\n    colEvaluationContainer.appendChild(header);\n    colEvaluationContainer.appendChild(content);\n\n    let button = buildEvaluationButton();\n    colButtonContainer.appendChild(button);\n\n    rowEvaluationContainer.appendChild(colEvaluationContainer);\n    rowEvaluationContainer.appendChild(colButtonContainer);\n\n    return rowEvaluationContainer;\n}\n\n/**\n *\n */\nfunction buildEvaluationHeader() {\n    let headerContainer = document.createElement(\"div\");\n    let linkForCollapseDiv = document.createElement('a');\n\n    headerContainer.setAttribute('class', 'accordion-header card-header');\n    headerContainer.setAttribute('id', 'course_evaluation_header_' + (counterEvaluations));\n\n    linkForCollapseDiv.setAttribute('data-toggle', 'collapse');\n    linkForCollapseDiv.setAttribute('href', '#collapse_evaluation_' + (counterEvaluations));\n    linkForCollapseDiv.setAttribute('role', 'button');\n    linkForCollapseDiv.setAttribute('aria-expanded', 'false');\n    linkForCollapseDiv.setAttribute('aria-controls', 'collapse_evaluation_' + (counterEvaluations));\n    linkForCollapseDiv.setAttribute('class', 'collapsed');\n    linkForCollapseDiv.innerHTML = 'Evaluation ' + (counterEvaluations + 1);\n\n    headerContainer.appendChild(linkForCollapseDiv);\n\n    return headerContainer;\n}\n\n/**\n *\n */\nfunction buildEvaluationContent() {\n    let contentContainer = document.createElement(\"div\");\n    let collapseDiv = document.createElement(\"div\");\n\n    collapseDiv.setAttribute('class', 'collapse');\n    collapseDiv.setAttribute('id', 'collapse_evaluation_' + (counterEvaluations));\n    collapseDiv.setAttribute('data-parent', '#displayable-form-evaluations-container');\n\n    contentContainer.setAttribute('class', 'card-body accordion-content');\n    contentContainer.setAttribute('id', 'course_evaluation_content_' + (counterEvaluations));\n\n    let title = buildEditorContainer('evaluation_title', dictionnary.evaluationTitle);\n    let description = buildEditorContainer('evaluation_description', dictionnary.evaluationDescription);\n    let weight = buildInputContainer('evaluation_weight', dictionnary.evaluationWeight);\n    let learningObjectivesList = buildCheckboxContainer('evaluation_learning_objectives',\n        dictionnary.associatedLearningObjective);\n    let module = buildSelectContainer();\n\n    contentContainer.appendChild(title);\n    contentContainer.appendChild(description);\n    contentContainer.appendChild(weight);\n    contentContainer.appendChild(learningObjectivesList);\n    contentContainer.appendChild(module);\n    collapseDiv.appendChild(contentContainer);\n\n    return collapseDiv;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildEditorContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement(\"div\");\n    let label = document.createElement(\"label\");\n    let editorContainer = document.createElement(\"div\");\n\n\n    fieldContainer.setAttribute('class', 'form-group row  fitem   tiny-editor');\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterEvaluations);\n\n    labelContainer.setAttribute('class', 'col-md-3 col-form-label d-flex pb-0 pr-md-0');\n\n    label.setAttribute('class', 'd-inline word-break');\n    label.setAttribute('for', 'id_' + id + '_' + counterEvaluations);\n    label.innerHTML = labelText;\n\n    editorContainer.setAttribute('class', 'col-md-9 align-items-start felement');\n    editorContainer.setAttribute('data-fieldtype', 'editor');\n\n    let editor = buildTinyMCE(id, counterEvaluations);\n\n    editorContainer.appendChild(editor);\n    labelContainer.appendChild(label);\n\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(editorContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildInputContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement(\"div\");\n    let label = document.createElement(\"label\");\n    let inputContainer = document.createElement(\"div\");\n    let input = document.createElement(\"input\");\n\n\n    fieldContainer.setAttribute('class', 'form-group row  fitem   ');\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterEvaluations);\n\n    labelContainer.setAttribute('class', 'col-md-3 col-form-label d-flex pb-0 pr-md-0');\n\n    label.setAttribute('class', 'd-inline word-break');\n    label.setAttribute('for', 'id_' + id + '_' + counterEvaluations);\n    label.innerHTML = labelText;\n\n    inputContainer.setAttribute('class', 'col-md-9 form-inline align-items-start felement');\n    inputContainer.setAttribute('data-fieldtype', 'text');\n\n    input.setAttribute('type', 'text');\n    input.setAttribute('class', 'form-control');\n    input.setAttribute('name', id + '_' + counterEvaluations);\n    input.setAttribute('id', 'id_' + id + '_' + counterEvaluations);\n\n    inputContainer.appendChild(input);\n    labelContainer.appendChild(label);\n\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(inputContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildCheckboxContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let titleContainer = document.createElement(\"div\");\n    let labelField = document.createElement(\"label\");\n\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterEvaluations);\n\n    titleContainer.setAttribute('id', 'evaluation_learning_objectives_title_' + counterEvaluations);\n    titleContainer.setAttribute('class', 'd-flex');\n\n    labelField.setAttribute('for', 'evaluation_learning_objectives_title_' + counterEvaluations);\n    labelField.setAttribute('class', 'd-inline word-break ml-3 eval-obj-title');\n    labelField.innerHTML = labelText;\n\n    titleContainer.appendChild(labelField);\n    fieldContainer.appendChild(titleContainer);\n\n    waitForEvaluations();\n\n    learningObjectives.forEach(function(parent, index) {\n        let element = null;\n        if(Array.isArray(parent)) {\n            element = parent;\n        } else {\n            element = parent.learningobjectives;\n        }\n        element.forEach(function(obj, subIndex) {\n            let labelContainer = document.createElement(\"div\");\n            let subContainer = document.createElement(\"div\");\n            let checkBoxContainer = document.createElement(\"div\");\n            let checkBoxSubContainer = document.createElement(\"div\");\n            let checkbox = document.createElement(\"input\");\n            let hiddenCheckbox = document.createElement(\"input\");\n            let labelCheckbox = document.createElement(\"label\");\n\n            subContainer.setAttribute('class', 'form-group row  fitem  ');\n\n            labelContainer.setAttribute('class', 'col-md-3');\n            checkBoxContainer.setAttribute('class', 'col-md-9 checkbox');\n\n            checkBoxSubContainer.setAttribute('class', 'form-check d-flex');\n\n            hiddenCheckbox.setAttribute('type', 'hidden');\n            hiddenCheckbox.setAttribute('name', id + '_' + counterEvaluations + '[' + obj.id + ']');\n            hiddenCheckbox.setAttribute('value', '0');\n\n            checkbox.setAttribute('type', 'checkbox');\n            checkbox.setAttribute('class', 'form-check-input ');\n            checkbox.setAttribute('name', id + '_' + counterEvaluations + '[' + obj.id + ']');\n            checkbox.setAttribute('id', 'id_' + id + '_' + counterEvaluations + '_' + obj.id);\n            checkbox.setAttribute('value', '1');\n\n            labelCheckbox.setAttribute('for', 'id_' + id + '_' + counterEvaluations);\n            labelCheckbox.innerHTML = (index + 1) + '.' + (subIndex + 1) + ' - ' + removeTags(obj.learningobjective);\n\n            checkBoxSubContainer.appendChild(hiddenCheckbox);\n            checkBoxSubContainer.appendChild(checkbox);\n            checkBoxSubContainer.appendChild(labelCheckbox);\n            checkBoxContainer.appendChild(checkBoxSubContainer);\n\n            subContainer.appendChild(labelContainer);\n            subContainer.appendChild(checkBoxContainer);\n\n            fieldContainer.appendChild(subContainer);\n        });\n    });\n\n    return fieldContainer;\n}\n\n/**\n *\n */\nfunction buildSelectContainer() {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement('div');\n    let selectContainer = document.createElement('div');\n    let label = document.createElement('label');\n    let select = document.createElement('select');\n\n    fieldContainer.setAttribute('id', \"fitem_id_evaluation_module_\" + counterEvaluations);\n    fieldContainer.setAttribute('class', \"form-group row  fitem   \");\n\n    labelContainer.setAttribute('class', \"col-md-3 col-form-label d-flex pb-0 pr-md-0\");\n\n    label.setAttribute('class', 'd-inline word-break ');\n    label.setAttribute('for', 'id_evaluation_module_' + counterEvaluations);\n    label.innerHTML = dictionnary.associatedModule;\n\n    selectContainer.setAttribute('class', 'col-md-9 form-inline align-items-start felement');\n    selectContainer.setAttribute('data-fieldtype', 'select');\n\n    select.setAttribute('class', 'custom-select');\n    select.setAttribute('name', 'evaluation_module_' + counterEvaluations);\n    select.setAttribute('id', 'id_evaluation_module_' + counterEvaluations);\n\n    modules.forEach(module => {\n        select.appendChild(buildOption(module));\n    });\n\n    labelContainer.appendChild(label);\n    selectContainer.appendChild(select);\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(selectContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {object} module\n */\nfunction buildOption(module) {\n    let option = document.createElement('option');\n    option.setAttribute('value', module.id);\n    option.innerHTML = module.title;\n    return option;\n}\n\n/**\n * @param {string} target\n * @param {string} evaluationIndex\n */\nfunction buildTinyMCE(target, evaluationIndex) {\n    let inputContainerDiv = document.createElement(\"textarea\");\n    inputContainerDiv.setAttribute('class', 'custom-editor');\n    inputContainerDiv.setAttribute('id', 'id_' + target + '_' + evaluationIndex);\n    inputContainerDiv.setAttribute('name', target + '_' + evaluationIndex);\n    return inputContainerDiv;\n}\n\n/**\n *\n */\nfunction buildEvaluationButton() {\n    let rowEvaluationContainer = document.createElement(\"div\");\n    let buttonContainer = document.createElement(\"div\");\n    let buttonElement = document.createElement(\"button\");\n    let icon = document.createElement(\"i\");\n\n    rowEvaluationContainer.setAttribute('id', 'fitem_id_remove_evaluation_' + counterEvaluations);\n\n    buttonContainer.setAttribute('data-fieldtype', 'button');\n\n    buttonElement.setAttribute('class', 'btn ml-0');\n    buttonElement.setAttribute('name', 'remove_evaluation_' + counterEvaluations);\n    buttonElement.setAttribute('id', 'id_remove_evaluation_' + counterEvaluations);\n    buttonElement.setAttribute('type', 'button');\n\n    icon.setAttribute('class', 'remove-button-js fa fa-minus-circle fa-2x');\n\n    buttonElement.appendChild(icon);\n    buttonContainer.appendChild(buttonElement);\n    rowEvaluationContainer.appendChild(buttonContainer);\n\n    return rowEvaluationContainer;\n}\n\n/**\n *\n */\nfunction disableEvaluationDeleteButton() {\n    let evaluations = document.querySelectorAll('[id^=\"id_evaluation_learning_objectives_\"]');\n    if (evaluations.length === 1) {\n        let button = document.getElementById('id_remove_evaluation_0');\n        button.hidden = true;\n    } else {\n        let buttons = document.querySelectorAll('[id^=\"id_remove_evaluation\"]');\n        buttons.forEach(button => {\n            button.hidden = false;\n        });\n    }\n}\n\n/**\n *\n */\nfunction updateRemoveEvaluationButton() {\n    let buttons = document.querySelectorAll('[id^=\"fitem_id_remove_evaluation_\"]');\n    buttons.forEach(function(button, index) {\n        button.setAttribute('id', 'fitem_id_remove_evaluation_' + index);\n        let buttonElm = button.querySelector('[type=\"button\"]');\n        buttonElm.setAttribute('name', 'remove_evaluation_' + index);\n        buttonElm.setAttribute('id', 'id_remove_evaluation_' + index);\n    });\n}\n\n/**\n *\n */\nfunction updateAddEvaluationButton() {\n    let x = document.querySelectorAll('[id^=\"row_course_evaluation_container_\"]');\n    let addEvaluationButtonContainer = document.getElementById('evaluation-add-container');\n    let addEvaluationButtonText = addEvaluationButtonContainer.querySelector('.add-text');\n    addEvaluationButtonText.innerHTML = dictionnary.evaluation + (x.length + 1);\n}\n\n/**\n * @param {string} index\n */\nfunction updateExistingEvaluations(index) {\n    let evaluations = document.querySelectorAll('[id^=\"row_course_evaluation_container_\"]');\n    evaluations.forEach(evaluation => {\n        if (evaluation.id.substring(evaluation.id.lastIndexOf('_') + 1) > index) {\n            let currentIndex = evaluation.id.charAt(evaluation.id.length - 1);\n            evaluation.setAttribute('id', 'row_course_evaluation_container_' + (currentIndex - 1));\n            let header = evaluation.querySelector('.accordion-header');\n            header.setAttribute('id', 'course_evaluation_header_' + (currentIndex - 1));\n            header.firstElementChild.setAttribute('href', '#collapse_evaluation_' + (currentIndex - 1));\n            header.firstElementChild.setAttribute('aria-controls', 'collapse_evaluation_' + (currentIndex - 1));\n            header.firstElementChild.innerHTML = 'Evaluation ' + (currentIndex);\n\n\n            let collapsible = evaluation.querySelector('.collapse');\n            collapsible.setAttribute('id', 'collapse_evaluation_' + (currentIndex - 1));\n            collapsible.firstElementChild.setAttribute('id', 'course_evaluation_content_' + (currentIndex - 1));\n\n            updateEditorAndLabel(evaluation, currentIndex, 'title', 'superscript subscript | undo redo');\n            updateEditorAndLabel(evaluation, currentIndex, 'description',\n                'bold italic | numlist bullist | underline strikethrough superscript subscript | undo redo');\n\n        }\n    });\n}\n\n/**\n * @param {object} evaluation\n * @param {string} currentIndex\n * @param {string} element\n * @param {string} toolbarOptions\n */\nfunction updateEditorAndLabel(evaluation, currentIndex, element, toolbarOptions) {\n    let titleContainer = evaluation.querySelector('[id^=\"fitem_id_evaluation_' + element + '_\"]');\n    titleContainer.setAttribute('id', 'fitem_id_evaluation_' + element + '_' + (currentIndex - 1));\n    let labelTitle = titleContainer.querySelector('[for^=\"id_evaluation_' + element + '_\"]');\n    labelTitle.setAttribute('for', 'id_evaluation_' + element + '_' + (currentIndex - 1));\n    removeTinyMce('id_evaluation_' + element + '_' + (currentIndex));\n    let editorTitle = titleContainer.querySelector('[id^=\"id_evaluation_' + element + '_\"]');\n    editorTitle.setAttribute('id', 'id_evaluation_' + element + '_' + (currentIndex - 1));\n    editorTitle.setAttribute('name', 'evaluation_' + element + '_' + (currentIndex - 1));\n    initTinyMce('id_evaluation_' + element + '_' + (currentIndex - 1), toolbarOptions);\n}\n\n/**\n * @param {object} evaluation\n * @param {int} index\n */\nfunction fillFormCommonPart(evaluation, index) {\n    let weight = document.getElementById('id_evaluation_weight_' + index);\n    weight.value = evaluation.weight;\n\n    evaluation.learningobjectiveids.forEach(element=> {\n        let learningObjectiveElement = document\n            .getElementById('id_evaluation_learning_objectives_' + index + '_' + element.audehlearningobjectiveid);\n        if(learningObjectiveElement) {\n            learningObjectiveElement.checked = true;\n        }\n    });\n\n    let module = document.getElementById('id_evaluation_module_' + index);\n    module.value = evaluation.audehsectionid;\n}\n\n/**\n * @param {int} index\n */\nfunction getTooltips(index) {\n    const titleContainer = document.getElementById('fitem_id_evaluation_title_0');\n    const descriptionContainer = document.getElementById('fitem_id_evaluation_description_0');\n    const weightContainer = document.getElementById('fitem_id_evaluation_weight_0');\n    const evaluationObjContainer = document.getElementById('fitem_id_evaluation_learning_objectives_0');\n    const evaluationModuleContainer = document.getElementById('fitem_id_evaluation_module_0');\n\n    const titleToolTip = titleContainer.firstElementChild.children[1];\n    const descriptionToolTip = descriptionContainer.firstElementChild.children[1];\n    const weightToolTip = weightContainer.firstElementChild.children[1];\n    const evaluationObjToolTip = evaluationObjContainer.firstElementChild.children[1];\n    const evaluationModuleToolTip = evaluationModuleContainer.firstElementChild.children[1];\n\n    let titleToFillContainer = document.getElementById('fitem_id_evaluation_title_' + index);\n    titleToFillContainer.firstElementChild.appendChild(titleToolTip.cloneNode(true));\n\n    let descriptionToFillContainer = document.getElementById('fitem_id_evaluation_description_' + index);\n    descriptionToFillContainer.firstElementChild.appendChild(descriptionToolTip.cloneNode(true));\n\n    let weightToFillContainer = document.getElementById('fitem_id_evaluation_weight_' + index);\n    weightToFillContainer.firstElementChild.appendChild(weightToolTip.cloneNode(true));\n\n    let evaluationObjToFillContainer = document.getElementById('fitem_id_evaluation_learning_objectives_' + index);\n    evaluationObjToFillContainer.firstElementChild.appendChild(evaluationObjToolTip.cloneNode(true));\n\n    let evaluationModuleToFillContainer = document.getElementById('fitem_id_evaluation_module_' + index);\n    evaluationModuleToFillContainer.firstElementChild.appendChild(evaluationModuleToolTip.cloneNode(true));\n}\n\n/**\n *\n */\nfunction placeLearningObjectivesTooltip() {\n    let initialContainer = document.getElementById('fitem_id_evaluation_learning_objectives_0');\n    let rows = initialContainer.querySelectorAll('.form-group');\n    let tooltipContainer = rows[rows.length - 1].children[1].firstElementChild.getElementsByTagName('div');\n    if (tooltipContainer[0]) {\n        let headerContainer = document.getElementById('evaluation_learning_objectives_title_0');\n        headerContainer.appendChild(tooltipContainer[0]);\n    }\n}\n\n/**\n * @param {int} id\n * @param {int} counter\n */\nfunction buildIdHiddenInput(id, counter) {\n    let input = document.createElement(\"input\");\n    input.setAttribute('name', 'evaluation_' + (counter) + '_id_value');\n    input.setAttribute('value', id);\n    input.hidden = true;\n\n    let element = document.getElementById('fitem_id_evaluation_title_' + (counter));\n    element.parentNode.insertBefore(input, element);\n}\n\n/**\n * @param {string} id\n * @param {int} type\n * @param {object} toAppend\n */\nfunction waitWithInterval(id, type, toAppend) {\n    let element = null;\n    let timereditable = setInterval(function() {\n        element = document.getElementById(id);\n        if(element !== null) {\n            if(type === 0) {\n                element.innerHTML = toAppend;\n            } else {\n                element.value = toAppend;\n            }\n            clearInterval(timereditable);\n        }\n    }, 100);\n}\n\n/**\n *\n */\nfunction waitForEvaluations() {\n    let timer = setInterval(function() {\n        if (learningObjectives !== []) {\n            clearInterval(timer);\n        }\n    }, 100);\n}\n\n/**\n *\n */\nexport function initEvaluations() {\n    validateEvaluationForm();\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    window.$.ajax(\n        {\n            type: \"POST\",\n            url: \"../handlers/ajax_learning_objective_handler.php\",\n            data: {\n                courseId: urlParams.get('course_id')\n            },\n            success: function(response) {\n               let parsedResponse = JSON.parse(response);\n               learningObjectives = parsedResponse.data;\n            },\n            error: function() {\n                window.console.log('failure');\n            }\n        });\n    window.$.ajax(\n        {\n            type: \"POST\",\n            url: \"../handlers/ajax_module_handler.php\",\n            data: {\n                courseId: urlParams.get('course_id')\n            },\n            success: function(response) {\n                let parsedResponse = JSON.parse(response);\n                modules = parsedResponse.data;\n                modules.push(new Module('Aucun', 0));\n            },\n            error: function() {\n                window.console.log('failure');\n            }\n        });\n    const formContainer = document.getElementById('form_container');\n    formContainer.addEventListener('click', event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('evaluation') && element.hidden === false) {\n                if (element.id.includes('remove')) {\n                    let id = element.id.substring(element.id.lastIndexOf('_') + 1);\n                    removeEvaluation(id);\n                    event.stopImmediatePropagation();\n                }\n            } else {\n                return;\n            }\n        }\n    });\n    let addButton = document.querySelector('#id_add_evaluation');\n    addButton.addEventListener('click', event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            event.stopImmediatePropagation();\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('evaluation') && element.hidden === false) {\n                addEvaluation(true);\n            } else {\n                return;\n            }\n        }\n    });\n    let addingButtonsContainer = document.\n    querySelectorAll(\"[class='col-md-9 form-inline align-items-start felement']\");\n    if (addingButtonsContainer) {\n        addingButtonsContainer.forEach(function(addingButtonContainer) {\n            if (addingButtonContainer.dataset.fieldtype === 'button') {\n                addingButtonContainer.removeAttribute('class');\n                let childNodes = addingButtonContainer.childNodes;\n                childNodes.forEach(child => {\n                    if (child.type && child.type === 'button') {\n                        child.classList.remove('btn-secondary');\n                    }\n                });\n            }\n\n        });\n    }\n    let addingButtons = document.querySelectorAll(\"[class*='add_action_button']\");\n    if (addingButtons) {\n        addingButtons.forEach(function(addingButton) {\n            let childNodes = addingButton.childNodes;\n            childNodes.forEach(child => {\n                child.removeAttribute('class');\n            });\n        });\n    }\n    disableEvaluationDeleteButton();\n    prepareAccordions('row_course_evaluation_container_');\n    placeLearningObjectivesTooltip();\n}\n\n/**\n * @param {array} evaluations\n * @param {array} moduleslist\n */\nexport function fillFormEvaluations(evaluations, moduleslist) {\n    modules = moduleslist;\n    modules.push(new Module('Aucun', 0));\n    evaluations.forEach(function(evaluation, i) {\n        if (i === 0) {\n            waitWithInterval('id_evaluation_title_0editable', 0, evaluation.title);\n            waitWithInterval('id_evaluation_title_0', 1, evaluation.title);\n\n            waitWithInterval('id_evaluation_description_0editable', 0, evaluation.description);\n            waitWithInterval('id_evaluation_description_0', 1, evaluation.description);\n\n        } else {\n            if (document.getElementById('id_evaluation_title_' + i) === null) {\n                addEvaluation(false);\n            }\n            let title = document.getElementById('id_evaluation_title_' + i);\n            title.value = evaluation.title;\n\n            let description = document.getElementById('id_evaluation_description_' + i);\n            description.value = evaluation.description;\n\n        }\n        fillFormCommonPart(evaluation, i);\n        buildIdHiddenInput(evaluation.id, i);\n    });\n    prepareActionButton([\n        {type: 0, id: 'evaluation_0'},\n        {type: 1, id: 'evaluation'}]);\n    disableEvaluationDeleteButton();\n    prepareAccordions('row_course_evaluation_container_');\n}"],"file":"evaluationHelper.min.js"}