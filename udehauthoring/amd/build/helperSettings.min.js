define ("format_udehauthoring/helperSettings",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=function(){b();c();i();d()};var l=0;function b(){var a=[];window.$.ajax({type:"GET",url:"../course/format/udehauthoring/handlers/ajax_unit_fetch_handler.php",success:function success(b){var c=JSON.parse(b);a=c.data;if([]!==a&&1<a.length){a.forEach(function(a,b){if(0<b){e(a.value)}})}},error:function error(){window.console.log("failure")}})}function c(){document.getElementById("adminsettings").addEventListener("submit",function(a){a.preventDefault();var b=document.getElementById("setting_units"),c=b.firstElementChild.querySelectorAll("[id^=\"admin-udeh_unit_\"]"),d=[];c.forEach(function(a,b){if(0<b){var c=a.children[0].children[1].children[0].children[0].value;if(c){d.push(c)}}else{var e=a.children[1].children[0].children[0].value;if(e){d.push(e)}}});window.$.ajax({type:"POST",url:"../course/format/udehauthoring/handlers/ajax_unit_handler.php",data:{units:d},success:function success(a){var b=JSON.parse(a);if("1"==b.success){window.$("#adminsettings").submit()}else{k();window.$("#adminsettings").submit()}},error:function error(){k();window.$("#adminsettings").submit()}})})}function d(){var a=document.querySelector("#id_add_unit");a.addEventListener("click",function(a){var b="BUTTON"===a.target.nodeName||"I"===a.target.nodeName&&a.target.parentNode&&"BUTTON"===a.target.parentNode.nodeName;if(!b){}else{a.stopImmediatePropagation();var c=null;if("I"===a.target.nodeName){c=a.target.parentNode}else{c=a.target}if(c&&c.id.includes("unit")&&!1===c.hidden){e()}else{}}});var b=document.getElementById("setting_units");b.firstElementChild.addEventListener("click",function(a){var b="BUTTON"===a.target.nodeName||"I"===a.target.nodeName&&a.target.parentNode&&"BUTTON"===a.target.parentNode.nodeName;if(!b){}else{var c=null;if("I"===a.target.nodeName){c=a.target.parentNode}else{c=a.target}if(c&&c.id.includes("unit")&&!1===c.hidden){if(c.id.includes("remove")){var d=c.id.substring(c.id.lastIndexOf("_")+1);g(d)}}else{}}})}function e(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,b=f(a),c=document.getElementById("setting_units");c.firstElementChild.appendChild(b)}function f(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;l=l+1;var b=document.getElementById("admin-udeh_unit_0"),c=b.cloneNode(!0);c.id="admin-udeh_unit_"+l;c.style.margin="0 0 0 1rem";c.firstElementChild.firstElementChild.setAttribute("for","id_s__udeh_unit_"+l);c.firstElementChild.children[1].innerHTML="udeh_unit_"+l;c.children[1].removeAttribute("id");c.children[1].firstElementChild.removeAttribute("id");c.children[1].firstElementChild.firstElementChild.setAttribute("id","id_s__udeh_unit_"+l);c.children[1].firstElementChild.firstElementChild.setAttribute("name","s__udeh_unit_"+l);if(null===a){c.children[1].firstElementChild.firstElementChild.setAttribute("value","");c.children[1].firstElementChild.firstElementChild.value=""}else{c.children[1].firstElementChild.firstElementChild.setAttribute("value",a)}var d=document.createElement("div");d.setAttribute("class","col-11 row");var e=document.createElement("div");e.setAttribute("class","col-1");d.appendChild(c.children[0]);d.appendChild(c.children[0]);c.appendChild(d);var f=document.createElement("button"),g=document.createElement("i");f.setAttribute("class","btn remove-button");f.setAttribute("name","remove_unit_"+l);f.setAttribute("id","id_remove_unit_"+l);f.setAttribute("type","button");g.setAttribute("class","remove-button-js fa fa-minus-circle fa-2x");f.appendChild(g);e.appendChild(f);c.appendChild(e);return c}function g(a){var b=document.getElementById("admin-udeh_unit_"+a);b.remove();h(a);l=l-1}function h(a){var b=document.querySelectorAll("[id^=\"admin-udeh_unit_\"]");b.forEach(function(b){if(b.id.substring(b.id.lastIndexOf("_")+1)>a){var c=b.id.substring(b.id.lastIndexOf("_")+1);b.id="admin-udeh_unit_"+(c-1);b.firstElementChild.firstElementChild.firstElementChild.setAttribute("for","id_s__udeh_unit_"+(c-1));b.firstElementChild.firstElementChild.children[1].innerHTML="udeh_unit_"+(c-1);b.firstElementChild.children[1].firstElementChild.firstElementChild.setAttribute("name","s__udeh_unit_"+(c-1));b.firstElementChild.children[1].firstElementChild.firstElementChild.setAttribute("id","id_s__udeh_unit_"+(c-1));b.children[1].firstElementChild.setAttribute("id","id_remove_unit_"+(c-1));b.children[1].firstElementChild.setAttribute("name","remove_unit_"+(c-1))}})}function i(){for(var a=[],b=[],c=[],d=[],e=[],f=[],g=[],h=[],k=[],l=document.getElementsByTagName("fieldset"),m=l[0].getElementsByClassName("form-item row"),n=0;n<m.length;n++){if(m[n].id.includes("udeh_unit")){a.push(m[n])}else if(m[n].id.includes("udeh_instructions")){b.push(m[n])}else if(m[n].id.includes("udeh_course")){c.push(m[n])}else if(m[n].id.includes("udeh_teaching")||m[n].id.includes("udeh_learning")){d.push(m[n])}else if(m[n].id.includes("udeh_section")){e.push(m[n])}else if(m[n].id.includes("udeh_evaluation")){f.push(m[n])}else if(m[n].id.includes("udeh_subquestion")){g.push(m[n])}else if(m[n].id.includes("udeh_exploration")){h.push(m[n])}else if(m[n].id.includes("udeh_resource")){k.push(m[n])}}var o=j("setting_units","Unit\xE9s d'enseignements",a),p=j("setting_instructions","Instructions de page",b),q=j("setting_course_informations","Informations g\xE9n\xE9rales du cours",c),r=j("setting_objectives","Objectifs",d),s=j("setting_sections","Modules",e),t=j("setting_evaluations","Evaluations",f),u=j("setting_subquestions","Trames",g),v=j("setting_explorations","Explorations",h),w=j("setting_resources","Ressources",k);l[0].appendChild(o);l[0].appendChild(p);l[0].appendChild(q);l[0].appendChild(r);l[0].appendChild(s);l[0].appendChild(t);l[0].appendChild(u);l[0].appendChild(v);l[0].appendChild(w);var x=document.createElement("div");x.setAttribute("data-fieldtype","button");var y=document.createElement("button"),z=document.createElement("i");z.setAttribute("class","add-button fa fa-plus-circle fa-2x");y.setAttribute("class","btn ml-0 unit-btn");y.setAttribute("name","add_unit");y.setAttribute("type","button");y.setAttribute("id","id_add_unit");var A=document.getElementById("setting_units");y.appendChild(z);x.appendChild(y);A.appendChild(x)}function j(a,b,c){var d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("a"),g=document.createElement("div"),h=document.createElement("div");f.setAttribute("data-toggle","collapse");f.setAttribute("href","#"+a);f.setAttribute("role","button");f.setAttribute("aria-expanded","false");f.setAttribute("class","collapsed");f.setAttribute("aria-controls",a);f.innerHTML=b;g.setAttribute("class","collapse mb-3");g.setAttribute("id",a);h.setAttribute("class","card card-body p-3");c.forEach(function(a){h.appendChild(a)});d.setAttribute("class","setting_container");e.setAttribute("class","setting-header");e.appendChild(f);g.appendChild(h);d.appendChild(e);d.appendChild(g);return d}function k(){var a=document.createElement("div"),b=document.getElementById("user-notifications");a.setAttribute("class","alert alert-danger alert-block fade in ");a.setAttribute("role","alert");a.innerHTML="Une erreur est apparue lors de la sauvegarde des unit\xE9s d'\xE9valuations. Le reste des configurations sera sauvegard\xE9.";b.appendChild(a);window.$("html, body").animate({scrollTop:0},"fast")}});
//# sourceMappingURL=helperSettings.min.js.map
