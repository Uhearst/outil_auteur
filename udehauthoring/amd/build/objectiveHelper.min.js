define ("format_udehauthoring/objectiveHelper",["exports","./utils","./language/format_udehauthoring_fr"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.fillFormObjectives=a.initObjectives=void 0;var D=0,E=null,F=null,G=null;function d(a,c){var d=r(a),e=document.getElementById("course_learning_objectives_container_"+a);e.appendChild(d);o(a);q();var f=e.children.length;(0,b.initTinyMce)("id_course_learning_objectives_def_"+a+"_"+(f-1),"superscript subscript | undo redo");A(a,f-1);if(c){(0,b.handleNewAccordionElement)(d)}}function e(a){var c=s(),d=document.getElementById("displayable-form-objectives-container");d.insertBefore(c,document.getElementById("teaching-add-container"));n();p();(0,b.initTinyMce)("id_course_teaching_objectives_"+D,"superscript subscript | undo redo");(0,b.initTinyMce)("id_course_learning_objectives_def_"+D+"_"+0,"superscript subscript | undo redo");z(D);if(a){(0,b.handleNewAccordionElement)(c)}}function f(a){var c=document.getElementById("course_teaching_objectives_container_"+a);(0,b.removeTinyMce)("id_course_teaching_objectives_"+a);var d=c.querySelectorAll("div.row-container-child"),e=0;d.forEach(function(){(0,b.removeTinyMce)("id_course_learning_objectives_def_"+a+"_"+e);e=e+1});c.parentElement.remove();h(a);n();m();p();D=D-1}function g(a,c){var d=document.getElementById("course_learning_objectives_subcontainer_"+a+"_"+c);(0,b.removeTinyMce)("id_course_learning_objectives_def_"+a+"_"+c);d.parentElement.remove();j(a,c);o(parseInt(a));q()}function h(a){var d=document.querySelectorAll("[id^=\"course_teaching_objectives_container_\"]");d.forEach(function(d){if(d.id.charAt(d.id.length-1)>a){var e=d.id.charAt(d.id.length-1);(0,b.removeTinyMce)("id_course_teaching_objectives_"+e);d.setAttribute("id","course_teaching_objectives_container_"+(e-1));var f=d.querySelector("[id^=\"course_teaching_objectives_header_\"]");f.setAttribute("id","course_teaching_objectives_header_"+(e-1));f.firstElementChild.setAttribute("href","#collapse_teaching_"+(e-1));f.firstElementChild.setAttribute("aria-controls","collapse_teaching_"+(e-1));f.firstElementChild.innerHTML=c.dictionnary.teachingObjective+e;var g=d.querySelector("[id^=\"collapse_teaching_\"]");g.setAttribute("id","collapse_teaching_"+(e-1));g.firstElementChild.setAttribute("id","course_teaching_objectives_1"+(e-1));g.firstElementChild.firstElementChild.setAttribute("id","fitem_id_course_teaching_objectives_"+(e-1));var h=g.firstElementChild.firstElementChild.querySelector("textarea");h.setAttribute("id","id_course_teaching_objectives_"+(e-1));h.setAttribute("name","course_teaching_objectives_"+(e-1));(0,b.initTinyMce)("id_course_teaching_objectives_"+(e-1),"superscript subscript | undo redo");i(e)}})}function i(a){var c=document.getElementById("course_learning_objectives_container_"+a);c.setAttribute("id","course_learning_objectives_container_"+(a-1));var d=c.querySelectorAll("[id^=\"course_learning_objectives_subcontainer_\"]");d.forEach(function(c){var d=c.id.slice(-1);(0,b.removeTinyMce)("id_course_learning_objectives_def_"+a+"_"+d);k(c,a-1,d);(0,b.initTinyMce)("id_course_learning_objectives_def_"+(a-1)+"_"+d,"superscript subscript | undo redo");var e=document.getElementById("fitem_id_remove_learning_objectives_"+a+"_"+d);l(e,a-1,d)});o(a-1)}function j(a,c){var d=document.getElementById("course_learning_objectives_container_"+a),e=d.querySelectorAll("[id^=\"course_learning_objectives_subcontainer_\"]");e.forEach(function(d){if(d.id.charAt(d.id.length-1)>c){var e=d.id.charAt(d.id.length-1);(0,b.removeTinyMce)("id_course_learning_objectives_def_"+a+"_"+e);k(d,a,e-1);(0,b.initTinyMce)("id_course_learning_objectives_def_"+a+"_"+(e-1),"superscript subscript | undo redo");var f=document.getElementById("fitem_id_remove_learning_objectives_"+a+"_"+e);l(f,a,e-1)}})}function k(a,b,d){a.setAttribute("id","course_learning_objectives_subcontainer_"+b+"_"+d);var e=a.querySelector("[id^=\"course_learning_objectives_header_\"]");e.setAttribute("id","course_learning_objectives_header_"+b+"_"+d);e.firstChild.setAttribute("href","#collapse_learning_"+b+"_"+d);e.firstChild.setAttribute("aria-controls","collapse_learning_"+b+"_"+d);e.firstChild.innerHTML=c.dictionnary.learningObjective+(parseInt(b)+1)+"."+(parseInt(d)+1);var f=a.querySelector("[id^=\"collapse_learning_\"]");f.setAttribute("id","collapse_learning_"+b+"_"+d);f.setAttribute("data-parent","#course_learning_objectives_container_"+b);f.firstElementChild.setAttribute("id","course_learning_objective_"+b+"_"+d);f.children[0].firstChild.setAttribute("id","fitem_id_course_learning_objectives_"+b+"_"+d);if(1===f.children[0].firstElementChild.children.length){f.children[0].firstElementChild.children[0].setAttribute("name","course_learning_objectives_def_"+b+"_"+d);f.children[0].firstElementChild.children[0].setAttribute("id","id_course_learning_objectives_def_"+b+"_"+d)}else if(2===f.children[0].firstElementChild.children.length){f.children[0].firstElementChild.children[0].setAttribute("name","course_learning_objectives_"+b+"_"+d+"_id_value");f.children[0].firstElementChild.children[1].setAttribute("name","course_learning_objectives_def_"+b+"_"+d);f.children[0].firstElementChild.children[1].setAttribute("id","id_course_learning_objectives_def_"+b+"_"+d)}f.children[0].children[1].setAttribute("id","fitem_id_course_learning_objectives_competency_type_"+b+"_"+d);f.children[0].children[1].firstChild.firstChild.setAttribute("id","id_course_learning_objectives_competency_type_"+b+"_"+d);f.children[0].children[1].firstChild.firstChild.setAttribute("for","id_course_learning_objectives_competency_type_"+b+"_"+d);f.children[0].children[1].firstChild.firstChild.innerHTML=c.dictionnary.learningObjectiveCompetencyType;f.children[0].children[1].children[1].firstChild.setAttribute("id","id_course_learning_objectives_competency_type_"+b+"_"+d);f.children[0].children[1].children[1].firstChild.setAttribute("name","course_learning_objectives_competency_type_"+b+"_"+d);f.children[0].children[1].children[1].children[1].setAttribute("id","id_error_id_course_learning_objectives_competency_type_"+b+"_"+d)}function l(a,b,c){a.setAttribute("id","fitem_id_remove_learning_objectives_"+b+"_"+c);var d=a.querySelector("[type=\"button\"]");d.setAttribute("name","remove_learning_objectives_"+b+"_"+c);d.setAttribute("id","id_remove_learning_objectives_"+b+"_"+c)}function m(){var a=document.querySelectorAll("[id^=\"fitem_id_remove_teaching_objectives\"]");a.forEach(function(a,b){a.setAttribute("id","fitem_id_remove_teaching_objectives_"+b);var c=a.querySelector("[type=\"button\"]");c.setAttribute("name","remove_teaching_objectives_"+b);c.setAttribute("id","id_remove_teaching_objectives_"+b)})}function n(){var a=document.getElementById("displayable-form-objectives-container"),b=a.querySelectorAll(".row-container"),d=document.getElementById("teaching-add-container"),e=d.querySelector(".add-text");e.innerHTML=c.dictionnary.teachingObjective+(b.length+1)}function o(a){var b=document.getElementById("course_teaching_objectives_container_"+a),d=document.getElementById("course_learning_objectives_container_"+a),e=d.querySelectorAll(".row-container-child"),f=b.querySelector(".add-text");f.innerHTML=c.dictionnary.targetedLearningObjective+(parseInt(a)+1)+"."+(e.length+1);var g=b.querySelector("[id^=\"fitem_id_add_learning_objectives_\"]");g.setAttribute("id","fitem_id_add_learning_objectives_"+a);var h=g.querySelector("[id^=\"id_add_learning_objectives\"]");h.setAttribute("id","id_add_learning_objectives_"+a);h.setAttribute("name","add_learning_objectives_"+a)}function p(){var a=document.querySelectorAll(".row-container");if(1===a.length){var b=document.querySelector(".remove_teaching_action_button"),c=b.querySelector("button");c.hidden=!0}else{var d=document.querySelectorAll(".remove_teaching_action_button");d.forEach(function(a){var b=a.querySelector("button");b.hidden=!1})}}function q(){var a=document.querySelectorAll(".row-container");a.forEach(function(a){var b=a.querySelectorAll(".row-container-child");if(1===b.length){var c=b[0].querySelector(".remove_learning_action_button"),d=c.querySelector("button");d.hidden=!0}else{b.forEach(function(a){var b=a.querySelector(".remove_learning_action_button"),c=b.querySelector("button");c.hidden=!1})}})}function r(a){var b=document.getElementById("course_learning_objectives_container_"+a),d=document.createElement("div"),e=b?b.children.length:0,f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div"),j=document.createElement("a"),k=document.createElement("div"),l=document.createElement("div");d.setAttribute("class","row row-container-child mb-3");f.setAttribute("id","course_learning_objectives_subcontainer_"+a+"_"+e);f.setAttribute("class","col-11 accordion-container card");g.setAttribute("class","accordion-header card-header");g.setAttribute("id","course_learning_objectives_header_"+a+"_"+e);j.setAttribute("data-toggle","collapse");j.setAttribute("href","#collapse_learning_"+a+"_"+e);j.setAttribute("role","button");j.setAttribute("aria-exapnded","false");j.setAttribute("aria-controls","collapse_learning_"+a+"_"+e);j.setAttribute("class","collapsed");j.innerHTML=c.dictionnary.learningObjective+(parseInt(a)+1)+"."+(e+1);k.setAttribute("class","collapse");k.setAttribute("id","collapse_learning_"+a+"_"+e);k.setAttribute("data-parent","#course_learning_objectives_container_"+a);l.setAttribute("class","card-body accordion-content");l.setAttribute("id","course_learning_objective_"+a+"_"+e);h.setAttribute("id","fitem_id_course_learning_objectives_"+a+"_"+e);h.setAttribute("class","form-group row  fitem   ");h.appendChild(w("course_learning_objectives_def_",a,e.toString()));i.setAttribute("id","fitem_id_course_learning_objectives_competency_type_"+a+"_"+e);i.setAttribute("class","form-group row  fitem   ");i.appendChild(u("id_course_learning_objectives_competency_type_"+a+"_"+e,c.dictionnary.learningObjectiveCompetencyType));i.appendChild(x("course_learning_objectives_competency_type_",e));g.appendChild(j);l.appendChild(h);l.appendChild(i);k.appendChild(l);f.appendChild(g);f.appendChild(k);var m=v("remove_learning_objectives_"+a+"_"+e,0);d.appendChild(f);d.appendChild(m);return d}function s(){var a=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("a"),h=document.createElement("div"),i=document.createElement("div");D=D+1;f.setAttribute("class","row row-container mb-3");a.setAttribute("id","course_teaching_objectives_container_"+D);a.setAttribute("class","col-11 accordion-container card");d.setAttribute("class","accordion-header card-header");d.setAttribute("id","course_teaching_objectives_header_"+D);g.setAttribute("data-toggle","collapse");g.setAttribute("href","#collapse_teaching_"+D);g.setAttribute("role","button");g.setAttribute("aria-expanded","false");g.setAttribute("aria-controls","collapse_teaching_"+D);g.setAttribute("class","collapsed");g.innerHTML=c.dictionnary.teachingObjective+(D+1);i.setAttribute("id","course_learning_objectives_container_"+D);i.setAttribute("class","course_learning_objectives_container");h.setAttribute("class","collapse");h.setAttribute("id","collapse_teaching_"+D);h.setAttribute("data-parent","#displayable-form-objectives-container");e.setAttribute("id","course_teaching_objectives_"+D);e.setAttribute("class","card-body accordion-content");b.setAttribute("id","fitem_id_course_teaching_objectives_"+D);b.setAttribute("class","form-group row  fitem   ");b.appendChild(w("course_teaching_objectives_",D));var j=r(D),k=t();d.appendChild(g);i.appendChild(j);e.appendChild(b);e.appendChild(i);e.appendChild(k);h.appendChild(e);a.appendChild(d);a.appendChild(h);var l=v("remove_teaching_objectives_"+D,0);f.appendChild(a);f.appendChild(l);return f}function t(){var a=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div"),e=document.createElement("span"),f=v("add_learning_objectives_"+D,1);e.innerHTML=c.dictionnary.targetedLearningObjective+(D+1)+"."+2;e.setAttribute("class","add-text");a.setAttribute("class","add_learning_container");b.setAttribute("class","row course_add_learning_objectives_row");d.setAttribute("class","col-11 add-container-text card card-header");d.appendChild(e);b.appendChild(d);b.appendChild(f);a.appendChild(b);return a}function u(a,b){var c=document.createElement("div"),d=document.createElement("label"),e=document.createElement("div");c.setAttribute("class","col-md-3 col-form-label d-flex pb-0 pr-md-0");d.setAttribute("class","d-inline word-break ");if(""!==a&&""!==b){d.setAttribute("for",a);d.innerHTML=b}e.setAttribute("class","form-label-addon d-flex align-items-center align-self-start");c.appendChild(d);c.appendChild(e);return c}function v(a,b){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("button"),g=document.createElement("i");if(0===b){if(a.includes("learning")){c.setAttribute("class","col-1 remove_learning_action_button")}else{c.setAttribute("class","col-1 remove_teaching_action_button")}g.setAttribute("class","remove-button-js fa fa-minus-circle fa-2x")}else{c.setAttribute("class","col-1 add_action_button");g.setAttribute("class","add-button fa fa-plus-circle fa-2x")}d.setAttribute("id","fitem_id_"+a);e.setAttribute("data-fieldtype","button");f.setAttribute("class","btn ml-0");f.setAttribute("name",a);f.setAttribute("id","id_"+a);f.setAttribute("type","button");f.appendChild(g);e.appendChild(f);d.appendChild(e);c.appendChild(d);return c}function w(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,d=document.createElement("textarea");d.setAttribute("class","custom-editor");if(c){d.setAttribute("id","id_"+a+b+"_"+c);d.setAttribute("name",a+b+"_"+c)}else{d.setAttribute("id","id_"+a+b);d.setAttribute("name",a+b)}return d}function x(a,b){var c=document.createElement("div"),d=document.createElement("select"),e=document.createElement("div"),f=["CT","CC","CP"];c.setAttribute("class","col-md-9 form-inline align-items-start felement");c.setAttribute("data-fieldtype","select");d.setAttribute("class","custom-select");d.setAttribute("name",a+D+"_"+b);d.setAttribute("id","id_"+a+D+"_"+b);for(var g=0;3>g;g++){d.appendChild(y(g,f[g]))}e.setAttribute("class","form-control-feedback invalid-feedback");e.setAttribute("id","id_error_"+a+D+"_"+b);c.appendChild(d);c.appendChild(e);return c}function y(a,b){var c=document.createElement("option");c.setAttribute("value",a.toString());c.innerHTML=b;return c}function z(a){if(0===a){var b=document.getElementById("fitem_id_course_teaching_objectives_0"),c=b.firstElementChild.firstElementChild.firstElementChild;if(c){E=c.cloneNode(!0);var d=document.getElementById("course_teaching_objectives_header_0");d.appendChild(c)}}else{var e=document.getElementById("course_teaching_objectives_header_"+a);if(E){var f=E.cloneNode(!0);e.appendChild(f)}}A(a,0)}function A(a,b){if(0===a&&0===b){var c=document.getElementById("fitem_id_course_learning_objectives_def_0_0"),d=document.getElementById("fitem_id_course_learning_objectives_competency_type_0_0"),e=c.firstElementChild.firstElementChild.firstElementChild,f=d.firstElementChild.children[1].firstElementChild;if(e){F=e.cloneNode(!0);var l=document.getElementById("course_learning_objectives_header_0_0");l.appendChild(e)}if(f){G=f.cloneNode(!0)}}else{if(F){var g=document.getElementById("course_learning_objectives_header_"+a+"_"+b),h=F.cloneNode(!0);g.appendChild(h)}if(G){var i=document.getElementById("fitem_id_course_learning_objectives_competency_type_"+a+"_"+b),j=i.firstElementChild.children[1],k=G.cloneNode(!0);j.appendChild(k)}}}function B(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null,e=document.createElement("input");e.setAttribute("name","course_"+b+"_objectives_"+d+"_"+c+"_id_value");e.setAttribute("value",a);e.hidden=!0;if("learning"===b){var f=document.getElementById("id_course_"+b+"_objectives_def_"+d+"_"+c);f.parentNode.insertBefore(e,f)}else{var g=document.getElementById("id_course_"+b+"_objectives_"+c);g.parentNode.insertBefore(e,g)}}function C(a,b,c){var d=null,e=setInterval(function(){d=document.getElementById(a);if(null!==d){if(0===b){d.innerHTML=c}else{d.value=c}clearInterval(e)}},100)}a.initObjectives=function initObjectives(){var a=document.getElementById("form_container");a.addEventListener("click",function(a){var b="BUTTON"===a.target.nodeName||"I"===a.target.nodeName&&a.target.parentNode&&"BUTTON"===a.target.parentNode.nodeName;if(!b){}else{var h=null;if("I"===a.target.nodeName){h=a.target.parentNode}else{h=a.target}if(h&&h.id.includes("learning")&&!1===h.hidden){var c=h.id.lastIndexOf("_"),e=h.id.substring(c+1);if(h.id.includes("remove")){var i=h.id.charAt(h.id.length-3);g(i,e);a.stopImmediatePropagation()}else{a.stopImmediatePropagation();d(e,!0)}}else if(h&&h.id.includes("teaching")&&!1===h.hidden){if(h.id.includes("remove")){var j=h.id.charAt(h.id.length-1);f(j);a.stopImmediatePropagation()}}else{}}});var c=document.querySelector("#id_add_teaching_objective");c.addEventListener("click",function(a){var b="BUTTON"===a.target.nodeName||"I"===a.target.nodeName&&a.target.parentNode&&"BUTTON"===a.target.parentNode.nodeName;if(!b){}else{a.stopImmediatePropagation();var c=null;if("I"===a.target.nodeName){c=a.target.parentNode}else{c=a.target}if(c&&c.id.includes("teaching")&&!1===c.hidden){e(!0)}else{}}});(0,b.prepareActionButton)([{type:0,id:"teaching_objectives_0"},{type:0,id:"learning_objectives_0_0"},{type:1,id:"teaching_objective"},{type:1,id:"learning_objectives_0"}]);p();q();(0,b.prepareAccordions)("course_teaching_objectives_container_",1);(0,b.prepareAccordions)("course_learning_objectives_subcontainer_",2)};a.fillFormObjectives=function fillFormObjectives(a){z(0);a.forEach(function(a,b){if(0===b){C("id_course_teaching_objectives_0editable",0,a.teachingobjective);C("id_course_teaching_objectives_0",1,a.teachingobjective)}else{if(null===document.getElementById("id_course_teaching_objectives_"+b)){e(!1)}var c=document.getElementById("id_course_teaching_objectives_"+b);c.value=a.teachingobjective}B(a.id,"teaching",b);a.learningobjectives.forEach(function(a,c){var e=null,f=null;if(0===c&&0===b){C("id_course_learning_objectives_def_0_0editable",0,a.learningobjective);C("id_course_learning_objectives_competency_type_"+b+"_0",1,a.learningobjectivecompetency);C("id_course_learning_objectives_def_0_0",1,a.learningobjective);f=document.getElementById("id_course_learning_objectives_competency_type_"+b+"_0")}else if(0<b&&0===c){e=document.getElementById("id_course_learning_objectives_def_"+b+"_"+c);f=document.getElementById("id_course_learning_objectives_competency_type_"+b+"_"+c);f.value=a.learningobjectivecompetency;e.value=a.learningobjective}else{e=document.getElementById("id_course_learning_objectives_def_"+b+"_"+c);f=document.getElementById("id_course_learning_objectives_competency_type_"+b+"_"+c);if(e&&f){f.value=a.learningobjectivecompetency;e.value=a.learningobjective}else{d(b,!1);e=document.getElementById("id_course_learning_objectives_def_"+b+"_"+c);f=document.getElementById("id_course_learning_objectives_competency_type_"+b+"_"+c);f.value=a.learningobjectivecompetency;e.value=a.learningobjective}}f.selectedIndex=a.learningobjectivecompetency;B(a.id,"learning",c,b)})});p();q();(0,b.prepareAccordions)("course_teaching_objectives_container_",1);(0,b.prepareAccordions)("course_learning_objectives_subcontainer_",2)}});
//# sourceMappingURL=objectiveHelper.min.js.map
