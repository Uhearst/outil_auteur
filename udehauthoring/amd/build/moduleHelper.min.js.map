{"version":3,"sources":["../src/moduleHelper.js"],"names":["formContainer","document","getElementById","addButton","querySelector","addEventListener","event","isButton","target","nodeName","parentNode","element","id","includes","hidden","charAt","length","removeModule","stopImmediatePropagation","addModule","addingButtonsContainer","querySelectorAll","forEach","addingButtonContainer","dataset","fieldtype","removeAttribute","childNodes","child","type","classList","remove","addingButtons","addingButton","disableModuleDeleteButton","modules","module","i","waitWithInterval","title","question","description","innerHTML","buildIdHiddenInput","counterModules","x","buildModule","container","insertBefore","updateAddModuleButton","index","updateExistingModules","updateRemoveModuleButton","rowModuleContainer","createElement","colModuleContainer","colButtonContainer","setAttribute","header","buildModuleHeader","content","buildModuleContent","appendChild","button","buildModuleButton","headerContainer","linkForCollapseDiv","dictionnary","contentContainer","collapseDiv","buildEditorContainer","moduleQuestion","moduleDescription","labelText","fieldContainer","labelContainer","label","editorContainer","editor","buildTinyMCE","moduleIndex","inputContainerDiv","buttonContainer","buttonElement","icon","buttons","addModuleButtonContainer","addModuleButtonText","buttonElm","currentIndex","firstElementChild","collapsible","updateEditorAndLabel","toolbarOptions","titleContainer","labelTitle","editorTitle","counter","input","toAppend","timereditable","setInterval","value","clearInterval"],"mappings":"mMAmTO,UAAuB,IACpBA,CAAAA,CAAa,CAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CADI,CAEtBC,CAAS,CAAGF,QAAQ,CAACG,aAAT,CAAuB,gBAAvB,CAFU,CAGtBJ,CAAa,CAACK,gBAAd,CAA+B,OAA/B,CAAwC,SAAAC,CAAK,CAAI,CAC7C,GAAMC,CAAAA,CAAQ,CAA6B,QAA1B,GAAAD,CAAK,CAACE,MAAN,CAAaC,QAAb,EACiB,GAA1B,GAAAH,CAAK,CAACE,MAAN,CAAaC,QAAb,EAAiCH,CAAK,CAACE,MAAN,CAAaE,UAA9C,EAAiG,QAArC,GAAAJ,CAAK,CAACE,MAAN,CAAaE,UAAb,CAAwBD,QAD5F,CAEA,GAAI,CAACF,CAAL,CAAe,CAEd,CAFD,IAEO,CACH,GAAII,CAAAA,CAAO,CAAG,IAAd,CACA,GAA8B,GAA1B,GAAAL,CAAK,CAACE,MAAN,CAAaC,QAAjB,CAAmC,CAC/BE,CAAO,CAAGL,CAAK,CAACE,MAAN,CAAaE,UAC1B,CAFD,IAEO,CACHC,CAAO,CAAGL,CAAK,CAACE,MACnB,CACD,GAAIG,CAAO,EAAIA,CAAO,CAACC,EAAR,CAAWC,QAAX,CAAoB,QAApB,CAAX,EAA4C,KAAAF,CAAO,CAACG,MAAxD,CAA0E,CACtE,GAAIH,CAAO,CAACC,EAAR,CAAWC,QAAX,CAAoB,QAApB,CAAJ,CAAmC,CAC/B,GAAID,CAAAA,CAAE,CAAGD,CAAO,CAACC,EAAR,CAAWG,MAAX,CAAkBJ,CAAO,CAACC,EAAR,CAAWI,MAAX,CAAoB,CAAtC,CAAT,CACAC,CAAY,CAACL,CAAD,CAAZ,CACAN,CAAK,CAACY,wBAAN,EACH,CACJ,CAND,IAMO,CAEN,CACJ,CACJ,CAtBD,EAwBJf,CAAS,CAACE,gBAAV,CAA2B,OAA3B,CAAoC,SAAAC,CAAK,CAAI,CACzC,GAAMC,CAAAA,CAAQ,CAA6B,QAA1B,GAAAD,CAAK,CAACE,MAAN,CAAaC,QAAb,EACiB,GAA1B,GAAAH,CAAK,CAACE,MAAN,CAAaC,QAAb,EAAiCH,CAAK,CAACE,MAAN,CAAaE,UAA9C,EAAiG,QAArC,GAAAJ,CAAK,CAACE,MAAN,CAAaE,UAAb,CAAwBD,QAD5F,CAEA,GAAI,CAACF,CAAL,CAAe,CAEd,CAFD,IAEO,CACHD,CAAK,CAACY,wBAAN,GACA,GAAIP,CAAAA,CAAO,CAAG,IAAd,CACA,GAA8B,GAA1B,GAAAL,CAAK,CAACE,MAAN,CAAaC,QAAjB,CAAmC,CAC/BE,CAAO,CAAGL,CAAK,CAACE,MAAN,CAAaE,UAC1B,CAFD,IAEO,CACHC,CAAO,CAAGL,CAAK,CAACE,MACnB,CACD,GAAIG,CAAO,EAAIA,CAAO,CAACC,EAAR,CAAWC,QAAX,CAAoB,QAApB,CAAX,EAA4C,KAAAF,CAAO,CAACG,MAAxD,CAA0E,CACtEK,CAAS,EACZ,CAFD,IAEO,CAEN,CACJ,CACJ,CAnBD,EAoBA,GAAIC,CAAAA,CAAsB,CAAGnB,QAAQ,CACrCoB,gBAD6B,CACZ,2DADY,CAA7B,CAEA,GAAID,CAAJ,CAA4B,CACxBA,CAAsB,CAACE,OAAvB,CAA+B,SAASC,CAAT,CAAgC,CAC3D,GAAgD,QAA5C,GAAAA,CAAqB,CAACC,OAAtB,CAA8BC,SAAlC,CAA0D,CACtDF,CAAqB,CAACG,eAAtB,CAAsC,OAAtC,EACA,GAAIC,CAAAA,CAAU,CAAGJ,CAAqB,CAACI,UAAvC,CACAA,CAAU,CAACL,OAAX,CAAmB,SAAAM,CAAK,CAAI,CACxB,GAAIA,CAAK,CAACC,IAAN,EAA6B,QAAf,GAAAD,CAAK,CAACC,IAAxB,CAA2C,CACvCD,CAAK,CAACE,SAAN,CAAgBC,MAAhB,CAAuB,eAAvB,CACH,CACJ,CAJD,CAKH,CAEJ,CAXD,CAYH,CACD,GAAIC,CAAAA,CAAa,CAAG/B,QAAQ,CAACoB,gBAAT,CAA0B,8BAA1B,CAApB,CACA,GAAIW,CAAJ,CAAmB,CACfA,CAAa,CAACV,OAAd,CAAsB,SAASW,CAAT,CAAuB,CACzC,GAAIN,CAAAA,CAAU,CAAGM,CAAY,CAACN,UAA9B,CACAA,CAAU,CAACL,OAAX,CAAmB,SAAAM,CAAK,CAAI,CACxBA,CAAK,CAACF,eAAN,CAAsB,OAAtB,CACH,CAFD,CAGH,CALD,CAMH,CACDQ,CAAyB,EAC5B,C,mBAKM,SAAyBC,CAAzB,CAAkC,CACrCA,CAAO,CAACb,OAAR,CAAgB,SAASc,CAAT,CAAiBC,CAAjB,CAAoB,CAChC,GAAU,CAAN,GAAAA,CAAJ,CAAa,CACTC,CAAgB,CAAC,4BAAD,CAA+B,CAA/B,CAAkCF,CAAM,CAACG,KAAzC,CAAhB,CACAD,CAAgB,CAAC,oBAAD,CAAuB,CAAvB,CAA0BF,CAAM,CAACG,KAAjC,CAAhB,CAEAD,CAAgB,CAAC,+BAAD,CAAkC,CAAlC,CAAqCF,CAAM,CAACI,QAA5C,CAAhB,CACAF,CAAgB,CAAC,uBAAD,CAA0B,CAA1B,CAA6BF,CAAM,CAACI,QAApC,CAAhB,CAEAF,CAAgB,CAAC,kCAAD,CAAqC,CAArC,CAAwCF,CAAM,CAACK,WAA/C,CAAhB,CACAH,CAAgB,CAAC,0BAAD,CAA6B,CAA7B,CAAgCF,CAAM,CAACK,WAAvC,CAEnB,CAVD,IAUO,CACH,GAAwD,IAArD,GAAAxC,QAAQ,CAACC,cAAT,CAAwB,oBAAsBmC,CAA9C,CAAH,CAA8D,CAC1DlB,CAAS,EACZ,CACD,GAAIoB,CAAAA,CAAK,CAAGtC,QAAQ,CAACC,cAAT,CAAwB,oBAAsBmC,CAA9C,CAAZ,CACAE,CAAK,CAACG,SAAN,CAAkBN,CAAM,CAACG,KAAzB,CACA,GAAIC,CAAAA,CAAQ,CAAGvC,QAAQ,CAACC,cAAT,CAAwB,uBAAyBmC,CAAjD,CAAf,CACAG,CAAQ,CAACE,SAAT,CAAqBN,CAAM,CAACI,QAA5B,CACA,GAAIC,CAAAA,CAAW,CAAGxC,QAAQ,CAACC,cAAT,CAAwB,0BAA4BmC,CAApD,CAAlB,CACAI,CAAW,CAACC,SAAZ,CAAwBN,CAAM,CAACK,WAClC,CACDE,CAAkB,CAACP,CAAM,CAACxB,EAAR,CAAYyB,CAAZ,CACrB,CAvBD,EAwBA,0BAAoB,CAChB,CAACR,IAAI,CAAE,CAAP,CAAUjB,EAAE,CAAE,UAAd,CADgB,CAEhB,CAACiB,IAAI,CAAE,CAAP,CAAUjB,EAAE,CAAE,QAAd,CAFgB,CAApB,EAGAsB,CAAyB,EAC5B,C,CA3ZD,GAAIU,CAAAA,CAAc,CAAG,CAArB,CAKA,QAASzB,CAAAA,CAAT,EAAqB,IACb0B,CAAAA,CAAC,CAAGC,CAAW,EADF,CAEbC,CAAS,CAAG9C,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAFC,CAGjB6C,CAAS,CAACC,YAAV,CAAuBH,CAAvB,CAA0B5C,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAA1B,EACA+C,CAAqB,GACrBf,CAAyB,GACzB,kBAAY,oBAAsBU,CAAlC,CAAkD,mCAAlD,EACA,kBAAY,uBAAyBA,CAArC,CAAqD,mCAArD,EACA,kBAAY,0BAA4BA,CAAxC,CACI,2FADJ,CAEH,CAKD,QAAS3B,CAAAA,CAAT,CAAsBiC,CAAtB,CAA6B,CACzB,GAAId,CAAAA,CAAM,CAAGnC,QAAQ,CAACC,cAAT,CAAwB,+BAAiCgD,CAAzD,CAAb,CACA,oBAAc,oBAAsBA,CAApC,EACA,oBAAc,uBAAyBA,CAAvC,EACA,oBAAc,0BAA4BA,CAA1C,EACAd,CAAM,CAACL,MAAP,GACAoB,CAAqB,CAACD,CAAD,CAArB,CACAD,CAAqB,GACrBf,CAAyB,GACzBkB,CAAwB,GACxBR,CAAc,CAAGA,CAAc,CAAG,CACrC,CAKD,QAASE,CAAAA,CAAT,EAAuB,CACnBF,CAAc,CAAGA,CAAc,CAAG,CAAlC,CADmB,GAEfS,CAAAA,CAAkB,CAAGpD,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAFN,CAGfC,CAAkB,CAAGtD,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAHN,CAIfE,CAAkB,CAAGvD,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAJN,CAMnBD,CAAkB,CAACI,YAAnB,CAAgC,OAAhC,CAAyC,wBAAzC,EACAJ,CAAkB,CAACI,YAAnB,CAAgC,IAAhC,CAAsC,+BAAiCb,CAAvE,EACAW,CAAkB,CAACE,YAAnB,CAAgC,OAAhC,CAAyC,iCAAzC,EACAD,CAAkB,CAACC,YAAnB,CAAgC,OAAhC,CAAyC,mCAAzC,EATmB,GAWfC,CAAAA,CAAM,CAAGC,CAAiB,EAXX,CAYfC,CAAO,CAAGC,CAAkB,EAZb,CAanBN,CAAkB,CAACO,WAAnB,CAA+BJ,CAA/B,EACAH,CAAkB,CAACO,WAAnB,CAA+BF,CAA/B,EAEA,GAAIG,CAAAA,CAAM,CAAGC,CAAiB,EAA9B,CACAR,CAAkB,CAACM,WAAnB,CAA+BC,CAA/B,EAEAV,CAAkB,CAACS,WAAnB,CAA+BP,CAA/B,EACAF,CAAkB,CAACS,WAAnB,CAA+BN,CAA/B,EAEA,MAAOH,CAAAA,CACV,CAKD,QAASM,CAAAA,CAAT,EAA6B,IACrBM,CAAAA,CAAe,CAAGhE,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CADG,CAErBY,CAAkB,CAAGjE,QAAQ,CAACqD,aAAT,CAAuB,GAAvB,CAFA,CAIzBW,CAAe,CAACR,YAAhB,CAA6B,OAA7B,CAAsC,8BAAtC,EACAQ,CAAe,CAACR,YAAhB,CAA6B,IAA7B,CAAmC,wBAA2Bb,CAA9D,EAEAsB,CAAkB,CAACT,YAAnB,CAAgC,aAAhC,CAA+C,UAA/C,EACAS,CAAkB,CAACT,YAAnB,CAAgC,MAAhC,CAAwC,oBAAuBb,CAA/D,EACAsB,CAAkB,CAACT,YAAnB,CAAgC,MAAhC,CAAwC,QAAxC,EACAS,CAAkB,CAACT,YAAnB,CAAgC,eAAhC,CAAiD,OAAjD,EACAS,CAAkB,CAACT,YAAnB,CAAgC,eAAhC,CAAiD,mBAAsBb,CAAvE,EACAsB,CAAkB,CAACT,YAAnB,CAAgC,OAAhC,CAAyC,WAAzC,EACAS,CAAkB,CAACxB,SAAnB,CAA+ByB,cAAY/B,MAAZ,EAAsBQ,CAAc,CAAG,CAAvC,CAA/B,CAEAqB,CAAe,CAACH,WAAhB,CAA4BI,CAA5B,EAEA,MAAOD,CAAAA,CACV,CAKD,QAASJ,CAAAA,CAAT,EAA8B,IACtBO,CAAAA,CAAgB,CAAGnE,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CADG,CAEtBe,CAAW,CAAGpE,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAFQ,CAI1Be,CAAW,CAACZ,YAAZ,CAAyB,OAAzB,CAAkC,UAAlC,EACAY,CAAW,CAACZ,YAAZ,CAAyB,IAAzB,CAA+B,mBAAsBb,CAArD,EACAyB,CAAW,CAACZ,YAAZ,CAAyB,aAAzB,CAAwC,sCAAxC,EAEAW,CAAgB,CAACX,YAAjB,CAA8B,OAA9B,CAAuC,6BAAvC,EACAW,CAAgB,CAACX,YAAjB,CAA8B,IAA9B,CAAoC,yBAA4Bb,CAAhE,EAT0B,GAWtBL,CAAAA,CAAK,CAAG+B,CAAoB,CAAC,eAAD,CAAkB,iBAAlB,CAXN,CAYtB9B,CAAQ,CAAG8B,CAAoB,CAAC,kBAAD,CAAqBH,cAAYI,cAAjC,CAZT,CAatB9B,CAAW,CAAG6B,CAAoB,CAAC,qBAAD,CAAwBH,cAAYK,iBAApC,CAbZ,CAe1BJ,CAAgB,CAACN,WAAjB,CAA6BvB,CAA7B,EACA6B,CAAgB,CAACN,WAAjB,CAA6BtB,CAA7B,EACA4B,CAAgB,CAACN,WAAjB,CAA6BrB,CAA7B,EACA4B,CAAW,CAACP,WAAZ,CAAwBM,CAAxB,EAEA,MAAOC,CAAAA,CACV,CAMD,QAASC,CAAAA,CAAT,CAA8B1D,CAA9B,CAAkC6D,CAAlC,CAA6C,IACrCC,CAAAA,CAAc,CAAGzE,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CADoB,CAErCqB,CAAc,CAAG1E,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAFoB,CAGrCsB,CAAK,CAAG3E,QAAQ,CAACqD,aAAT,CAAuB,OAAvB,CAH6B,CAIrCuB,CAAe,CAAG5E,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAJmB,CAOzCoB,CAAc,CAACjB,YAAf,CAA4B,OAA5B,CAAqC,qCAArC,EACAiB,CAAc,CAACjB,YAAf,CAA4B,IAA5B,CAAkC,YAAc7C,CAAd,CAAmB,GAAnB,CAAyBgC,CAA3D,EAEA+B,CAAc,CAAClB,YAAf,CAA4B,OAA5B,CAAqC,6CAArC,EAEAmB,CAAK,CAACnB,YAAN,CAAmB,OAAnB,CAA4B,qBAA5B,EACAmB,CAAK,CAACnB,YAAN,CAAmB,KAAnB,CAA0B,MAAQ7C,CAAR,CAAa,GAAb,CAAmBgC,CAA7C,EACAgC,CAAK,CAAClC,SAAN,CAAkB+B,CAAlB,CAEAI,CAAe,CAACpB,YAAhB,CAA6B,OAA7B,CAAsC,qCAAtC,EACAoB,CAAe,CAACpB,YAAhB,CAA6B,gBAA7B,CAA+C,QAA/C,EAEA,GAAIqB,CAAAA,CAAM,CAAGC,CAAY,CAACnE,CAAD,CAAKgC,CAAL,CAAzB,CAEAiC,CAAe,CAACf,WAAhB,CAA4BgB,CAA5B,EACAH,CAAc,CAACb,WAAf,CAA2Bc,CAA3B,EAEAF,CAAc,CAACZ,WAAf,CAA2Ba,CAA3B,EACAD,CAAc,CAACZ,WAAf,CAA2Be,CAA3B,EAEA,MAAOH,CAAAA,CACV,CAMD,QAASK,CAAAA,CAAT,CAAsBvE,CAAtB,CAA8BwE,CAA9B,CAA2C,CACvC,GAAIC,CAAAA,CAAiB,CAAGhF,QAAQ,CAACqD,aAAT,CAAuB,UAAvB,CAAxB,CACA2B,CAAiB,CAACxB,YAAlB,CAA+B,OAA/B,CAAwC,eAAxC,EACAwB,CAAiB,CAACxB,YAAlB,CAA+B,IAA/B,CAAqC,MAAQjD,CAAR,CAAiB,GAAjB,CAAuBwE,CAA5D,EACAC,CAAiB,CAACxB,YAAlB,CAA+B,MAA/B,CAAuCjD,CAAM,CAAG,GAAT,CAAewE,CAAtD,EACA,MAAOC,CAAAA,CACV,CAKD,QAASjB,CAAAA,CAAT,EAA6B,IACrBX,CAAAA,CAAkB,CAAGpD,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CADA,CAErB4B,CAAe,CAAGjF,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAFG,CAGrB6B,CAAa,CAAGlF,QAAQ,CAACqD,aAAT,CAAuB,QAAvB,CAHK,CAIrB8B,CAAI,CAAGnF,QAAQ,CAACqD,aAAT,CAAuB,GAAvB,CAJc,CAMzBD,CAAkB,CAACI,YAAnB,CAAgC,IAAhC,CAAsC,0BAA4Bb,CAAlE,EAEAsC,CAAe,CAACzB,YAAhB,CAA6B,gBAA7B,CAA+C,QAA/C,EAEA0B,CAAa,CAAC1B,YAAd,CAA2B,OAA3B,CAAoC,UAApC,EACA0B,CAAa,CAAC1B,YAAd,CAA2B,MAA3B,CAAmC,iBAAmBb,CAAtD,EACAuC,CAAa,CAAC1B,YAAd,CAA2B,IAA3B,CAAiC,oBAAsBb,CAAvD,EACAuC,CAAa,CAAC1B,YAAd,CAA2B,MAA3B,CAAmC,QAAnC,EAEA2B,CAAI,CAAC3B,YAAL,CAAkB,OAAlB,CAA2B,2CAA3B,EAEA0B,CAAa,CAACrB,WAAd,CAA0BsB,CAA1B,EACAF,CAAe,CAACpB,WAAhB,CAA4BqB,CAA5B,EACA9B,CAAkB,CAACS,WAAnB,CAA+BoB,CAA/B,EAEA,MAAO7B,CAAAA,CACV,CAKD,QAASnB,CAAAA,CAAT,EAAqC,CACjC,GAAIC,CAAAA,CAAO,CAAGlC,QAAQ,CAACoB,gBAAT,CAA0B,wCAA1B,CAAd,CACA,GAAuB,CAAnB,GAAAc,CAAO,CAACnB,MAAZ,CAA0B,CACtB,GAAI+C,CAAAA,CAAM,CAAG9D,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CAAb,CACA6D,CAAM,CAACjD,MAAP,GACH,CAHD,IAGO,CACH,GAAIuE,CAAAA,CAAO,CAAGpF,QAAQ,CAACoB,gBAAT,CAA0B,4BAA1B,CAAd,CACAgE,CAAO,CAAC/D,OAAR,CAAgB,SAAAyC,CAAM,CAAI,CACtBA,CAAM,CAACjD,MAAP,GACH,CAFD,CAGH,CACJ,CAKD,QAASmC,CAAAA,CAAT,EAAiC,IACzBJ,CAAAA,CAAC,CAAG5C,QAAQ,CAACoB,gBAAT,CAA0B,wCAA1B,CADqB,CAEzBiE,CAAwB,CAAGrF,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAFF,CAGzBqF,CAAmB,CAAGD,CAAwB,CAAClF,aAAzB,CAAuC,WAAvC,CAHG,CAI7BmF,CAAmB,CAAC7C,SAApB,CAAgCyB,cAAY/B,MAAZ,EAAsBS,CAAC,CAAC7B,MAAF,CAAW,CAAjC,CACnC,CAKD,QAASoC,CAAAA,CAAT,EAAoC,CAChC,GAAIiC,CAAAA,CAAO,CAAGpF,QAAQ,CAACoB,gBAAT,CAA0B,mCAA1B,CAAd,CACAgE,CAAO,CAAC/D,OAAR,CAAgB,SAASyC,CAAT,CAAiBb,CAAjB,CAAwB,CACpCa,CAAM,CAACN,YAAP,CAAoB,IAApB,CAA0B,0BAA4BP,CAAtD,EACA,GAAIsC,CAAAA,CAAS,CAAGzB,CAAM,CAAC3D,aAAP,CAAqB,mBAArB,CAAhB,CACAoF,CAAS,CAAC/B,YAAV,CAAuB,MAAvB,CAA+B,iBAAmBP,CAAlD,EACAsC,CAAS,CAAC/B,YAAV,CAAuB,IAAvB,CAA6B,oBAAsBP,CAAnD,CACH,CALD,CAMH,CAKD,QAASC,CAAAA,CAAT,CAA+BD,CAA/B,CAAsC,CAClC,GAAIf,CAAAA,CAAO,CAAGlC,QAAQ,CAACoB,gBAAT,CAA0B,wCAA1B,CAAd,CACAc,CAAO,CAACb,OAAR,CAAgB,SAAAc,CAAM,CAAI,CACtB,GAAIA,CAAM,CAACxB,EAAP,CAAUG,MAAV,CAAiBqB,CAAM,CAACxB,EAAP,CAAUI,MAAV,CAAmB,CAApC,EAAyCkC,CAA7C,CAAoD,CAChD,GAAIuC,CAAAA,CAAY,CAAGrD,CAAM,CAACxB,EAAP,CAAUG,MAAV,CAAiBqB,CAAM,CAACxB,EAAP,CAAUI,MAAV,CAAmB,CAApC,CAAnB,CACAoB,CAAM,CAACqB,YAAP,CAAoB,IAApB,CAA0B,gCAAkCgC,CAAY,CAAG,CAAjD,CAA1B,EACA,GAAI/B,CAAAA,CAAM,CAAGtB,CAAM,CAAChC,aAAP,CAAqB,mBAArB,CAAb,CACAsD,CAAM,CAACD,YAAP,CAAoB,IAApB,CAA0B,yBAA2BgC,CAAY,CAAG,CAA1C,CAA1B,EACA/B,CAAM,CAACgC,iBAAP,CAAyBjC,YAAzB,CAAsC,MAAtC,CAA8C,qBAAuBgC,CAAY,CAAG,CAAtC,CAA9C,EACA/B,CAAM,CAACgC,iBAAP,CAAyBjC,YAAzB,CAAsC,eAAtC,CAAuD,oBAAsBgC,CAAY,CAAG,CAArC,CAAvD,EACA/B,CAAM,CAACgC,iBAAP,CAAyBhD,SAAzB,CAAqCyB,cAAY/B,MAAZ,CAAsBqD,CAA3D,CAEA,GAAIE,CAAAA,CAAW,CAAGvD,CAAM,CAAChC,aAAP,CAAqB,WAArB,CAAlB,CACAuF,CAAW,CAAClC,YAAZ,CAAyB,IAAzB,CAA+B,oBAAsBgC,CAAY,CAAG,CAArC,CAA/B,EACAE,CAAW,CAACD,iBAAZ,CAA8BjC,YAA9B,CAA2C,IAA3C,CAAiD,0BAA4BgC,CAAY,CAAG,CAA3C,CAAjD,EACAG,CAAoB,CAACxD,CAAD,CAASqD,CAAT,CAAuB,OAAvB,CAAgC,mCAAhC,CAApB,CACAG,CAAoB,CAACxD,CAAD,CAASqD,CAAT,CAAuB,UAAvB,CAAmC,mCAAnC,CAApB,CACAG,CAAoB,CAACxD,CAAD,CAASqD,CAAT,CAAuB,aAAvB,CAChB,2FADgB,CAGvB,CACJ,CAnBD,CAoBH,CAQD,QAASG,CAAAA,CAAT,CAA8BxD,CAA9B,CAAsCqD,CAAtC,CAAoD9E,CAApD,CAA6DkF,CAA7D,CAA6E,CACzE,GAAIC,CAAAA,CAAc,CAAG1D,CAAM,CAAChC,aAAP,CAAqB,2BAA4BO,CAA5B,CAAsC,MAA3D,CAArB,CACAmF,CAAc,CAACrC,YAAf,CAA4B,IAA5B,CAAkC,oBAAsB9C,CAAtB,CAAgC,GAAhC,EAAuC8E,CAAY,CAAG,CAAtD,CAAlC,EACA,GAAIM,CAAAA,CAAU,CAAGD,CAAc,CAAC1F,aAAf,CAA6B,sBAAuBO,CAAvB,CAAiC,MAA9D,CAAjB,CACAoF,CAAU,CAACtC,YAAX,CAAwB,KAAxB,CAA+B,cAAgB9C,CAAhB,CAA0B,GAA1B,EAAiC8E,CAAY,CAAG,CAAhD,CAA/B,EACA,oBAAc,cAAgB9E,CAAhB,CAA0B,GAA1B,CAAiC8E,CAA/C,EACA,GAAIO,CAAAA,CAAW,CAAGF,CAAc,CAAC1F,aAAf,CAA6B,qBAAsBO,CAAtB,CAAgC,MAA7D,CAAlB,CACAqF,CAAW,CAACvC,YAAZ,CAAyB,IAAzB,CAA+B,cAAgB9C,CAAhB,CAA0B,GAA1B,EAAiC8E,CAAY,CAAG,CAAhD,CAA/B,EACAO,CAAW,CAACvC,YAAZ,CAAyB,MAAzB,CAAiC,WAAa9C,CAAb,CAAuB,GAAvB,EAA8B8E,CAAY,CAAG,CAA7C,CAAjC,EACA,kBAAY,cAAgB9E,CAAhB,CAA0B,GAA1B,EAAiC8E,CAAY,CAAG,CAAhD,CAAZ,CAAgEI,CAAhE,CACH,CAMD,QAASlD,CAAAA,CAAT,CAA4B/B,CAA5B,CAAgCqF,CAAhC,CAAyC,CACrC,GAAIC,CAAAA,CAAK,CAAGjG,QAAQ,CAACqD,aAAT,CAAuB,OAAvB,CAAZ,CACA4C,CAAK,CAACzC,YAAN,CAAmB,MAAnB,CAA2B,WAAcwC,CAAd,CAAyB,WAApD,EACAC,CAAK,CAACzC,YAAN,CAAmB,OAAnB,CAA4B7C,CAA5B,EACAsF,CAAK,CAACpF,MAAN,IAEA,GAAIH,CAAAA,CAAO,CAAGV,QAAQ,CAACC,cAAT,CAAwB,0BAA6B+F,CAArD,CAAd,CACAtF,CAAO,CAACD,UAAR,CAAmBsC,YAAnB,CAAgCkD,CAAhC,CAAuCvF,CAAvC,CACH,CAOD,QAAS2B,CAAAA,CAAT,CAA0B1B,CAA1B,CAA8BiB,CAA9B,CAAoCsE,CAApC,CAA8C,IACtCxF,CAAAA,CAAO,CAAG,IAD4B,CAEtCyF,CAAa,CAAGC,WAAW,CAAC,UAAW,CACvC1F,CAAO,CAAGV,QAAQ,CAACC,cAAT,CAAwBU,CAAxB,CAAV,CACA,GAAe,IAAZ,GAAAD,CAAH,CAAqB,CACjB,GAAY,CAAT,GAAAkB,CAAH,CAAe,CACXlB,CAAO,CAAC+B,SAAR,CAAoByD,CACvB,CAFD,IAEO,CACHxF,CAAO,CAAC2F,KAAR,CAAgBH,CACnB,CACDI,aAAa,CAACH,CAAD,CAChB,CACJ,CAV8B,CAU5B,GAV4B,CAWlC,C","sourcesContent":["import {initTinyMce, prepareActionButton, removeTinyMce} from \"./utils\";\nimport {dictionnary} from \"./language/format_udehauthoring_fr\";\n\nlet counterModules = 0;\n\n/**\n *\n */\nfunction addModule() {\n    let x = buildModule();\n    let container = document.getElementById('displayable-form-sections-container');\n    container.insertBefore(x, document.getElementById('section-add-container'));\n    updateAddModuleButton();\n    disableModuleDeleteButton();\n    initTinyMce('id_section_title_' + counterModules, 'superscript subscript | undo redo');\n    initTinyMce('id_section_question_' + counterModules, 'superscript subscript | undo redo');\n    initTinyMce('id_section_description_' + counterModules,\n        'bold italic | numlist bullist | underline strikethrough superscript subscript | undo redo');\n}\n\n/**\n * @param {string} index\n */\nfunction removeModule(index) {\n    let module = document.getElementById('row_course_module_container_' + index);\n    removeTinyMce(\"id_section_title_\" + index);\n    removeTinyMce(\"id_section_question_\" + index);\n    removeTinyMce(\"id_section_description_\" + index);\n    module.remove();\n    updateExistingModules(index);\n    updateAddModuleButton();\n    disableModuleDeleteButton();\n    updateRemoveModuleButton();\n    counterModules = counterModules - 1;\n}\n\n/**\n *\n */\nfunction buildModule() {\n    counterModules = counterModules + 1;\n    let rowModuleContainer = document.createElement(\"div\");\n    let colModuleContainer = document.createElement(\"div\");\n    let colButtonContainer = document.createElement(\"div\");\n\n    rowModuleContainer.setAttribute('class', 'row row-container mb-3');\n    rowModuleContainer.setAttribute('id', 'row_course_module_container_' + counterModules);\n    colModuleContainer.setAttribute('class', 'col-11 accordion-container card');\n    colButtonContainer.setAttribute('class', 'col-1 remove_module_action_button');\n\n    let header = buildModuleHeader();\n    let content = buildModuleContent();\n    colModuleContainer.appendChild(header);\n    colModuleContainer.appendChild(content);\n\n    let button = buildModuleButton();\n    colButtonContainer.appendChild(button);\n\n    rowModuleContainer.appendChild(colModuleContainer);\n    rowModuleContainer.appendChild(colButtonContainer);\n\n    return rowModuleContainer;\n}\n\n/**\n *\n */\nfunction buildModuleHeader() {\n    let headerContainer = document.createElement(\"div\");\n    let linkForCollapseDiv = document.createElement(\"a\");\n\n    headerContainer.setAttribute('class', 'card-header accordion-header');\n    headerContainer.setAttribute('id', 'course_module_header_' + (counterModules));\n\n    linkForCollapseDiv.setAttribute('data-toggle', 'collapse');\n    linkForCollapseDiv.setAttribute('href', '#collapse_module_' + (counterModules));\n    linkForCollapseDiv.setAttribute('role', 'button');\n    linkForCollapseDiv.setAttribute('aria-expanded', 'false');\n    linkForCollapseDiv.setAttribute('aria-controls', 'collapse_module_' + (counterModules));\n    linkForCollapseDiv.setAttribute('class', 'collapsed');\n    linkForCollapseDiv.innerHTML = dictionnary.module + (counterModules + 1);\n\n    headerContainer.appendChild(linkForCollapseDiv);\n\n    return headerContainer;\n}\n\n/**\n *\n */\nfunction buildModuleContent() {\n    let contentContainer = document.createElement(\"div\");\n    let collapseDiv = document.createElement(\"div\");\n\n    collapseDiv.setAttribute('class', 'collapse');\n    collapseDiv.setAttribute('id', 'collapse_module_' + (counterModules));\n    collapseDiv.setAttribute('data-parent', '#displayable-form-sections-container');\n\n    contentContainer.setAttribute('class', 'card-body accordion-content');\n    contentContainer.setAttribute('id', 'course_module_content_' + (counterModules));\n\n    let title = buildEditorContainer('section_title', 'Titre du module');\n    let question = buildEditorContainer('section_question', dictionnary.moduleQuestion);\n    let description = buildEditorContainer('section_description', dictionnary.moduleDescription);\n\n    contentContainer.appendChild(title);\n    contentContainer.appendChild(question);\n    contentContainer.appendChild(description);\n    collapseDiv.appendChild(contentContainer);\n\n    return collapseDiv;\n}\n\n/**\n * @param {string} id\n * @param {string} labelText\n */\nfunction buildEditorContainer(id, labelText) {\n    let fieldContainer = document.createElement(\"div\");\n    let labelContainer = document.createElement(\"div\");\n    let label = document.createElement(\"label\");\n    let editorContainer = document.createElement(\"div\");\n\n\n    fieldContainer.setAttribute('class', 'form-group row  fitem   tiny-editor');\n    fieldContainer.setAttribute('id', 'fitem_id_' + id + '_' + counterModules);\n\n    labelContainer.setAttribute('class', 'col-md-3 col-form-label d-flex pb-0 pr-md-0');\n\n    label.setAttribute('class', 'd-inline word-break');\n    label.setAttribute('for', 'id_' + id + '_' + counterModules);\n    label.innerHTML = labelText;\n\n    editorContainer.setAttribute('class', 'col-md-9 align-items-start felement');\n    editorContainer.setAttribute('data-fieldtype', 'editor');\n\n    let editor = buildTinyMCE(id, counterModules);\n\n    editorContainer.appendChild(editor);\n    labelContainer.appendChild(label);\n\n    fieldContainer.appendChild(labelContainer);\n    fieldContainer.appendChild(editorContainer);\n\n    return fieldContainer;\n}\n\n/**\n * @param {string} target\n * @param {string} moduleIndex\n */\nfunction buildTinyMCE(target, moduleIndex) {\n    let inputContainerDiv = document.createElement(\"textarea\");\n    inputContainerDiv.setAttribute('class', 'custom-editor');\n    inputContainerDiv.setAttribute('id', 'id_' + target + '_' + moduleIndex);\n    inputContainerDiv.setAttribute('name', target + '_' + moduleIndex);\n    return inputContainerDiv;\n}\n\n/**\n *\n */\nfunction buildModuleButton() {\n    let rowModuleContainer = document.createElement(\"div\");\n    let buttonContainer = document.createElement(\"div\");\n    let buttonElement = document.createElement(\"button\");\n    let icon = document.createElement(\"i\");\n\n    rowModuleContainer.setAttribute('id', 'fitem_id_remove_module_' + counterModules);\n\n    buttonContainer.setAttribute('data-fieldtype', 'button');\n\n    buttonElement.setAttribute('class', 'btn ml-0');\n    buttonElement.setAttribute('name', 'remove_module_' + counterModules);\n    buttonElement.setAttribute('id', 'id_remove_module_' + counterModules);\n    buttonElement.setAttribute('type', 'button');\n\n    icon.setAttribute('class', 'remove-button-js fa fa-minus-circle fa-2x');\n\n    buttonElement.appendChild(icon);\n    buttonContainer.appendChild(buttonElement);\n    rowModuleContainer.appendChild(buttonContainer);\n\n    return rowModuleContainer;\n}\n\n/**\n *\n */\nfunction disableModuleDeleteButton() {\n    let modules = document.querySelectorAll('[id^=\"row_course_module_container_\"]');\n    if (modules.length === 1) {\n        let button = document.getElementById('id_remove_module_0');\n        button.hidden = true;\n    } else {\n        let buttons = document.querySelectorAll('[id^=\"id_remove_module\"]');\n        buttons.forEach(button => {\n            button.hidden = false;\n        });\n    }\n}\n\n/**\n *\n */\nfunction updateAddModuleButton() {\n    let x = document.querySelectorAll('[id^=\"row_course_module_container_\"]');\n    let addModuleButtonContainer = document.getElementById('section-add-container');\n    let addModuleButtonText = addModuleButtonContainer.querySelector('.add-text');\n    addModuleButtonText.innerHTML = dictionnary.module + (x.length + 1);\n}\n\n/**\n *\n */\nfunction updateRemoveModuleButton() {\n    let buttons = document.querySelectorAll('[id^=\"fitem_id_remove_module_\"]');\n    buttons.forEach(function(button, index) {\n        button.setAttribute('id', 'fitem_id_remove_module_' + index);\n        let buttonElm = button.querySelector('[type=\"button\"]');\n        buttonElm.setAttribute('name', 'remove_module_' + index);\n        buttonElm.setAttribute('id', 'id_remove_module_' + index);\n    });\n}\n\n/**\n * @param {string} index\n */\nfunction updateExistingModules(index) {\n    let modules = document.querySelectorAll('[id^=\"row_course_module_container_\"]');\n    modules.forEach(module => {\n        if (module.id.charAt(module.id.length - 1) > index) {\n            let currentIndex = module.id.charAt(module.id.length - 1);\n            module.setAttribute('id', 'row_course_module_container_' + (currentIndex - 1));\n            let header = module.querySelector('.accordion-header');\n            header.setAttribute('id', 'course_module_header_' + (currentIndex - 1));\n            header.firstElementChild.setAttribute('href', '#collapse_module_' + (currentIndex - 1));\n            header.firstElementChild.setAttribute('aria-controls', 'collapse_module_' + (currentIndex - 1));\n            header.firstElementChild.innerHTML = dictionnary.module + (currentIndex);\n\n            let collapsible = module.querySelector('.collapse');\n            collapsible.setAttribute('id', 'collapse_module_' + (currentIndex - 1));\n            collapsible.firstElementChild.setAttribute('id', 'course_module_content_' + (currentIndex - 1));\n            updateEditorAndLabel(module, currentIndex, 'title', 'superscript subscript | undo redo');\n            updateEditorAndLabel(module, currentIndex, 'question', 'superscript subscript | undo redo');\n            updateEditorAndLabel(module, currentIndex, 'description',\n                'bold italic | numlist bullist | underline strikethrough superscript subscript | undo redo');\n\n        }\n    });\n}\n\n/**\n * @param {object} module\n * @param {string} currentIndex\n * @param {string} element\n * @param {string} toolbarOptions\n */\nfunction updateEditorAndLabel(module, currentIndex, element, toolbarOptions) {\n    let titleContainer = module.querySelector('[id^=\"fitem_id_section_' + element + '_\"]');\n    titleContainer.setAttribute('id', 'fitem_id_section_' + element + '_' + (currentIndex - 1));\n    let labelTitle = titleContainer.querySelector('[for^=\"id_section_' + element + '_\"]');\n    labelTitle.setAttribute('for', 'id_section_' + element + '_' + (currentIndex - 1));\n    removeTinyMce('id_section_' + element + '_' + (currentIndex));\n    let editorTitle = titleContainer.querySelector('[id^=\"id_section_' + element + '_\"]');\n    editorTitle.setAttribute('id', 'id_section_' + element + '_' + (currentIndex - 1));\n    editorTitle.setAttribute('name', 'section_' + element + '_' + (currentIndex - 1));\n    initTinyMce('id_section_' + element + '_' + (currentIndex - 1), toolbarOptions);\n}\n\n/**\n * @param {int} id\n * @param {int} counter\n */\nfunction buildIdHiddenInput(id, counter) {\n    let input = document.createElement(\"input\");\n    input.setAttribute('name', 'section_' + (counter) + '_id_value');\n    input.setAttribute('value', id);\n    input.hidden = true;\n\n    let element = document.getElementById('fitem_id_section_title_' + (counter));\n    element.parentNode.insertBefore(input, element);\n}\n\n/**\n * @param {string} id\n * @param {int} type\n * @param {object} toAppend\n */\nfunction waitWithInterval(id, type, toAppend) {\n    let element = null;\n    let timereditable = setInterval(function() {\n        element = document.getElementById(id);\n        if(element !== null) {\n            if(type === 0) {\n                element.innerHTML = toAppend;\n            } else {\n                element.value = toAppend;\n            }\n            clearInterval(timereditable);\n        }\n    }, 100);\n}\n\n/**\n *\n */\nexport function initModules() {\n    const formContainer = document.getElementById('form_container');\n    let addButton = document.querySelector('#id_add_module');\n        formContainer.addEventListener('click', event => {\n            const isButton = event.target.nodeName === 'BUTTON'\n                || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n            if (!isButton) {\n                return;\n            } else {\n                let element = null;\n                if (event.target.nodeName === 'I') {\n                    element = event.target.parentNode;\n                } else {\n                    element = event.target;\n                }\n                if (element && element.id.includes('module') && element.hidden === false) {\n                    if (element.id.includes('remove')) {\n                        let id = element.id.charAt(element.id.length - 1);\n                        removeModule(id);\n                        event.stopImmediatePropagation();\n                    }\n                } else {\n                    return;\n                }\n            }\n        });\n\n    addButton.addEventListener('click', event => {\n        const isButton = event.target.nodeName === 'BUTTON'\n            || (event.target.nodeName === 'I' && event.target.parentNode && event.target.parentNode.nodeName === 'BUTTON');\n        if (!isButton) {\n            return;\n        } else {\n            event.stopImmediatePropagation();\n            let element = null;\n            if (event.target.nodeName === 'I') {\n                element = event.target.parentNode;\n            } else {\n                element = event.target;\n            }\n            if (element && element.id.includes('module') && element.hidden === false) {\n                addModule();\n            } else {\n                return;\n            }\n        }\n    });\n    let addingButtonsContainer = document.\n    querySelectorAll(\"[class='col-md-9 form-inline align-items-start felement']\");\n    if (addingButtonsContainer) {\n        addingButtonsContainer.forEach(function(addingButtonContainer) {\n            if (addingButtonContainer.dataset.fieldtype === 'button') {\n                addingButtonContainer.removeAttribute('class');\n                let childNodes = addingButtonContainer.childNodes;\n                childNodes.forEach(child => {\n                    if (child.type && child.type === 'button') {\n                        child.classList.remove('btn-secondary');\n                    }\n                });\n            }\n\n        });\n    }\n    let addingButtons = document.querySelectorAll(\"[class*='add_action_button']\");\n    if (addingButtons) {\n        addingButtons.forEach(function(addingButton) {\n            let childNodes = addingButton.childNodes;\n            childNodes.forEach(child => {\n                child.removeAttribute('class');\n            });\n        });\n    }\n    disableModuleDeleteButton();\n}\n\n/**\n * @param {array} modules\n */\nexport function fillFormModules(modules) {\n    modules.forEach(function(module, i) {\n        if (i === 0) {\n            waitWithInterval('id_section_title_0editable', 0, module.title);\n            waitWithInterval('id_section_title_0', 1, module.title);\n\n            waitWithInterval('id_section_question_0editable', 0, module.question);\n            waitWithInterval('id_section_question_0', 1, module.question);\n\n            waitWithInterval('id_section_description_0editable', 0, module.description);\n            waitWithInterval('id_section_description_0', 1, module.description);\n\n        } else {\n            if(document.getElementById('id_section_title_' + i) === null) {\n                addModule();\n            }\n            let title = document.getElementById('id_section_title_' + i);\n            title.innerHTML = module.title;\n            let question = document.getElementById('id_section_question_' + i);\n            question.innerHTML = module.question;\n            let description = document.getElementById('id_section_description_' + i);\n            description.innerHTML = module.description;\n        }\n        buildIdHiddenInput(module.id, i);\n    });\n    prepareActionButton([\n        {type: 0, id: 'module_0'},\n        {type: 1, id: 'module'}]);\n    disableModuleDeleteButton();\n}"],"file":"moduleHelper.min.js"}